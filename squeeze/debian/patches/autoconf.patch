Goal: move changes to autogenerated files into their own patch now that we've
      lost the script that was calling autogen.sh for us; this also helps
      make debian/rules clean just a little bit cleaner.

Fixes: no specific bug

Status wrt upstream: Debian specific

Note: This patch will normally have to be updated by hand after every
      new upstream release and after updates of any other patches that
      touch configure.in -- the first because configure scripts don't
      hold patches well between updates, the second so that our changes
      are recognized in the version of the script actually used in the
      build process.

      The process for refreshing this patch is:

 export QUILT_PATCHES=debian/patches
 quilt push autoconf.patch # to get everything applied up to this point
 quilt push -f autoconf.patch # to override the errors when applying
 (cd source3 && autoconf -Im4 -I../m4 -I../lib/replace -I../source4)
   # the -I lib/replace is needed because upstream seems to have done
   # something screwy with where their m4 include files are distributed in the
   # source tree; so this option may not be necessary in the future
 quilt refresh
 find . -name '*.rej' | xargs rm

Index: samba/source3/configure
===================================================================
--- samba.orig/source3/configure
+++ samba/source3/configure
@@ -1,13 +1,13 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.65 for Samba 3.
+# Generated by GNU Autoconf 2.68 for Samba 3.
 #
 # Report bugs to <samba-technical@samba.org>.
 #
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation,
-# Inc.
+# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
+# Foundation, Inc.
 #
 #
 # This configure script is free software; the Free Software Foundation
@@ -91,6 +91,7 @@
 IFS=" ""	$as_nl"
 
 # Find who we are.  Look in the path if we contain no directory separator.
+as_myself=
 case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -216,11 +217,18 @@
   # We cannot yet assume a decent shell, so we have to provide a
 	# neutralization value for shells without unset; and this also
 	# works around shells that cannot unset nonexistent variables.
+	# Preserve -v and -x to the replacement shell.
 	BASH_ENV=/dev/null
 	ENV=/dev/null
 	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
 	export CONFIG_SHELL
-	exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+	case $- in # ((((
+	  *v*x* | *x*v* ) as_opts=-vx ;;
+	  *v* ) as_opts=-v ;;
+	  *x* ) as_opts=-x ;;
+	  * ) as_opts= ;;
+	esac
+	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
 fi
 
     if test x$as_have_required = xno; then :
@@ -319,7 +327,7 @@
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
@@ -359,19 +367,19 @@
 fi # as_fn_arith
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -533,7 +541,7 @@
 exec 6>&1
 
 # Name of the host.
-# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
 # so uname gets run too.
 ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
 
@@ -1096,8 +1104,9 @@
   fi
 
   case $ac_option in
-  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
-  *)	ac_optarg=yes ;;
+  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *=)   ac_optarg= ;;
+  *)    ac_optarg=yes ;;
   esac
 
   # Accept the important Cygnus configure options, so we can diagnose typos.
@@ -1142,7 +1151,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1168,7 +1177,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1372,7 +1381,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1388,7 +1397,7 @@
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
@@ -1418,8 +1427,8 @@
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
     x_libraries=$ac_optarg ;;
 
-  -*) as_fn_error "unrecognized option: \`$ac_option'
-Try \`$0 --help' for more information."
+  -*) as_fn_error $? "unrecognized option: \`$ac_option'
+Try \`$0 --help' for more information"
     ;;
 
   *=*)
@@ -1427,7 +1436,7 @@
     # Reject names that are not valid shell variable names.
     case $ac_envvar in #(
       '' | [0-9]* | *[!_$as_cr_alnum]* )
-      as_fn_error "invalid variable name: \`$ac_envvar'" ;;
+      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
     esac
     eval $ac_envvar=\$ac_optarg
     export $ac_envvar ;;
@@ -1437,7 +1446,7 @@
     $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
       $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
-    : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
+    : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
     ;;
 
   esac
@@ -1445,13 +1454,13 @@
 
 if test -n "$ac_prev"; then
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
-  as_fn_error "missing argument to $ac_option"
+  as_fn_error $? "missing argument to $ac_option"
 fi
 
 if test -n "$ac_unrecognized_opts"; then
   case $enable_option_checking in
     no) ;;
-    fatal) as_fn_error "unrecognized options: $ac_unrecognized_opts" ;;
+    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
@@ -1474,7 +1483,7 @@
     [\\/$]* | ?:[\\/]* )  continue;;
     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
   esac
-  as_fn_error "expected an absolute directory name for --$ac_var: $ac_val"
+  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
 done
 
 # There might be people who depend on the old broken behavior: `$host'
@@ -1488,8 +1497,8 @@
 if test "x$host_alias" != x; then
   if test "x$build_alias" = x; then
     cross_compiling=maybe
-    $as_echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
-    If a cross compiler is detected then cross compile mode will be used." >&2
+    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used" >&2
   elif test "x$build_alias" != "x$host_alias"; then
     cross_compiling=yes
   fi
@@ -1504,9 +1513,9 @@
 ac_pwd=`pwd` && test -n "$ac_pwd" &&
 ac_ls_di=`ls -di .` &&
 ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
-  as_fn_error "working directory cannot be determined"
+  as_fn_error $? "working directory cannot be determined"
 test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
-  as_fn_error "pwd does not report name of working directory"
+  as_fn_error $? "pwd does not report name of working directory"
 
 
 # Find the source files, if location was not specified.
@@ -1545,11 +1554,11 @@
 fi
 if test ! -r "$srcdir/$ac_unique_file"; then
   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
-  as_fn_error "cannot find sources ($ac_unique_file) in $srcdir"
+  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
 fi
 ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
 ac_abs_confdir=`(
-	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error "$ac_msg"
+	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
 	pwd)`
 # When building in place, set srcdir=.
 if test "$ac_abs_confdir" = "$ac_pwd"; then
@@ -1589,7 +1598,7 @@
       --help=short        display options specific to this package
       --help=recursive    display the short help of all the included packages
   -V, --version           display version information and exit
-  -q, --quiet, --silent   do not print \`checking...' messages
+  -q, --quiet, --silent   do not print \`checking ...' messages
       --cache-file=FILE   cache test results in FILE [disabled]
   -C, --config-cache      alias for \`--cache-file=config.cache'
   -n, --no-create         do not create output files
@@ -1811,8 +1820,9 @@
   PYTHON_VER  The installed Python version to use, for example '2.3'. This
               string will be appended to the Python interpreter canonical
               name.
-  YACC        The `Yet Another C Compiler' implementation to use. Defaults to
-              the first program found out of: `bison -y', `byacc', `yacc'.
+  YACC        The `Yet Another Compiler Compiler' implementation to use.
+              Defaults to the first program found out of: `bison -y', `byacc',
+              `yacc'.
   YFLAGS      The list of arguments that will be passed by default to $YACC.
               This script will default YFLAGS to the empty string to avoid a
               default value of `-d' given by some make applications.
@@ -1884,9 +1894,9 @@
 if $ac_init_version; then
   cat <<\_ACEOF
 Samba configure 3
-generated by GNU Autoconf 2.65
+generated by GNU Autoconf 2.68
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -1930,7 +1940,7 @@
 
 	ac_retval=1
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_compile
@@ -1956,7 +1966,7 @@
     mv -f conftest.er1 conftest.err
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } >/dev/null && {
+  test $ac_status = 0; } > conftest.i && {
 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        }; then :
@@ -1967,7 +1977,7 @@
 
     ac_retval=1
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_cpp
@@ -1980,10 +1990,10 @@
 ac_fn_c_check_header_mongrel ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  if eval \${$3+:} false; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 fi
 eval ac_res=\$$3
@@ -2019,7 +2029,7 @@
 else
   ac_header_preproc=no
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
 $as_echo "$ac_header_preproc" >&6; }
 
@@ -2042,17 +2052,15 @@
 $as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
 $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-( cat <<\_ASBOX
-## ---------------------------------------- ##
+( $as_echo "## ---------------------------------------- ##
 ## Report this to samba-technical@samba.org ##
-## ---------------------------------------- ##
-_ASBOX
+## ---------------------------------------- ##"
      ) | sed "s/^/$as_me: WARNING:     /" >&2
     ;;
 esac
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=\$ac_header_compiler"
@@ -2061,7 +2069,7 @@
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
 fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_mongrel
 
@@ -2102,7 +2110,7 @@
        ac_retval=$ac_status
 fi
   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_run
@@ -2116,7 +2124,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2134,7 +2142,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_compile
 
@@ -2179,7 +2187,7 @@
   # interfere with the next link command; also delete a directory that is
   # left behind by Apple's compiler.  We do this before executing the actions.
   rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_try_link
@@ -2193,7 +2201,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=no"
@@ -2234,7 +2242,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_type
 
@@ -2411,7 +2419,7 @@
 rm -f conftest.val
 
   fi
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
   as_fn_set_status $ac_retval
 
 } # ac_fn_c_compute_int
@@ -2424,7 +2432,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2479,7 +2487,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_func
 
@@ -2492,7 +2500,7 @@
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2.$3" >&5
 $as_echo_n "checking for $2.$3... " >&6; }
-if { as_var=$4; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$4+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2536,19 +2544,22 @@
 eval ac_res=\$$4
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_member
 
-# ac_fn_c_check_decl LINENO SYMBOL VAR
-# ------------------------------------
-# Tests whether SYMBOL is declared, setting cache variable VAR accordingly.
+# ac_fn_c_check_decl LINENO SYMBOL VAR INCLUDES
+# ---------------------------------------------
+# Tests whether SYMBOL is declared in INCLUDES, setting cache variable VAR
+# accordingly.
 ac_fn_c_check_decl ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $2 is declared" >&5
-$as_echo_n "checking whether $2 is declared... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  as_decl_name=`echo $2|sed 's/ *(.*//'`
+  as_decl_use=`echo $2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $as_decl_name is declared" >&5
+$as_echo_n "checking whether $as_decl_name is declared... " >&6; }
+if eval \${$3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -2557,8 +2568,12 @@
 int
 main ()
 {
-#ifndef $2
-  (void) $2;
+#ifndef $as_decl_name
+#ifdef __cplusplus
+  (void) $as_decl_use;
+#else
+  (void) $as_decl_name;
+#endif
 #endif
 
   ;
@@ -2575,7 +2590,7 @@
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_decl
 cat >config.log <<_ACEOF
@@ -2583,7 +2598,7 @@
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by Samba $as_me 3, which was
-generated by GNU Autoconf 2.65.  Invocation command line was
+generated by GNU Autoconf 2.68.  Invocation command line was
 
   $ $0 $@
 
@@ -2693,11 +2708,9 @@
   {
     echo
 
-    cat <<\_ASBOX
-## ---------------- ##
+    $as_echo "## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##
-_ASBOX
+## ---------------- ##"
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
@@ -2731,11 +2744,9 @@
 )
     echo
 
-    cat <<\_ASBOX
-## ----------------- ##
+    $as_echo "## ----------------- ##
 ## Output variables. ##
-## ----------------- ##
-_ASBOX
+## ----------------- ##"
     echo
     for ac_var in $ac_subst_vars
     do
@@ -2748,11 +2759,9 @@
     echo
 
     if test -n "$ac_subst_files"; then
-      cat <<\_ASBOX
-## ------------------- ##
+      $as_echo "## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##
-_ASBOX
+## ------------------- ##"
       echo
       for ac_var in $ac_subst_files
       do
@@ -2766,11 +2775,9 @@
     fi
 
     if test -s confdefs.h; then
-      cat <<\_ASBOX
-## ----------- ##
+      $as_echo "## ----------- ##
 ## confdefs.h. ##
-## ----------- ##
-_ASBOX
+## ----------- ##"
       echo
       cat confdefs.h
       echo
@@ -2825,7 +2832,12 @@
 ac_site_file1=NONE
 ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  ac_site_file1=$CONFIG_SITE
+  # We do not want a PATH search for config.site.
+  case $CONFIG_SITE in #((
+    -*)  ac_site_file1=./$CONFIG_SITE;;
+    */*) ac_site_file1=$CONFIG_SITE;;
+    *)   ac_site_file1=./$CONFIG_SITE;;
+  esac
 elif test "x$prefix" != xNONE; then
   ac_site_file1=$prefix/share/config.site
   ac_site_file2=$prefix/etc/config.site
@@ -2840,7 +2852,11 @@
     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
 $as_echo "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
-    . "$ac_site_file"
+    . "$ac_site_file" \
+      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "failed to load site script $ac_site_file
+See \`config.log' for more details" "$LINENO" 5; }
   fi
 done
 
@@ -2916,7 +2932,7 @@
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
 $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
@@ -2971,16 +2987,22 @@
 
 ac_aux_dir=
 for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
-  for ac_t in install-sh install.sh shtool; do
-    if test -f "$ac_dir/$ac_t"; then
-      ac_aux_dir=$ac_dir
-      ac_install_sh="$ac_aux_dir/$ac_t -c"
-      break 2
-    fi
-  done
+  if test -f "$ac_dir/install-sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install-sh -c"
+    break
+  elif test -f "$ac_dir/install.sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install.sh -c"
+    break
+  elif test -f "$ac_dir/shtool"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
+  fi
 done
 if test -z "$ac_aux_dir"; then
-  as_fn_error "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
+  as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
 fi
 
 # These three variables are undocumented and unsupported,
@@ -2994,27 +3016,27 @@
 
 # Make sure we can run config.sub.
 $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
+  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
 $as_echo_n "checking build system type... " >&6; }
-if test "${ac_cv_build+set}" = set; then :
+if ${ac_cv_build+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
   ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
 test "x$ac_build_alias" = x &&
-  as_fn_error "cannot guess build type; you must specify one" "$LINENO" 5
+  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
 ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
 $as_echo "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical build" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
@@ -3032,14 +3054,14 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
 $as_echo_n "checking host system type... " >&6; }
-if test "${ac_cv_host+set}" = set; then :
+if ${ac_cv_host+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
   ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
@@ -3047,7 +3069,7 @@
 $as_echo "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical host" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
@@ -3065,14 +3087,14 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
 $as_echo_n "checking target system type... " >&6; }
-if test "${ac_cv_target+set}" = set; then :
+if ${ac_cv_target+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "x$target_alias" = x; then
   ac_cv_target=$ac_cv_host
 else
   ac_cv_target=`$SHELL "$ac_aux_dir/config.sub" $target_alias` ||
-    as_fn_error "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
+    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
 fi
 
 fi
@@ -3080,7 +3102,7 @@
 $as_echo "$ac_cv_target" >&6; }
 case $ac_cv_target in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical target" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
 esac
 target=$ac_cv_target
 ac_save_IFS=$IFS; IFS='-'
@@ -3115,7 +3137,7 @@
 	fi
 done
 if test x"$libreplacedir" = "x"; then
-	as_fn_error "cannot find libreplace in $libreplacepaths" "$LINENO" 5
+	as_fn_error $? "cannot find libreplace in $libreplacepaths" "$LINENO" 5
 fi
 LIBREPLACEOBJ="$libreplacedir/replace.o"
 
@@ -3546,12 +3568,12 @@
 if test "${with_smbtorture4_path+set}" = set; then :
   withval=$with_smbtorture4_path;  case "$withval" in
   yes|no)
-    as_fn_error "--with-smbtorture4-path should take a path" "$LINENO" 5
+    as_fn_error $? "--with-smbtorture4-path should take a path" "$LINENO" 5
   ;;
   * )
     smbtorture4_path="$withval"
     if test -z "$smbtorture4_path" -a ! -f $smbtorture4_path; then
-    	as_fn_error "'$smbtorture_path' does not  exist!" "$LINENO" 5
+    	as_fn_error $? "'$smbtorture_path' does not  exist!" "$LINENO" 5
     fi
     smbtorture4_option="-t $withval"
   ;;
@@ -3569,12 +3591,12 @@
 if test "${with_selftest_custom_conf+set}" = set; then :
   withval=$with_selftest_custom_conf;  case "$withval" in
   yes|no)
-    as_fn_error "--with-selftest-custom-conf should take a path" "$LINENO" 5
+    as_fn_error $? "--with-selftest-custom-conf should take a path" "$LINENO" 5
   ;;
   * )
     selftest_custom_conf="$withval"
     if test -z "$selftest_custom_conf" -a ! -f $selftest_custom_conf; then
-	as_fn_error "'$selftest_custom_conf' does not  exist!" "$LINENO" 5
+	as_fn_error $? "'$selftest_custom_conf' does not  exist!" "$LINENO" 5
     fi
     selftest_custom_conf="-c $withval"
   ;;
@@ -3728,7 +3750,7 @@
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -3768,7 +3790,7 @@
 set dummy gcc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_CC"; then
@@ -3821,7 +3843,7 @@
 set dummy ${ac_tool_prefix}cc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -3861,7 +3883,7 @@
 set dummy cc; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -3920,7 +3942,7 @@
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_CC+set}" = set; then :
+if ${ac_cv_prog_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$CC"; then
@@ -3964,7 +3986,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+if ${ac_cv_prog_ac_ct_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_CC"; then
@@ -4018,8 +4040,8 @@
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "no acceptable C compiler found in \$PATH
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
@@ -4133,9 +4155,8 @@
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "C compiler cannot create executables
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "C compiler cannot create executables
+See \`config.log' for more details" "$LINENO" 5; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
@@ -4177,8 +4198,8 @@
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest conftest$ac_cv_exeext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
@@ -4235,9 +4256,9 @@
     else
 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run C compiled programs.
+as_fn_error $? "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
-See \`config.log' for more details." "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5; }
     fi
   fi
 fi
@@ -4248,7 +4269,7 @@
 ac_clean_files=$ac_clean_files_save
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
 $as_echo_n "checking for suffix of object files... " >&6; }
-if test "${ac_cv_objext+set}" = set; then :
+if ${ac_cv_objext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4288,8 +4309,8 @@
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
@@ -4299,7 +4320,7 @@
 ac_objext=$OBJEXT
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
 $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
-if test "${ac_cv_c_compiler_gnu+set}" = set; then :
+if ${ac_cv_c_compiler_gnu+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -4336,7 +4357,7 @@
 ac_save_CFLAGS=$CFLAGS
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
 $as_echo_n "checking whether $CC accepts -g... " >&6; }
-if test "${ac_cv_prog_cc_g+set}" = set; then :
+if ${ac_cv_prog_cc_g+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_save_c_werror_flag=$ac_c_werror_flag
@@ -4414,7 +4435,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
 $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
-if test "${ac_cv_prog_cc_c89+set}" = set; then :
+if ${ac_cv_prog_cc_c89+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_prog_cc_c89=no
@@ -4514,7 +4535,7 @@
 if test x"$GCC" != x"yes" ; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C99" >&5
 $as_echo_n "checking for $CC option to accept ISO C99... " >&6; }
-if test "${ac_cv_prog_cc_c99+set}" = set; then :
+if ${ac_cv_prog_cc_c99+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_prog_cc_c99=no
@@ -4711,7 +4732,7 @@
   CPP=
 fi
 if test -z "$CPP"; then
-  if test "${ac_cv_prog_CPP+set}" = set; then :
+  if ${ac_cv_prog_CPP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
       # Double quotes because CPP needs to be expanded
@@ -4741,7 +4762,7 @@
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
@@ -4757,11 +4778,11 @@
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
@@ -4800,7 +4821,7 @@
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
@@ -4816,18 +4837,18 @@
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
 fi
 
 ac_ext=c
@@ -4839,7 +4860,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
 $as_echo_n "checking for grep that handles long lines and -e... " >&6; }
-if test "${ac_cv_path_GREP+set}" = set; then :
+if ${ac_cv_path_GREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -z "$GREP"; then
@@ -4888,7 +4909,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_GREP"; then
-    as_fn_error "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_GREP=$GREP
@@ -4902,7 +4923,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
 $as_echo_n "checking for egrep... " >&6; }
-if test "${ac_cv_path_EGREP+set}" = set; then :
+if ${ac_cv_path_EGREP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
@@ -4954,7 +4975,7 @@
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_EGREP"; then
-    as_fn_error "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_EGREP=$EGREP
@@ -4969,7 +4990,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
 $as_echo_n "checking for ANSI C header files... " >&6; }
-if test "${ac_cv_header_stdc+set}" = set; then :
+if ${ac_cv_header_stdc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -5086,8 +5107,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -5099,7 +5119,7 @@
 
 
   ac_fn_c_check_header_mongrel "$LINENO" "minix/config.h" "ac_cv_header_minix_config_h" "$ac_includes_default"
-if test "x$ac_cv_header_minix_config_h" = x""yes; then :
+if test "x$ac_cv_header_minix_config_h" = xyes; then :
   MINIX=yes
 else
   MINIX=
@@ -5121,7 +5141,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether it is safe to define __EXTENSIONS__" >&5
 $as_echo_n "checking whether it is safe to define __EXTENSIONS__... " >&6; }
-if test "${ac_cv_safe_to_define___extensions__+set}" = set; then :
+if ${ac_cv_safe_to_define___extensions__+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -5160,7 +5180,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
 $as_echo_n "checking whether byte ordering is bigendian... " >&6; }
-if test "${ac_cv_c_bigendian+set}" = set; then :
+if ${ac_cv_c_bigendian+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_bigendian=unknown
@@ -5378,13 +5398,13 @@
 
      ;; #(
    *)
-     as_fn_error "unknown endianness
+     as_fn_error $? "unknown endianness
  presetting ac_cv_c_bigendian=no (or yes) will help" "$LINENO" 5 ;;
  esac
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
 $as_echo_n "checking for inline... " >&6; }
-if test "${ac_cv_c_inline+set}" = set; then :
+if ${ac_cv_c_inline+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_inline=no
@@ -5595,7 +5615,7 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
 $as_echo_n "checking for a BSD-compatible install... " >&6; }
 if test -z "$INSTALL"; then
-if test "${ac_cv_path_install+set}" = set; then :
+if ${ac_cv_path_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -5674,7 +5694,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing strerror" >&5
 $as_echo_n "checking for library containing strerror... " >&6; }
-if test "${ac_cv_search_strerror+set}" = set; then :
+if ${ac_cv_search_strerror+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -5708,11 +5728,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_strerror+set}" = set; then :
+  if ${ac_cv_search_strerror+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_strerror+set}" = set; then :
+if ${ac_cv_search_strerror+:} false; then :
 
 else
   ac_cv_search_strerror=no
@@ -5747,7 +5767,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for special C compiler options needed for large files" >&5
 $as_echo_n "checking for special C compiler options needed for large files... " >&6; }
-if test "${ac_cv_sys_largefile_CC+set}" = set; then :
+if ${ac_cv_sys_largefile_CC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_sys_largefile_CC=no
@@ -5798,7 +5818,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _FILE_OFFSET_BITS value needed for large files" >&5
 $as_echo_n "checking for _FILE_OFFSET_BITS value needed for large files... " >&6; }
-if test "${ac_cv_sys_file_offset_bits+set}" = set; then :
+if ${ac_cv_sys_file_offset_bits+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   while :; do
@@ -5867,7 +5887,7 @@
   if test $ac_cv_sys_file_offset_bits = unknown; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _LARGE_FILES value needed for large files" >&5
 $as_echo_n "checking for _LARGE_FILES value needed for large files... " >&6; }
-if test "${ac_cv_sys_large_files+set}" = set; then :
+if ${ac_cv_sys_large_files+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   while :; do
@@ -6022,7 +6042,7 @@
 for ac_header in standards.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "standards.h" "ac_cv_header_standards_h" "$ac_includes_default"
-if test "x$ac_cv_header_standards_h" = x""yes; then :
+if test "x$ac_cv_header_standards_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STANDARDS_H 1
 _ACEOF
@@ -6034,7 +6054,7 @@
 
 # Solaris needs HAVE_LONG_LONG defined
 ac_fn_c_check_type "$LINENO" "long long" "ac_cv_type_long_long" "$ac_includes_default"
-if test "x$ac_cv_type_long_long" = x""yes; then :
+if test "x$ac_cv_type_long_long" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_LONG_LONG 1
@@ -6050,7 +6070,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
 $as_echo_n "checking size of int... " >&6; }
-if test "${ac_cv_sizeof_int+set}" = set; then :
+if ${ac_cv_sizeof_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :
@@ -6059,9 +6079,8 @@
   if test "$ac_cv_type_int" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (int)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (int)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_int=0
    fi
@@ -6084,7 +6103,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of char" >&5
 $as_echo_n "checking size of char... " >&6; }
-if test "${ac_cv_sizeof_char+set}" = set; then :
+if ${ac_cv_sizeof_char+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (char))" "ac_cv_sizeof_char"        "$ac_includes_default"; then :
@@ -6093,9 +6112,8 @@
   if test "$ac_cv_type_char" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (char)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (char)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_char=0
    fi
@@ -6118,7 +6136,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of short" >&5
 $as_echo_n "checking size of short... " >&6; }
-if test "${ac_cv_sizeof_short+set}" = set; then :
+if ${ac_cv_sizeof_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (short))" "ac_cv_sizeof_short"        "$ac_includes_default"; then :
@@ -6127,9 +6145,8 @@
   if test "$ac_cv_type_short" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (short)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (short)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_short=0
    fi
@@ -6152,7 +6169,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
 $as_echo_n "checking size of long... " >&6; }
-if test "${ac_cv_sizeof_long+set}" = set; then :
+if ${ac_cv_sizeof_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :
@@ -6161,9 +6178,8 @@
   if test "$ac_cv_type_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long=0
    fi
@@ -6186,7 +6202,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long" >&5
 $as_echo_n "checking size of long long... " >&6; }
-if test "${ac_cv_sizeof_long_long+set}" = set; then :
+if ${ac_cv_sizeof_long_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long))" "ac_cv_sizeof_long_long"        "$ac_includes_default"; then :
@@ -6195,9 +6211,8 @@
   if test "$ac_cv_type_long_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long_long=0
    fi
@@ -6216,7 +6231,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "uint_t" "ac_cv_type_uint_t" "$ac_includes_default"
-if test "x$ac_cv_type_uint_t" = x""yes; then :
+if test "x$ac_cv_type_uint_t" = xyes; then :
 
 else
 
@@ -6227,7 +6242,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "int8_t" "ac_cv_type_int8_t" "$ac_includes_default"
-if test "x$ac_cv_type_int8_t" = x""yes; then :
+if test "x$ac_cv_type_int8_t" = xyes; then :
 
 else
 
@@ -6238,7 +6253,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "uint8_t" "ac_cv_type_uint8_t" "$ac_includes_default"
-if test "x$ac_cv_type_uint8_t" = x""yes; then :
+if test "x$ac_cv_type_uint8_t" = xyes; then :
 
 else
 
@@ -6249,7 +6264,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "int16_t" "ac_cv_type_int16_t" "$ac_includes_default"
-if test "x$ac_cv_type_int16_t" = x""yes; then :
+if test "x$ac_cv_type_int16_t" = xyes; then :
 
 else
 
@@ -6260,7 +6275,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "uint16_t" "ac_cv_type_uint16_t" "$ac_includes_default"
-if test "x$ac_cv_type_uint16_t" = x""yes; then :
+if test "x$ac_cv_type_uint16_t" = xyes; then :
 
 else
 
@@ -6273,7 +6288,7 @@
 
 if test $ac_cv_sizeof_int -eq 4 ; then
 ac_fn_c_check_type "$LINENO" "int32_t" "ac_cv_type_int32_t" "$ac_includes_default"
-if test "x$ac_cv_type_int32_t" = x""yes; then :
+if test "x$ac_cv_type_int32_t" = xyes; then :
 
 else
 
@@ -6284,7 +6299,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "uint32_t" "ac_cv_type_uint32_t" "$ac_includes_default"
-if test "x$ac_cv_type_uint32_t" = x""yes; then :
+if test "x$ac_cv_type_uint32_t" = xyes; then :
 
 else
 
@@ -6296,7 +6311,7 @@
 
 elif test $ac_cv_size_long -eq 4 ; then
 ac_fn_c_check_type "$LINENO" "int32_t" "ac_cv_type_int32_t" "$ac_includes_default"
-if test "x$ac_cv_type_int32_t" = x""yes; then :
+if test "x$ac_cv_type_int32_t" = xyes; then :
 
 else
 
@@ -6307,7 +6322,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "uint32_t" "ac_cv_type_uint32_t" "$ac_includes_default"
-if test "x$ac_cv_type_uint32_t" = x""yes; then :
+if test "x$ac_cv_type_uint32_t" = xyes; then :
 
 else
 
@@ -6318,11 +6333,11 @@
 fi
 
 else
-as_fn_error "LIBREPLACE no 32-bit type found" "$LINENO" 5
+as_fn_error $? "LIBREPLACE no 32-bit type found" "$LINENO" 5
 fi
 
 ac_fn_c_check_type "$LINENO" "int64_t" "ac_cv_type_int64_t" "$ac_includes_default"
-if test "x$ac_cv_type_int64_t" = x""yes; then :
+if test "x$ac_cv_type_int64_t" = xyes; then :
 
 else
 
@@ -6333,7 +6348,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "uint64_t" "ac_cv_type_uint64_t" "$ac_includes_default"
-if test "x$ac_cv_type_uint64_t" = x""yes; then :
+if test "x$ac_cv_type_uint64_t" = xyes; then :
 
 else
 
@@ -6345,7 +6360,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = x""yes; then :
+if test "x$ac_cv_type_size_t" = xyes; then :
 
 else
 
@@ -6356,7 +6371,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "ssize_t" "ac_cv_type_ssize_t" "$ac_includes_default"
-if test "x$ac_cv_type_ssize_t" = x""yes; then :
+if test "x$ac_cv_type_ssize_t" = xyes; then :
 
 else
 
@@ -6373,7 +6388,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of off_t" >&5
 $as_echo_n "checking size of off_t... " >&6; }
-if test "${ac_cv_sizeof_off_t+set}" = set; then :
+if ${ac_cv_sizeof_off_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (off_t))" "ac_cv_sizeof_off_t"        "$ac_includes_default"; then :
@@ -6382,9 +6397,8 @@
   if test "$ac_cv_type_off_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (off_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (off_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_off_t=0
    fi
@@ -6407,7 +6421,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of size_t" >&5
 $as_echo_n "checking size of size_t... " >&6; }
-if test "${ac_cv_sizeof_size_t+set}" = set; then :
+if ${ac_cv_sizeof_size_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (size_t))" "ac_cv_sizeof_size_t"        "$ac_includes_default"; then :
@@ -6416,9 +6430,8 @@
   if test "$ac_cv_type_size_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (size_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (size_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_size_t=0
    fi
@@ -6441,7 +6454,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of ssize_t" >&5
 $as_echo_n "checking size of ssize_t... " >&6; }
-if test "${ac_cv_sizeof_ssize_t+set}" = set; then :
+if ${ac_cv_sizeof_ssize_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (ssize_t))" "ac_cv_sizeof_ssize_t"        "$ac_includes_default"; then :
@@ -6450,9 +6463,8 @@
   if test "$ac_cv_type_ssize_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (ssize_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (ssize_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_ssize_t=0
    fi
@@ -6471,7 +6483,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "intptr_t" "ac_cv_type_intptr_t" "$ac_includes_default"
-if test "x$ac_cv_type_intptr_t" = x""yes; then :
+if test "x$ac_cv_type_intptr_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_INTPTR_T 1
@@ -6480,7 +6492,7 @@
 
 fi
 ac_fn_c_check_type "$LINENO" "uintptr_t" "ac_cv_type_uintptr_t" "$ac_includes_default"
-if test "x$ac_cv_type_uintptr_t" = x""yes; then :
+if test "x$ac_cv_type_uintptr_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_UINTPTR_T 1
@@ -6489,7 +6501,7 @@
 
 fi
 ac_fn_c_check_type "$LINENO" "ptrdiff_t" "ac_cv_type_ptrdiff_t" "$ac_includes_default"
-if test "x$ac_cv_type_ptrdiff_t" = x""yes; then :
+if test "x$ac_cv_type_ptrdiff_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_PTRDIFF_T 1
@@ -6500,10 +6512,10 @@
 
 
 if test x"$ac_cv_type_long_long" != x"yes";then
-	as_fn_error "LIBREPLACE needs type 'long long'" "$LINENO" 5
+	as_fn_error $? "LIBREPLACE needs type 'long long'" "$LINENO" 5
 fi
 if test $ac_cv_sizeof_long_long -lt 8;then
-	as_fn_error "LIBREPLACE needs sizeof(long long) >= 8" "$LINENO" 5
+	as_fn_error $? "LIBREPLACE needs sizeof(long long) >= 8" "$LINENO" 5
 fi
 
 ############################################
@@ -6511,7 +6523,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for immediate structures" >&5
 $as_echo_n "checking for immediate structures... " >&6; }
-if test "${libreplace_cv_immediate_structures+set}" = set; then :
+if ${libreplace_cv_immediate_structures+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -6573,7 +6585,7 @@
 		fi
 	done
 	if test x"$teventdir" = "x"; then
-	   as_fn_error "cannot find libtevent source in $teventpaths" "$LINENO" 5
+	   as_fn_error $? "cannot find libtevent source in $teventpaths" "$LINENO" 5
 	fi
 fi
 
@@ -6594,7 +6606,7 @@
 for ac_header in sys/epoll.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/epoll.h" "ac_cv_header_sys_epoll_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_epoll_h" = x""yes; then :
+if test "x$ac_cv_header_sys_epoll_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_EPOLL_H 1
 _ACEOF
@@ -6606,7 +6618,7 @@
 for ac_func in epoll_create
 do :
   ac_fn_c_check_func "$LINENO" "epoll_create" "ac_cv_func_epoll_create"
-if test "x$ac_cv_func_epoll_create" = x""yes; then :
+if test "x$ac_cv_func_epoll_create" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_EPOLL_CREATE 1
 _ACEOF
@@ -6804,7 +6816,7 @@
 	# Add -Wdeclaration-after-statement if compiler supports it
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands -Wdeclaration-after-statement" >&5
 $as_echo_n "checking that the C compiler understands -Wdeclaration-after-statement... " >&6; }
-if test "${samba_cv_HAVE_Wdeclaration_after_statement+set}" = set; then :
+if ${samba_cv_HAVE_Wdeclaration_after_statement+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -6860,7 +6872,7 @@
 	#-Werror-implicit-function-declaration
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands -Werror-implicit-function-declaration" >&5
 $as_echo_n "checking that the C compiler understands -Werror-implicit-function-declaration... " >&6; }
-if test "${samba_cv_HAVE_Werror_implicit_function_declaration+set}" = set; then :
+if ${samba_cv_HAVE_Werror_implicit_function_declaration+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -6961,7 +6973,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_AWK+set}" = set; then :
+if ${ac_cv_prog_AWK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$AWK"; then
@@ -7010,7 +7022,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_MAKE+set}" = set; then :
+if ${ac_cv_path_MAKE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $MAKE in
@@ -7052,7 +7064,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we have GNU make" >&5
 $as_echo_n "checking whether we have GNU make... " >&6; }
-if test "${samba_cv_gnu_make+set}" = set; then :
+if ${samba_cv_gnu_make+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -7087,7 +7099,7 @@
 set dummy perl; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PERL+set}" = set; then :
+if ${ac_cv_path_PERL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PERL in
@@ -7131,7 +7143,7 @@
 set dummy perl; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PERL+set}" = set; then :
+if ${ac_cv_path_PERL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PERL in
@@ -7188,7 +7200,7 @@
 set dummy ${ac_tool_prefix}ar; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_AR+set}" = set; then :
+if ${ac_cv_prog_AR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$AR"; then
@@ -7228,7 +7240,7 @@
 set dummy ar; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ac_ct_AR+set}" = set; then :
+if ${ac_cv_prog_ac_ct_AR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ac_ct_AR"; then
@@ -7278,7 +7290,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker used by compiler is GNU ld" >&5
 $as_echo_n "checking if the linker used by compiler is GNU ld... " >&6; }
-if test "${ac_cv_prog_gnu_ld+set}" = set; then :
+if ${ac_cv_prog_gnu_ld+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   # I'd rather use --version here, but apparently some GNU ld's only accept -v.
@@ -7342,7 +7354,7 @@
 fi
 set dummy $CC; ac_cc=`$as_echo "$2" |
 		      sed 's/[^a-zA-Z0-9_]/_/g;s/^[0-9]/_/'`
-if { as_var=ac_cv_prog_cc_${ac_cc}_c_o; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_prog_cc_${ac_cc}_c_o+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -7453,7 +7465,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands -Werror" >&5
 $as_echo_n "checking that the C compiler understands -Werror... " >&6; }
-if test "${samba_cv_HAVE_Werror+set}" = set; then :
+if ${samba_cv_HAVE_Werror+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -7505,7 +7517,7 @@
 else
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands -w2" >&5
 $as_echo_n "checking that the C compiler understands -w2... " >&6; }
-if test "${samba_cv_HAVE_w2+set}" = set; then :
+if ${samba_cv_HAVE_w2+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -7557,7 +7569,7 @@
 else
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands -errwarn" >&5
 $as_echo_n "checking that the C compiler understands -errwarn... " >&6; }
-if test "${samba_cv_HAVE_errwarn+set}" = set; then :
+if ${samba_cv_HAVE_errwarn+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -7609,7 +7621,7 @@
 else
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands -qhalt" >&5
 $as_echo_n "checking that the C compiler understands -qhalt... " >&6; }
-if test "${samba_cv_HAVE_qhalt+set}" = set; then :
+if ${samba_cv_HAVE_qhalt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -7670,15 +7682,15 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands negative enum values" >&5
 $as_echo_n "checking that the C compiler understands negative enum values... " >&6; }
-if test "${samba_cv_CC_NEGATIVE_ENUM_VALUES+set}" = set; then :
+if ${samba_cv_CC_NEGATIVE_ENUM_VALUES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -7870,7 +7882,7 @@
 else
     CFLAGS="$saved_CFLAGS"
     saved_CFLAGS=""
-    as_fn_error "c99 structure initializer are not supported" "$LINENO" 5
+    as_fn_error $? "c99 structure initializer are not supported" "$LINENO" 5
 fi
 
 
@@ -8285,7 +8297,7 @@
 	fi
 done
 if test x"$libreplacedir" = "x"; then
-	as_fn_error "cannot find libreplace in $libreplacepaths" "$LINENO" 5
+	as_fn_error $? "cannot find libreplace in $libreplacepaths" "$LINENO" 5
 fi
 
 LIBREPLACEOBJ="$libreplacedir/replace.o"
@@ -8295,7 +8307,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
 $as_echo_n "checking return type of signal handlers... " >&6; }
-if test "${ac_cv_type_signal+set}" = set; then :
+if ${ac_cv_type_signal+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8328,7 +8340,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uid_t in sys/types.h" >&5
 $as_echo_n "checking for uid_t in sys/types.h... " >&6; }
-if test "${ac_cv_type_uid_t+set}" = set; then :
+if ${ac_cv_type_uid_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -8357,7 +8369,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "mode_t" "ac_cv_type_mode_t" "$ac_includes_default"
-if test "x$ac_cv_type_mode_t" = x""yes; then :
+if test "x$ac_cv_type_mode_t" = xyes; then :
 
 else
 
@@ -8368,7 +8380,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "off_t" "ac_cv_type_off_t" "$ac_includes_default"
-if test "x$ac_cv_type_off_t" = x""yes; then :
+if test "x$ac_cv_type_off_t" = xyes; then :
 
 else
 
@@ -8379,7 +8391,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = x""yes; then :
+if test "x$ac_cv_type_size_t" = xyes; then :
 
 else
 
@@ -8390,7 +8402,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "pid_t" "ac_cv_type_pid_t" "$ac_includes_default"
-if test "x$ac_cv_type_pid_t" = x""yes; then :
+if test "x$ac_cv_type_pid_t" = xyes; then :
 
 else
 
@@ -8401,7 +8413,7 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_rdev" "ac_cv_member_struct_stat_st_rdev" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_rdev" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_rdev" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_RDEV 1
@@ -8414,7 +8426,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "ino_t" "ac_cv_type_ino_t" "$ac_includes_default"
-if test "x$ac_cv_type_ino_t" = x""yes; then :
+if test "x$ac_cv_type_ino_t" = xyes; then :
 
 else
 
@@ -8425,7 +8437,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "loff_t" "ac_cv_type_loff_t" "$ac_includes_default"
-if test "x$ac_cv_type_loff_t" = x""yes; then :
+if test "x$ac_cv_type_loff_t" = xyes; then :
 
 else
 
@@ -8436,7 +8448,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "offset_t" "ac_cv_type_offset_t" "$ac_includes_default"
-if test "x$ac_cv_type_offset_t" = x""yes; then :
+if test "x$ac_cv_type_offset_t" = xyes; then :
 
 else
 
@@ -8449,7 +8461,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working memcmp" >&5
 $as_echo_n "checking for working memcmp... " >&6; }
-if test "${ac_cv_func_memcmp_working+set}" = set; then :
+if ${ac_cv_func_memcmp_working+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -8514,8 +8526,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8528,8 +8539,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8542,8 +8552,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8554,7 +8563,7 @@
 
 
 ac_fn_c_check_header_mongrel "$LINENO" "stdint.h" "ac_cv_header_stdint_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdint_h" = x""yes; then :
+if test "x$ac_cv_header_stdint_h" = xyes; then :
    ac_config_commands="$ac_config_commands rm-stdint.h"
 
 else
@@ -8566,7 +8575,7 @@
 
 
 ac_fn_c_check_header_mongrel "$LINENO" "stdbool.h" "ac_cv_header_stdbool_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdbool_h" = x""yes; then :
+if test "x$ac_cv_header_stdbool_h" = xyes; then :
    ac_config_commands="$ac_config_commands rm-stdbool.h"
 
 else
@@ -8585,7 +8594,7 @@
 #endif
 
 "
-if test "x$ac_cv_type_bool" = x""yes; then :
+if test "x$ac_cv_type_bool" = xyes; then :
 
 $as_echo "#define HAVE_BOOL 1" >>confdefs.h
 
@@ -8599,7 +8608,7 @@
 #endif
 
 "
-if test "x$ac_cv_type__Bool" = x""yes; then :
+if test "x$ac_cv_type__Bool" = xyes; then :
 
 $as_echo "#define HAVE__Bool 1" >>confdefs.h
 
@@ -8608,7 +8617,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working mmap" >&5
 $as_echo_n "checking for working mmap... " >&6; }
-if test "${libreplace_cv_HAVE_MMAP+set}" = set; then :
+if ${libreplace_cv_HAVE_MMAP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -8642,8 +8651,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8656,8 +8664,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8670,8 +8677,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8684,8 +8690,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8697,7 +8702,7 @@
 for ac_header in stropts.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "stropts.h" "ac_cv_header_stropts_h" "$ac_includes_default"
-if test "x$ac_cv_header_stropts_h" = x""yes; then :
+if test "x$ac_cv_header_stropts_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STROPTS_H 1
 _ACEOF
@@ -8709,7 +8714,7 @@
 for ac_header in unix.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "unix.h" "ac_cv_header_unix_h" "$ac_includes_default"
-if test "x$ac_cv_header_unix_h" = x""yes; then :
+if test "x$ac_cv_header_unix_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_UNIX_H 1
 _ACEOF
@@ -8723,8 +8728,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8736,8 +8740,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8749,8 +8752,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8762,8 +8764,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8775,8 +8776,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8787,7 +8787,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setresuid declaration" >&5
 $as_echo_n "checking for setresuid declaration... " >&6; }
-if test "${ac_cv_have_setresuid_decl+set}" = set; then :
+if ${ac_cv_have_setresuid_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -8820,7 +8820,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setresgid declaration" >&5
 $as_echo_n "checking for setresgid declaration... " >&6; }
-if test "${ac_cv_have_setresgid_decl+set}" = set; then :
+if ${ac_cv_have_setresgid_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -8853,7 +8853,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for errno declaration" >&5
 $as_echo_n "checking for errno declaration... " >&6; }
-if test "${ac_cv_have_errno_decl+set}" = set; then :
+if ${ac_cv_have_errno_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -8886,7 +8886,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for secure mkstemp" >&5
 $as_echo_n "checking for secure mkstemp... " >&6; }
-if test "${libreplace_cv_HAVE_SECURE_MKSTEMP+set}" = set; then :
+if ${libreplace_cv_HAVE_SECURE_MKSTEMP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -8932,8 +8932,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -8943,7 +8942,7 @@
 done
 
 ac_fn_c_check_decl "$LINENO" "snprintf" "ac_cv_have_decl_snprintf" "$ac_includes_default"
-if test "x$ac_cv_have_decl_snprintf" = x""yes; then :
+if test "x$ac_cv_have_decl_snprintf" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -8953,7 +8952,7 @@
 #define HAVE_DECL_SNPRINTF $ac_have_decl
 _ACEOF
 ac_fn_c_check_decl "$LINENO" "vsnprintf" "ac_cv_have_decl_vsnprintf" "$ac_includes_default"
-if test "x$ac_cv_have_decl_vsnprintf" = x""yes; then :
+if test "x$ac_cv_have_decl_vsnprintf" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -8963,7 +8962,7 @@
 #define HAVE_DECL_VSNPRINTF $ac_have_decl
 _ACEOF
 ac_fn_c_check_decl "$LINENO" "asprintf" "ac_cv_have_decl_asprintf" "$ac_includes_default"
-if test "x$ac_cv_have_decl_asprintf" = x""yes; then :
+if test "x$ac_cv_have_decl_asprintf" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -8973,7 +8972,7 @@
 #define HAVE_DECL_ASPRINTF $ac_have_decl
 _ACEOF
 ac_fn_c_check_decl "$LINENO" "vasprintf" "ac_cv_have_decl_vasprintf" "$ac_includes_default"
-if test "x$ac_cv_have_decl_vasprintf" = x""yes; then :
+if test "x$ac_cv_have_decl_vasprintf" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -8987,8 +8986,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -8999,7 +8997,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C99 vsnprintf" >&5
 $as_echo_n "checking for C99 vsnprintf... " >&6; }
-if test "${libreplace_cv_HAVE_C99_VSNPRINTF+set}" = set; then :
+if ${libreplace_cv_HAVE_C99_VSNPRINTF+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9063,7 +9061,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for va_copy" >&5
 $as_echo_n "checking for va_copy... " >&6; }
-if test "${libreplace_cv_HAVE_VA_COPY+set}" = set; then :
+if ${libreplace_cv_HAVE_VA_COPY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9098,7 +9096,7 @@
 if test x"$libreplace_cv_HAVE_VA_COPY" != x"yes"; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __va_copy" >&5
 $as_echo_n "checking for __va_copy... " >&6; }
-if test "${libreplace_cv_HAVE___VA_COPY+set}" = set; then :
+if ${libreplace_cv_HAVE___VA_COPY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9133,7 +9131,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __FUNCTION__ macro" >&5
 $as_echo_n "checking for __FUNCTION__ macro... " >&6; }
-if test "${libreplace_cv_HAVE_FUNCTION_MACRO+set}" = set; then :
+if ${libreplace_cv_HAVE_FUNCTION_MACRO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9164,7 +9162,7 @@
 else
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __func__ macro" >&5
 $as_echo_n "checking for __func__ macro... " >&6; }
-if test "${libreplace_cv_HAVE_func_MACRO+set}" = set; then :
+if ${libreplace_cv_HAVE_func_MACRO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9199,8 +9197,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -9211,7 +9208,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "comparison_fn_t" "ac_cv_type_comparison_fn_t" "$ac_includes_default"
-if test "x$ac_cv_type_comparison_fn_t" = x""yes; then :
+if test "x$ac_cv_type_comparison_fn_t" = xyes; then :
 
 $as_echo "#define HAVE_COMPARISON_FN_T 1" >>confdefs.h
 
@@ -9221,7 +9218,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setenv declaration" >&5
 $as_echo_n "checking for setenv declaration... " >&6; }
-if test "${ac_cv_have_setenv_decl+set}" = set; then :
+if ${ac_cv_have_setenv_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9255,8 +9252,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -9267,7 +9263,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for environ declaration" >&5
 $as_echo_n "checking for environ declaration... " >&6; }
-if test "${ac_cv_have_environ_decl+set}" = set; then :
+if ${ac_cv_have_environ_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9301,7 +9297,7 @@
 for ac_func in strnlen
 do :
   ac_fn_c_check_func "$LINENO" "strnlen" "ac_cv_func_strnlen"
-if test "x$ac_cv_func_strnlen" = x""yes; then :
+if test "x$ac_cv_func_strnlen" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STRNLEN 1
 _ACEOF
@@ -9313,8 +9309,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -9336,12 +9331,12 @@
 $as_echo "#define HAVE__VA_ARGS__MACRO 1" >>confdefs.h
 
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sig_atomic_t type" >&5
 $as_echo_n "checking for sig_atomic_t type... " >&6; }
-if test "${libreplace_cv_sig_atomic_t+set}" = set; then :
+if ${libreplace_cv_sig_atomic_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9380,7 +9375,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for O_DIRECT flag to open(2)" >&5
 $as_echo_n "checking for O_DIRECT flag to open(2)... " >&6; }
-if test "${libreplace_cv_HAVE_OPEN_O_DIRECT+set}" = set; then :
+if ${libreplace_cv_HAVE_OPEN_O_DIRECT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9417,7 +9412,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that the C compiler understands volatile" >&5
 $as_echo_n "checking that the C compiler understands volatile... " >&6; }
-if test "${libreplace_cv_volatile+set}" = set; then :
+if ${libreplace_cv_volatile+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9453,7 +9448,7 @@
   as_ac_Header=`$as_echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_hdr that defines DIR" >&5
 $as_echo_n "checking for $ac_hdr that defines DIR... " >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Header+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9480,8 +9475,7 @@
 eval ac_res=\$$as_ac_Header
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
 _ACEOF
@@ -9494,7 +9488,7 @@
 if test $ac_header_dirent = dirent.h; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing opendir" >&5
 $as_echo_n "checking for library containing opendir... " >&6; }
-if test "${ac_cv_search_opendir+set}" = set; then :
+if ${ac_cv_search_opendir+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -9528,11 +9522,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_opendir+set}" = set; then :
+  if ${ac_cv_search_opendir+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_opendir+set}" = set; then :
+if ${ac_cv_search_opendir+:} false; then :
 
 else
   ac_cv_search_opendir=no
@@ -9551,7 +9545,7 @@
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing opendir" >&5
 $as_echo_n "checking for library containing opendir... " >&6; }
-if test "${ac_cv_search_opendir+set}" = set; then :
+if ${ac_cv_search_opendir+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -9585,11 +9579,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_opendir+set}" = set; then :
+  if ${ac_cv_search_opendir+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_opendir+set}" = set; then :
+if ${ac_cv_search_opendir+:} false; then :
 
 else
   ac_cv_search_opendir=no
@@ -9611,8 +9605,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -9625,8 +9618,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -9640,7 +9632,7 @@
 for ac_header in sys/select.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/select.h" "ac_cv_header_sys_select_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_select_h" = x""yes; then :
+if test "x$ac_cv_header_sys_select_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_SELECT_H 1
 _ACEOF
@@ -9655,8 +9647,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -9667,7 +9658,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether time.h and sys/time.h may both be included" >&5
 $as_echo_n "checking whether time.h and sys/time.h may both be included... " >&6; }
-if test "${ac_cv_header_time+set}" = set; then :
+if ${ac_cv_header_time+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9704,8 +9695,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -9717,7 +9707,7 @@
 # wait
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sys/wait.h that is POSIX.1 compatible" >&5
 $as_echo_n "checking for sys/wait.h that is POSIX.1 compatible... " >&6; }
-if test "${ac_cv_header_sys_wait_h+set}" = set; then :
+if ${ac_cv_header_sys_wait_h+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9761,7 +9751,7 @@
 for ac_header in sys/capability.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/capability.h" "ac_cv_header_sys_capability_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_capability_h" = x""yes; then :
+if test "x$ac_cv_header_sys_capability_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_CAPABILITY_H 1
 _ACEOF
@@ -9775,7 +9765,7 @@
 *linux*)
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken RedHat 7.2 system header files" >&5
 $as_echo_n "checking for broken RedHat 7.2 system header files... " >&6; }
-if test "${libreplace_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS+set}" = set; then :
+if ${libreplace_cv_BROKEN_REDHAT_7_SYSTEM_HEADERS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9817,7 +9807,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken RHEL5 sys/capability.h" >&5
 $as_echo_n "checking for broken RHEL5 sys/capability.h... " >&6; }
-if test "${libreplace_cv_BROKEN_RHEL5_SYS_CAP_HEADER+set}" = set; then :
+if ${libreplace_cv_BROKEN_RHEL5_SYS_CAP_HEADER+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9862,8 +9852,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -9876,8 +9865,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -9888,7 +9876,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getpwent_r declaration" >&5
 $as_echo_n "checking for getpwent_r declaration... " >&6; }
-if test "${ac_cv_have_getpwent_r_decl+set}" = set; then :
+if ${ac_cv_have_getpwent_r_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -9923,7 +9911,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)" >&5
 $as_echo_n "checking for prototype struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)... " >&6; }
-if test "${ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__int_buflen_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9947,19 +9935,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__int_buflen_=yes
+		`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__int_buflen_=no
+		`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__int_buflen_" >&5
-$as_echo "$ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__int_buflen_" >&6; }
-if test $ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__int_buflen_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, int buflen)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define SOLARIS_GETPWENT_R 1" >>confdefs.h
@@ -9969,7 +9958,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)" >&5
 $as_echo_n "checking for prototype struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)... " >&6; }
-if test "${ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__size_t_buflen_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -9993,19 +9982,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__size_t_buflen_=yes
+		`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__size_t_buflen_=no
+		`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__size_t_buflen_" >&5
-$as_echo "$ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__size_t_buflen_" >&6; }
-if test $ac_cv_c_prototype_struct_passwd_pgetpwent_r_struct_passwd_psrc__char_pbuf__size_t_buflen_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_struct passwd *getpwent_r(struct passwd *src, char *buf, size_t buflen)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define SOLARIS_GETPWENT_R 1" >>confdefs.h
@@ -10017,8 +10007,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -10029,7 +10018,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getgrent_r declaration" >&5
 $as_echo_n "checking for getgrent_r declaration... " >&6; }
-if test "${ac_cv_have_getgrent_r_decl+set}" = set; then :
+if ${ac_cv_have_getgrent_r_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -10064,7 +10053,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype struct group *getgrent_r(struct group *src, char *buf, int buflen)" >&5
 $as_echo_n "checking for prototype struct group *getgrent_r(struct group *src, char *buf, int buflen)... " >&6; }
-if test "${ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__int_buflen_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, int buflen)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -10088,19 +10077,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__int_buflen_=yes
+		`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, int buflen)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__int_buflen_=no
+		`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, int buflen)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__int_buflen_" >&5
-$as_echo "$ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__int_buflen_" >&6; }
-if test $ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__int_buflen_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, int buflen)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, int buflen)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define SOLARIS_GETGRENT_R 1" >>confdefs.h
@@ -10111,7 +10101,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype struct group *getgrent_r(struct group *src, char *buf, size_t buflen)" >&5
 $as_echo_n "checking for prototype struct group *getgrent_r(struct group *src, char *buf, size_t buflen)... " >&6; }
-if test "${ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__size_t_buflen_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, size_t buflen)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -10135,19 +10125,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__size_t_buflen_=yes
+		`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, size_t buflen)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__size_t_buflen_=no
+		`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, size_t buflen)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__size_t_buflen_" >&5
-$as_echo "$ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__size_t_buflen_" >&6; }
-if test $ac_cv_c_prototype_struct_group_pgetgrent_r_struct_group_psrc__char_pbuf__size_t_buflen_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, size_t buflen)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_struct group *getgrent_r(struct group *src, char *buf, size_t buflen)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define SOLARIS_GETGRENT_R 1" >>confdefs.h
@@ -10158,7 +10149,7 @@
 for ac_func in getgrouplist
 do :
   ac_fn_c_check_func "$LINENO" "getgrouplist" "ac_cv_func_getgrouplist"
-if test "x$ac_cv_func_getgrouplist" = x""yes; then :
+if test "x$ac_cv_func_getgrouplist" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETGROUPLIST 1
 _ACEOF
@@ -10172,8 +10163,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -10187,7 +10177,7 @@
 for ac_header in fnmatch.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "fnmatch.h" "ac_cv_header_fnmatch_h" "$ac_includes_default"
-if test "x$ac_cv_header_fnmatch_h" = x""yes; then :
+if test "x$ac_cv_header_fnmatch_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_FNMATCH_H 1
 _ACEOF
@@ -10202,8 +10192,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -10218,8 +10207,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -10236,7 +10224,7 @@
 libreplace_cv_dlfcn=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing dlopen" >&5
 $as_echo_n "checking for library containing dlopen... " >&6; }
-if test "${ac_cv_search_dlopen+set}" = set; then :
+if ${ac_cv_search_dlopen+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -10270,11 +10258,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_dlopen+set}" = set; then :
+  if ${ac_cv_search_dlopen+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_dlopen+set}" = set; then :
+if ${ac_cv_search_dlopen+:} false; then :
 
 else
   ac_cv_search_dlopen=no
@@ -10294,7 +10282,7 @@
 for ac_header in dlfcn.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default"
-if test "x$ac_cv_header_dlfcn_h" = x""yes; then :
+if test "x$ac_cv_header_dlfcn_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DLFCN_H 1
 _ACEOF
@@ -10307,8 +10295,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -10322,7 +10309,7 @@
 libreplace_cv_shl=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing shl_load" >&5
 $as_echo_n "checking for library containing shl_load... " >&6; }
-if test "${ac_cv_search_shl_load+set}" = set; then :
+if ${ac_cv_search_shl_load+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -10356,11 +10343,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_shl_load+set}" = set; then :
+  if ${ac_cv_search_shl_load+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_shl_load+set}" = set; then :
+if ${ac_cv_search_shl_load+:} false; then :
 
 else
   ac_cv_search_shl_load=no
@@ -10379,7 +10366,7 @@
 for ac_header in dl.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "dl.h" "ac_cv_header_dl_h" "$ac_includes_default"
-if test "x$ac_cv_header_dl_h" = x""yes; then :
+if test "x$ac_cv_header_dl_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DL_H 1
 _ACEOF
@@ -10392,8 +10379,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -10406,7 +10392,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype void *dlopen(const char* filename, unsigned int flags)" >&5
 $as_echo_n "checking for prototype void *dlopen(const char* filename, unsigned int flags)... " >&6; }
-if test "${ac_cv_c_prototype_void_pdlopen_const_charp_filename__unsigned_int_flags_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_void *dlopen(const char* filename, unsigned int flags)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -10426,19 +10412,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_void_pdlopen_const_charp_filename__unsigned_int_flags_=yes
+		`$as_echo "ac_cv_c_prototype_void *dlopen(const char* filename, unsigned int flags)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_void_pdlopen_const_charp_filename__unsigned_int_flags_=no
+		`$as_echo "ac_cv_c_prototype_void *dlopen(const char* filename, unsigned int flags)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_void_pdlopen_const_charp_filename__unsigned_int_flags_" >&5
-$as_echo "$ac_cv_c_prototype_void_pdlopen_const_charp_filename__unsigned_int_flags_" >&6; }
-if test $ac_cv_c_prototype_void_pdlopen_const_charp_filename__unsigned_int_flags_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_void *dlopen(const char* filename, unsigned int flags)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_void *dlopen(const char* filename, unsigned int flags)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define DLOPEN_TAKES_UNSIGNED_FLAGS 1" >>confdefs.h
@@ -10456,12 +10443,12 @@
 LIBS="$save_LIBS"
 
 ac_fn_c_check_func "$LINENO" "getpass" "ac_cv_func_getpass"
-if test "x$ac_cv_func_getpass" = x""yes; then :
+if test "x$ac_cv_func_getpass" = xyes; then :
   libreplace_cv_HAVE_GETPASS=yes
 fi
 
 ac_fn_c_check_func "$LINENO" "getpassphrase" "ac_cv_func_getpassphrase"
-if test "x$ac_cv_func_getpassphrase" = x""yes; then :
+if test "x$ac_cv_func_getpassphrase" = xyes; then :
   libreplace_cv_HAVE_GETPASSPHRASE=yes
 fi
 
@@ -10477,7 +10464,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether getpass should be replaced" >&5
 $as_echo_n "checking whether getpass should be replaced... " >&6; }
-if test "${libreplace_cv_REPLACE_GETPASS+set}" = set; then :
+if ${libreplace_cv_REPLACE_GETPASS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -10520,7 +10507,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether strptime is available and works" >&5
 $as_echo_n "checking whether strptime is available and works... " >&6; }
-if test "${libreplace_cv_STRPTIME_OK+set}" = set; then :
+if ${libreplace_cv_STRPTIME_OK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -10558,8 +10545,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -10573,7 +10559,7 @@
 # Check for mkdir mode
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether mkdir supports mode" >&5
 $as_echo_n "checking whether mkdir supports mode... " >&6; }
-if test "${libreplace_cv_mkdir_has_mode+set}" = set; then :
+if ${libreplace_cv_mkdir_has_mode+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -10614,7 +10600,7 @@
 for ac_func in timegm
 do :
   ac_fn_c_check_func "$LINENO" "timegm" "ac_cv_func_timegm"
-if test "x$ac_cv_func_timegm" = x""yes; then :
+if test "x$ac_cv_func_timegm" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_TIMEGM 1
 _ACEOF
@@ -10627,7 +10613,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken readdir" >&5
 $as_echo_n "checking for broken readdir... " >&6; }
-if test "${libreplace_cv_READDIR_NEEDED+set}" = set; then :
+if ${libreplace_cv_READDIR_NEEDED+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -10657,7 +10643,7 @@
 for ac_func in dirfd
 do :
   ac_fn_c_check_func "$LINENO" "dirfd" "ac_cv_func_dirfd"
-if test "x$ac_cv_func_dirfd" = x""yes; then :
+if test "x$ac_cv_func_dirfd" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DIRFD 1
 _ACEOF
@@ -10668,7 +10654,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dirfd declaration" >&5
 $as_echo_n "checking for dirfd declaration... " >&6; }
-if test "${ac_cv_have_dirfd_decl+set}" = set; then :
+if ${ac_cv_have_dirfd_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -10706,7 +10692,7 @@
 for ac_func in getdirentries
 do :
   ac_fn_c_check_func "$LINENO" "getdirentries" "ac_cv_func_getdirentries"
-if test "x$ac_cv_func_getdirentries" = x""yes; then :
+if test "x$ac_cv_func_getdirentries" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETDIRENTRIES 1
 _ACEOF
@@ -10716,7 +10702,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype long telldir(const DIR *dir)" >&5
 $as_echo_n "checking for prototype long telldir(const DIR *dir)... " >&6; }
-if test "${ac_cv_c_prototype_long_telldir_const_DIR_pdir_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_long telldir(const DIR *dir)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -10736,19 +10722,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_long_telldir_const_DIR_pdir_=yes
+		`$as_echo "ac_cv_c_prototype_long telldir(const DIR *dir)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_long_telldir_const_DIR_pdir_=no
+		`$as_echo "ac_cv_c_prototype_long telldir(const DIR *dir)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_long_telldir_const_DIR_pdir_" >&5
-$as_echo "$ac_cv_c_prototype_long_telldir_const_DIR_pdir_" >&6; }
-if test $ac_cv_c_prototype_long_telldir_const_DIR_pdir_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_long telldir(const DIR *dir)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_long telldir(const DIR *dir)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define TELLDIR_TAKES_CONST_DIR 1" >>confdefs.h
@@ -10759,7 +10746,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for prototype int seekdir(DIR *dir, long ofs)" >&5
 $as_echo_n "checking for prototype int seekdir(DIR *dir, long ofs)... " >&6; }
-if test "${ac_cv_c_prototype_int_seekdir_DIR_pdir__long_ofs_+set}" = set; then :
+if { as_var=`$as_echo "ac_cv_c_prototype_int seekdir(DIR *dir, long ofs)" | $as_tr_sh`; eval \${$as_var+:} false; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -10779,19 +10766,20 @@
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
-		ac_cv_c_prototype_int_seekdir_DIR_pdir__long_ofs_=yes
+		`$as_echo "ac_cv_c_prototype_int seekdir(DIR *dir, long ofs)" | $as_tr_sh`=yes
 
 else
 
-		ac_cv_c_prototype_int_seekdir_DIR_pdir__long_ofs_=no
+		`$as_echo "ac_cv_c_prototype_int seekdir(DIR *dir, long ofs)" | $as_tr_sh`=no
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_prototype_int_seekdir_DIR_pdir__long_ofs_" >&5
-$as_echo "$ac_cv_c_prototype_int_seekdir_DIR_pdir__long_ofs_" >&6; }
-if test $ac_cv_c_prototype_int_seekdir_DIR_pdir__long_ofs_ = yes; then :
+eval ac_res=\$`$as_echo "ac_cv_c_prototype_int seekdir(DIR *dir, long ofs)" | $as_tr_sh`
+	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+$as_echo "$ac_res" >&6; }
+if test $`$as_echo "ac_cv_c_prototype_int seekdir(DIR *dir, long ofs)" | $as_tr_sh` = yes; then :
 
 
 $as_echo "#define SEEKDIR_RETURNS_INT 1" >>confdefs.h
@@ -10801,15 +10789,15 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for replacing readdir using getdirentries()" >&5
 $as_echo_n "checking for replacing readdir using getdirentries()... " >&6; }
-if test "${libreplace_cv_READDIR_GETDIRENTRIES+set}" = set; then :
+if ${libreplace_cv_READDIR_GETDIRENTRIES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
 	if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -10851,7 +10839,7 @@
 for ac_func in getdents
 do :
   ac_fn_c_check_func "$LINENO" "getdents" "ac_cv_func_getdents"
-if test "x$ac_cv_func_getdents" = x""yes; then :
+if test "x$ac_cv_func_getdents" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETDENTS 1
 _ACEOF
@@ -10861,15 +10849,15 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for replacing readdir using getdents()" >&5
 $as_echo_n "checking for replacing readdir using getdents()... " >&6; }
-if test "${libreplace_cv_READDIR_GETDENTS+set}" = set; then :
+if ${libreplace_cv_READDIR_GETDENTS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
 	if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -10922,7 +10910,7 @@
 for ac_header in crypt.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "crypt.h" "ac_cv_header_crypt_h" "$ac_includes_default"
-if test "x$ac_cv_header_crypt_h" = x""yes; then :
+if test "x$ac_cv_header_crypt_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_CRYPT_H 1
 _ACEOF
@@ -10933,7 +10921,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing crypt" >&5
 $as_echo_n "checking for library containing crypt... " >&6; }
-if test "${ac_cv_search_ext_crypt+set}" = set; then :
+if ${ac_cv_search_ext_crypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -11009,14 +10997,13 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
-  as_fn_error "Required function not found" "$LINENO" 5
+  as_fn_error $? "Required function not found" "$LINENO" 5
 fi
 done
 
@@ -11026,13 +11013,13 @@
 for ac_func in syslog
 do :
   ac_fn_c_check_func "$LINENO" "syslog" "ac_cv_func_syslog"
-if test "x$ac_cv_func_syslog" = x""yes; then :
+if test "x$ac_cv_func_syslog" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYSLOG 1
 _ACEOF
 
 else
-  as_fn_error "Required function not found" "$LINENO" 5
+  as_fn_error $? "Required function not found" "$LINENO" 5
 fi
 done
 
@@ -11049,8 +11036,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -11062,7 +11048,7 @@
 for ac_header in netinet/in_systm.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "netinet/in_systm.h" "ac_cv_header_netinet_in_systm_h" "$ac_includes_default"
-if test "x$ac_cv_header_netinet_in_systm_h" = x""yes; then :
+if test "x$ac_cv_header_netinet_in_systm_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_NETINET_IN_SYSTM_H 1
 _ACEOF
@@ -11083,7 +11069,7 @@
 	#endif
 
 "
-if test "x$ac_cv_header_netinet_ip_h" = x""yes; then :
+if test "x$ac_cv_header_netinet_ip_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_NETINET_IP_H 1
 _ACEOF
@@ -11096,8 +11082,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -11110,8 +11095,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -11123,7 +11107,7 @@
 for ac_header in sys/uio.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/uio.h" "ac_cv_header_sys_uio_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_uio_h" = x""yes; then :
+if test "x$ac_cv_header_sys_uio_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_UIO_H 1
 _ACEOF
@@ -11135,7 +11119,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for usable net/if.h" >&5
 $as_echo_n "checking for usable net/if.h... " >&6; }
-if test "${libreplace_cv_USABLE_NET_IF_H+set}" = set; then :
+if ${libreplace_cv_USABLE_NET_IF_H+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -11171,7 +11155,7 @@
 cv=`echo "socklen_t" | sed 'y%./+- %__p__%'`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for socklen_t" >&5
 $as_echo_n "checking for socklen_t... " >&6; }
-if { as_var=ac_cv_type_$cv; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_type_$cv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11201,7 +11185,7 @@
   ac_tr_hdr=HAVE_`echo socklen_t | sed 'y%abcdefghijklmnopqrstuvwxyz./- %ABCDEFGHIJKLMNOPQRSTUVWXYZ____%'`
 if false; then
 	ac_fn_c_check_type "$LINENO" "socklen_t" "ac_cv_type_socklen_t" "$ac_includes_default"
-if test "x$ac_cv_type_socklen_t" = x""yes; then :
+if test "x$ac_cv_type_socklen_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_SOCKLEN_T 1
@@ -11223,7 +11207,7 @@
 cv=`echo "sa_family_t" | sed 'y%./+- %__p__%'`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sa_family_t" >&5
 $as_echo_n "checking for sa_family_t... " >&6; }
-if { as_var=ac_cv_type_$cv; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_type_$cv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11253,7 +11237,7 @@
   ac_tr_hdr=HAVE_`echo sa_family_t | sed 'y%abcdefghijklmnopqrstuvwxyz./- %ABCDEFGHIJKLMNOPQRSTUVWXYZ____%'`
 if false; then
 	ac_fn_c_check_type "$LINENO" "sa_family_t" "ac_cv_type_sa_family_t" "$ac_includes_default"
-if test "x$ac_cv_type_sa_family_t" = x""yes; then :
+if test "x$ac_cv_type_sa_family_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_SA_FAMILY_T 1
@@ -11275,7 +11259,7 @@
 cv=`echo "struct addrinfo" | sed 'y%./+- %__p__%'`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct addrinfo" >&5
 $as_echo_n "checking for struct addrinfo... " >&6; }
-if { as_var=ac_cv_type_$cv; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_type_$cv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11305,7 +11289,7 @@
   ac_tr_hdr=HAVE_`echo struct addrinfo | sed 'y%abcdefghijklmnopqrstuvwxyz./- %ABCDEFGHIJKLMNOPQRSTUVWXYZ____%'`
 if false; then
 	ac_fn_c_check_type "$LINENO" "struct addrinfo" "ac_cv_type_struct_addrinfo" "$ac_includes_default"
-if test "x$ac_cv_type_struct_addrinfo" = x""yes; then :
+if test "x$ac_cv_type_struct_addrinfo" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_ADDRINFO 1
@@ -11327,7 +11311,7 @@
 cv=`echo "struct sockaddr" | sed 'y%./+- %__p__%'`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct sockaddr" >&5
 $as_echo_n "checking for struct sockaddr... " >&6; }
-if { as_var=ac_cv_type_$cv; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_type_$cv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11357,7 +11341,7 @@
   ac_tr_hdr=HAVE_`echo struct sockaddr | sed 'y%abcdefghijklmnopqrstuvwxyz./- %ABCDEFGHIJKLMNOPQRSTUVWXYZ____%'`
 if false; then
 	ac_fn_c_check_type "$LINENO" "struct sockaddr" "ac_cv_type_struct_sockaddr" "$ac_includes_default"
-if test "x$ac_cv_type_struct_sockaddr" = x""yes; then :
+if test "x$ac_cv_type_struct_sockaddr" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SOCKADDR 1
@@ -11379,7 +11363,7 @@
 cv=`echo "struct sockaddr_storage" | sed 'y%./+- %__p__%'`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct sockaddr_storage" >&5
 $as_echo_n "checking for struct sockaddr_storage... " >&6; }
-if { as_var=ac_cv_type_$cv; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_type_$cv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11413,7 +11397,7 @@
   ac_tr_hdr=HAVE_`echo struct sockaddr_storage | sed 'y%abcdefghijklmnopqrstuvwxyz./- %ABCDEFGHIJKLMNOPQRSTUVWXYZ____%'`
 if false; then
 	ac_fn_c_check_type "$LINENO" "struct sockaddr_storage" "ac_cv_type_struct_sockaddr_storage" "$ac_includes_default"
-if test "x$ac_cv_type_struct_sockaddr_storage" = x""yes; then :
+if test "x$ac_cv_type_struct_sockaddr_storage" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SOCKADDR_STORAGE 1
@@ -11435,7 +11419,7 @@
 cv=`echo "struct sockaddr_in6" | sed 'y%./+- %__p__%'`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct sockaddr_in6" >&5
 $as_echo_n "checking for struct sockaddr_in6... " >&6; }
-if { as_var=ac_cv_type_$cv; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${ac_cv_type_$cv+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11469,7 +11453,7 @@
   ac_tr_hdr=HAVE_`echo struct sockaddr_in6 | sed 'y%abcdefghijklmnopqrstuvwxyz./- %ABCDEFGHIJKLMNOPQRSTUVWXYZ____%'`
 if false; then
 	ac_fn_c_check_type "$LINENO" "struct sockaddr_in6" "ac_cv_type_struct_sockaddr_in6" "$ac_includes_default"
-if test "x$ac_cv_type_struct_sockaddr_in6" = x""yes; then :
+if test "x$ac_cv_type_struct_sockaddr_in6" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SOCKADDR_IN6 1
@@ -11494,7 +11478,7 @@
 #include <netinet/in.h>
 
 "
-if test "x$ac_cv_member_struct_sockaddr_storage_ss_family" = x""yes; then :
+if test "x$ac_cv_member_struct_sockaddr_storage_ss_family" = xyes; then :
 
 $as_echo "#define HAVE_SS_FAMILY 1" >>confdefs.h
 
@@ -11508,7 +11492,7 @@
 #include <netinet/in.h>
 
 "
-if test "x$ac_cv_member_struct_sockaddr_storage___ss_family" = x""yes; then :
+if test "x$ac_cv_member_struct_sockaddr_storage___ss_family" = xyes; then :
 
 $as_echo "#define HAVE___SS_FAMILY 1" >>confdefs.h
 
@@ -11519,7 +11503,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sin_len in sock" >&5
 $as_echo_n "checking for sin_len in sock... " >&6; }
-if test "${libreplace_cv_HAVE_SOCK_SIN_LEN+set}" = set; then :
+if ${libreplace_cv_HAVE_SOCK_SIN_LEN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -11564,7 +11548,7 @@
 # check for unix domain sockets
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for unix domain sockets" >&5
 $as_echo_n "checking for unix domain sockets... " >&6; }
-if test "${libreplace_cv_HAVE_UNIXSOCKET+set}" = set; then :
+if ${libreplace_cv_HAVE_UNIXSOCKET+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -11611,7 +11595,7 @@
 for ac_func in connect
 do :
   ac_fn_c_check_func "$LINENO" "connect" "ac_cv_func_connect"
-if test "x$ac_cv_func_connect" = x""yes; then :
+if test "x$ac_cv_func_connect" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_CONNECT 1
 _ACEOF
@@ -11629,7 +11613,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for connect in -lnsl_s" >&5
 $as_echo_n "checking for connect in -lnsl_s... " >&6; }
-if test "${ac_cv_lib_ext_nsl_s_connect+set}" = set; then :
+if ${ac_cv_lib_ext_nsl_s_connect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11695,7 +11679,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for connect in -lnsl" >&5
 $as_echo_n "checking for connect in -lnsl... " >&6; }
-if test "${ac_cv_lib_ext_nsl_connect+set}" = set; then :
+if ${ac_cv_lib_ext_nsl_connect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11761,7 +11745,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for connect in -lsocket" >&5
 $as_echo_n "checking for connect in -lsocket... " >&6; }
-if test "${ac_cv_lib_ext_socket_connect+set}" = set; then :
+if ${ac_cv_lib_ext_socket_connect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11827,7 +11811,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for connect in -linet" >&5
 $as_echo_n "checking for connect in -linet... " >&6; }
-if test "${ac_cv_lib_ext_inet_connect+set}" = set; then :
+if ${ac_cv_lib_ext_inet_connect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11898,7 +11882,7 @@
 for ac_func in gethostbyname
 do :
   ac_fn_c_check_func "$LINENO" "gethostbyname" "ac_cv_func_gethostbyname"
-if test "x$ac_cv_func_gethostbyname" = x""yes; then :
+if test "x$ac_cv_func_gethostbyname" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETHOSTBYNAME 1
 _ACEOF
@@ -11916,7 +11900,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl_s" >&5
 $as_echo_n "checking for gethostbyname in -lnsl_s... " >&6; }
-if test "${ac_cv_lib_ext_nsl_s_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_ext_nsl_s_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -11982,7 +11966,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl" >&5
 $as_echo_n "checking for gethostbyname in -lnsl... " >&6; }
-if test "${ac_cv_lib_ext_nsl_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_ext_nsl_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -12048,7 +12032,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lsocket" >&5
 $as_echo_n "checking for gethostbyname in -lsocket... " >&6; }
-if test "${ac_cv_lib_ext_socket_gethostbyname+set}" = set; then :
+if ${ac_cv_lib_ext_socket_gethostbyname+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -12118,7 +12102,7 @@
 for ac_func in if_nametoindex
 do :
   ac_fn_c_check_func "$LINENO" "if_nametoindex" "ac_cv_func_if_nametoindex"
-if test "x$ac_cv_func_if_nametoindex" = x""yes; then :
+if test "x$ac_cv_func_if_nametoindex" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_IF_NAMETOINDEX 1
 _ACEOF
@@ -12136,7 +12120,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for if_nametoindex in -lipv6" >&5
 $as_echo_n "checking for if_nametoindex in -lipv6... " >&6; }
-if test "${ac_cv_lib_ext_ipv6_if_nametoindex+set}" = set; then :
+if ${ac_cv_lib_ext_ipv6_if_nametoindex+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -12210,7 +12194,7 @@
 for ac_func in socketpair
 do :
   ac_fn_c_check_func "$LINENO" "socketpair" "ac_cv_func_socketpair"
-if test "x$ac_cv_func_socketpair" = x""yes; then :
+if test "x$ac_cv_func_socketpair" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SOCKETPAIR 1
 _ACEOF
@@ -12223,7 +12207,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken inet_ntoa" >&5
 $as_echo_n "checking for broken inet_ntoa... " >&6; }
-if test "${libreplace_cv_REPLACE_INET_NTOA+set}" = set; then :
+if ${libreplace_cv_REPLACE_INET_NTOA+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12261,7 +12245,7 @@
 for ac_func in inet_ntoa
 do :
   ac_fn_c_check_func "$LINENO" "inet_ntoa" "ac_cv_func_inet_ntoa"
-if test "x$ac_cv_func_inet_ntoa" = x""yes; then :
+if test "x$ac_cv_func_inet_ntoa" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_INET_NTOA 1
 _ACEOF
@@ -12281,7 +12265,7 @@
 for ac_func in inet_aton
 do :
   ac_fn_c_check_func "$LINENO" "inet_aton" "ac_cv_func_inet_aton"
-if test "x$ac_cv_func_inet_aton" = x""yes; then :
+if test "x$ac_cv_func_inet_aton" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_INET_ATON 1
 _ACEOF
@@ -12295,7 +12279,7 @@
 for ac_func in inet_ntop
 do :
   ac_fn_c_check_func "$LINENO" "inet_ntop" "ac_cv_func_inet_ntop"
-if test "x$ac_cv_func_inet_ntop" = x""yes; then :
+if test "x$ac_cv_func_inet_ntop" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_INET_NTOP 1
 _ACEOF
@@ -12309,7 +12293,7 @@
 for ac_func in inet_pton
 do :
   ac_fn_c_check_func "$LINENO" "inet_pton" "ac_cv_func_inet_pton"
-if test "x$ac_cv_func_inet_pton" = x""yes; then :
+if test "x$ac_cv_func_inet_pton" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_INET_PTON 1
 _ACEOF
@@ -12322,7 +12306,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getaddrinfo" >&5
 $as_echo_n "checking for getaddrinfo... " >&6; }
-if test "${libreplace_cv_HAVE_GETADDRINFO+set}" = set; then :
+if ${libreplace_cv_HAVE_GETADDRINFO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12386,7 +12370,7 @@
 for ac_header in ifaddrs.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "ifaddrs.h" "ac_cv_header_ifaddrs_h" "$ac_includes_default"
-if test "x$ac_cv_header_ifaddrs_h" = x""yes; then :
+if test "x$ac_cv_header_ifaddrs_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_IFADDRS_H 1
 _ACEOF
@@ -12398,7 +12382,7 @@
 
 ac_fn_c_check_member "$LINENO" "struct sockaddr" "sa_len" "ac_cv_member_struct_sockaddr_sa_len" "#include <sys/socket.h>
 "
-if test "x$ac_cv_member_struct_sockaddr_sa_len" = x""yes; then :
+if test "x$ac_cv_member_struct_sockaddr_sa_len" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SOCKADDR_SA_LEN 1
@@ -12412,7 +12396,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getifaddrs and freeifaddrs" >&5
 $as_echo_n "checking for getifaddrs and freeifaddrs... " >&6; }
-if test "${libreplace_cv_HAVE_GETIFADDRS+set}" = set; then :
+if ${libreplace_cv_HAVE_GETIFADDRS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12468,7 +12452,7 @@
 iface=no;
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iface getifaddrs" >&5
 $as_echo_n "checking for iface getifaddrs... " >&6; }
-if test "${libreplace_cv_HAVE_IFACE_GETIFADDRS+set}" = set; then :
+if ${libreplace_cv_HAVE_IFACE_GETIFADDRS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12513,7 +12497,7 @@
 if test $iface = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iface AIX" >&5
 $as_echo_n "checking for iface AIX... " >&6; }
-if test "${libreplace_cv_HAVE_IFACE_AIX+set}" = set; then :
+if ${libreplace_cv_HAVE_IFACE_AIX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12558,7 +12542,7 @@
 if test $iface = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iface ifconf" >&5
 $as_echo_n "checking for iface ifconf... " >&6; }
-if test "${libreplace_cv_HAVE_IFACE_IFCONF+set}" = set; then :
+if ${libreplace_cv_HAVE_IFACE_IFCONF+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12601,7 +12585,7 @@
 if test $iface = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iface ifreq" >&5
 $as_echo_n "checking for iface ifreq... " >&6; }
-if test "${libreplace_cv_HAVE_IFACE_IFREQ+set}" = set; then :
+if ${libreplace_cv_HAVE_IFACE_IFREQ+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12643,7 +12627,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IPV6_V6ONLY support" >&5
 $as_echo_n "checking for IPV6_V6ONLY support... " >&6; }
-if test "${libreplace_cv_HAVE_IPV6_V6ONLY+set}" = set; then :
+if ${libreplace_cv_HAVE_IPV6_V6ONLY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12685,7 +12669,7 @@
 if test x"$libreplace_cv_HAVE_IPV6_V6ONLY" != x"yes"; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IPV6_V6ONLY in linux/in6.h" >&5
 $as_echo_n "checking for IPV6_V6ONLY in linux/in6.h... " >&6; }
-if test "${libreplace_cv_HAVE_LINUX_IPV6_V6ONLY_26+set}" = set; then :
+if ${libreplace_cv_HAVE_LINUX_IPV6_V6ONLY_26+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12729,7 +12713,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ipv6 support" >&5
 $as_echo_n "checking for ipv6 support... " >&6; }
-if test "${libreplace_cv_HAVE_IPV6+set}" = set; then :
+if ${libreplace_cv_HAVE_IPV6+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -12818,8 +12802,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12832,8 +12815,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12846,8 +12828,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12860,8 +12841,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12874,8 +12854,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12888,8 +12867,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12902,8 +12880,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12916,8 +12893,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12929,7 +12905,7 @@
 for ac_header in sys/sysmacros.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/sysmacros.h" "ac_cv_header_sys_sysmacros_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_sysmacros_h" = x""yes; then :
+if test "x$ac_cv_header_sys_sysmacros_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_SYSMACROS_H 1
 _ACEOF
@@ -12942,8 +12918,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12956,8 +12931,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -12969,7 +12943,7 @@
 for ac_header in xfs/libxfs.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "xfs/libxfs.h" "ac_cv_header_xfs_libxfs_h" "$ac_includes_default"
-if test "x$ac_cv_header_xfs_libxfs_h" = x""yes; then :
+if test "x$ac_cv_header_xfs_libxfs_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_XFS_LIBXFS_H 1
 _ACEOF
@@ -12981,7 +12955,7 @@
 for ac_header in netgroup.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "netgroup.h" "ac_cv_header_netgroup_h" "$ac_includes_default"
-if test "x$ac_cv_header_netgroup_h" = x""yes; then :
+if test "x$ac_cv_header_netgroup_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_NETGROUP_H 1
 _ACEOF
@@ -12999,7 +12973,7 @@
 #endif
 
 "
-if test "x$ac_cv_header_rpcsvc_yp_prot_h" = x""yes; then :
+if test "x$ac_cv_header_rpcsvc_yp_prot_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_RPCSVC_YP_PROT_H 1
 _ACEOF
@@ -13013,7 +12987,7 @@
 for ac_header in sys/mode.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/mode.h" "ac_cv_header_sys_mode_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_mode_h" = x""yes; then :
+if test "x$ac_cv_header_sys_mode_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_MODE_H 1
 _ACEOF
@@ -13029,7 +13003,7 @@
 for ac_header in CoreFoundation/CFStringEncodingConverter.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "CoreFoundation/CFStringEncodingConverter.h" "ac_cv_header_CoreFoundation_CFStringEncodingConverter_h" "$ac_includes_default"
-if test "x$ac_cv_header_CoreFoundation_CFStringEncodingConverter_h" = x""yes; then :
+if test "x$ac_cv_header_CoreFoundation_CFStringEncodingConverter_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_COREFOUNDATION_CFSTRINGENCODINGCONVERTER_H 1
 _ACEOF
@@ -13038,7 +13012,7 @@
   for ac_header in CFStringEncodingConverter.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "CFStringEncodingConverter.h" "ac_cv_header_CFStringEncodingConverter_h" "$ac_includes_default"
-if test "x$ac_cv_header_CFStringEncodingConverter_h" = x""yes; then :
+if test "x$ac_cv_header_CFStringEncodingConverter_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_CFSTRINGENCODINGCONVERTER_H 1
 _ACEOF
@@ -13059,8 +13033,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13103,7 +13076,7 @@
 for ac_header in shadow.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "shadow.h" "ac_cv_header_shadow_h" "$ac_includes_default"
-if test "x$ac_cv_header_shadow_h" = x""yes; then :
+if test "x$ac_cv_header_shadow_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SHADOW_H 1
 _ACEOF
@@ -13116,8 +13089,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13130,8 +13102,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13145,8 +13116,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13159,8 +13129,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13174,8 +13143,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13190,8 +13158,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13207,7 +13174,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of int" >&5
 $as_echo_n "checking size of int... " >&6; }
-if test "${ac_cv_sizeof_int+set}" = set; then :
+if ${ac_cv_sizeof_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (int))" "ac_cv_sizeof_int"        "$ac_includes_default"; then :
@@ -13216,9 +13183,8 @@
   if test "$ac_cv_type_int" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (int)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (int)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_int=0
    fi
@@ -13241,7 +13207,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long" >&5
 $as_echo_n "checking size of long... " >&6; }
-if test "${ac_cv_sizeof_long+set}" = set; then :
+if ${ac_cv_sizeof_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long))" "ac_cv_sizeof_long"        "$ac_includes_default"; then :
@@ -13250,9 +13216,8 @@
   if test "$ac_cv_type_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long=0
    fi
@@ -13275,7 +13240,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of long long" >&5
 $as_echo_n "checking size of long long... " >&6; }
-if test "${ac_cv_sizeof_long_long+set}" = set; then :
+if ${ac_cv_sizeof_long_long+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (long long))" "ac_cv_sizeof_long_long"        "$ac_includes_default"; then :
@@ -13284,9 +13249,8 @@
   if test "$ac_cv_type_long_long" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (long long)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (long long)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_long_long=0
    fi
@@ -13309,7 +13273,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of short" >&5
 $as_echo_n "checking size of short... " >&6; }
-if test "${ac_cv_sizeof_short+set}" = set; then :
+if ${ac_cv_sizeof_short+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (short))" "ac_cv_sizeof_short"        "$ac_includes_default"; then :
@@ -13318,9 +13282,8 @@
   if test "$ac_cv_type_short" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (short)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (short)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_short=0
    fi
@@ -13340,7 +13303,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
 $as_echo_n "checking for an ANSI C-conforming const... " >&6; }
-if test "${ac_cv_c_const+set}" = set; then :
+if ${ac_cv_c_const+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -13420,7 +13383,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inline" >&5
 $as_echo_n "checking for inline... " >&6; }
-if test "${ac_cv_c_inline+set}" = set; then :
+if ${ac_cv_c_inline+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_inline=no
@@ -13462,7 +13425,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
 $as_echo_n "checking whether byte ordering is bigendian... " >&6; }
-if test "${ac_cv_c_bigendian+set}" = set; then :
+if ${ac_cv_c_bigendian+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_cv_c_bigendian=unknown
@@ -13680,13 +13643,13 @@
 
      ;; #(
    *)
-     as_fn_error "unknown endianness
+     as_fn_error $? "unknown endianness
  presetting ac_cv_c_bigendian=no (or yes) will help" "$LINENO" 5 ;;
  esac
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether char is unsigned" >&5
 $as_echo_n "checking whether char is unsigned... " >&6; }
-if test "${ac_cv_c_char_unsigned+set}" = set; then :
+if ${ac_cv_c_char_unsigned+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -13719,7 +13682,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
 $as_echo_n "checking return type of signal handlers... " >&6; }
-if test "${ac_cv_type_signal+set}" = set; then :
+if ${ac_cv_type_signal+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -13752,7 +13715,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uid_t in sys/types.h" >&5
 $as_echo_n "checking for uid_t in sys/types.h... " >&6; }
-if test "${ac_cv_type_uid_t+set}" = set; then :
+if ${ac_cv_type_uid_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -13781,7 +13744,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "mode_t" "ac_cv_type_mode_t" "$ac_includes_default"
-if test "x$ac_cv_type_mode_t" = x""yes; then :
+if test "x$ac_cv_type_mode_t" = xyes; then :
 
 else
 
@@ -13792,7 +13755,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "off_t" "ac_cv_type_off_t" "$ac_includes_default"
-if test "x$ac_cv_type_off_t" = x""yes; then :
+if test "x$ac_cv_type_off_t" = xyes; then :
 
 else
 
@@ -13803,7 +13766,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = x""yes; then :
+if test "x$ac_cv_type_size_t" = xyes; then :
 
 else
 
@@ -13814,7 +13777,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "pid_t" "ac_cv_type_pid_t" "$ac_includes_default"
-if test "x$ac_cv_type_pid_t" = x""yes; then :
+if test "x$ac_cv_type_pid_t" = xyes; then :
 
 else
 
@@ -13825,7 +13788,7 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_rdev" "ac_cv_member_struct_stat_st_rdev" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_rdev" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_rdev" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_RDEV 1
@@ -13839,7 +13802,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for d_off in dirent" >&5
 $as_echo_n "checking for d_off in dirent... " >&6; }
-if test "${ac_cv_dirent_d_off+set}" = set; then :
+if ${ac_cv_dirent_d_off+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -13872,7 +13835,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "ssize_t" "ac_cv_type_ssize_t" "$ac_includes_default"
-if test "x$ac_cv_type_ssize_t" = x""yes; then :
+if test "x$ac_cv_type_ssize_t" = xyes; then :
 
 else
 
@@ -13883,7 +13846,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "wchar_t" "ac_cv_type_wchar_t" "$ac_includes_default"
-if test "x$ac_cv_type_wchar_t" = x""yes; then :
+if test "x$ac_cv_type_wchar_t" = xyes; then :
 
 else
 
@@ -13908,7 +13871,7 @@
 set dummy cups-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_CUPS_CONFIG+set}" = set; then :
+if ${ac_cv_path_CUPS_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $CUPS_CONFIG in
@@ -13953,8 +13916,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -13979,7 +13941,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for httpConnect in -lcups" >&5
 $as_echo_n "checking for httpConnect in -lcups... " >&6; }
-if test "${ac_cv_lib_ext_cups_httpConnect+set}" = set; then :
+if ${ac_cv_lib_ext_cups_httpConnect+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -14044,7 +14006,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for httpConnectEncrypt in -lcups" >&5
 $as_echo_n "checking for httpConnectEncrypt in -lcups... " >&6; }
-if test "${ac_cv_lib_ext_cups_httpConnectEncrypt+set}" = set; then :
+if ${ac_cv_lib_ext_cups_httpConnectEncrypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -14110,7 +14072,7 @@
 		fi
 
 	elif test x"$enable_cups" = x"yes"; then
-		as_fn_error "Cups support required but cups-config not located.  Make sure cups-devel related files are installed." "$LINENO" 5
+		as_fn_error $? "Cups support required but cups-config not located.  Make sure cups-devel related files are installed." "$LINENO" 5
         fi
 fi
 
@@ -14126,7 +14088,7 @@
 $as_echo "#define HAVE_IPRINT 1" >>confdefs.h
 
 	elif test x"$enable_iprint" = x"yes"; then
-		as_fn_error "iPrint support required but cups not enabled.  Make sure cups-devel related files are installed and that cups is enabled." "$LINENO" 5
+		as_fn_error $? "iPrint support required but cups not enabled.  Make sure cups-devel related files are installed and that cups is enabled." "$LINENO" 5
         fi
 fi
 
@@ -14134,7 +14096,7 @@
 # check if the compiler will optimize out function calls
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the compiler will optimize out function calls" >&5
 $as_echo_n "checking if the compiler will optimize out function calls... " >&6; }
-if test "${samba_cv_optimize_out_funcation_calls+set}" = set; then :
+if ${samba_cv_optimize_out_funcation_calls+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14177,7 +14139,7 @@
 # check for fd passing struct via msg_control
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fd passing via msg_control" >&5
 $as_echo_n "checking for fd passing via msg_control... " >&6; }
-if test "${samba_cv_msghdr_msg_control+set}" = set; then :
+if ${samba_cv_msghdr_msg_control+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14224,7 +14186,7 @@
 # check for fd passing struct via msg_acctrights
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fd passing via msg_acctrights" >&5
 $as_echo_n "checking for fd passing via msg_acctrights... " >&6; }
-if test "${samba_cv_msghdr_msg_acctrights+set}" = set; then :
+if ${samba_cv_msghdr_msg_acctrights+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14267,7 +14229,7 @@
 for ac_func in dirfd
 do :
   ac_fn_c_check_func "$LINENO" "dirfd" "ac_cv_func_dirfd"
-if test "x$ac_cv_func_dirfd" = x""yes; then :
+if test "x$ac_cv_func_dirfd" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DIRFD 1
 _ACEOF
@@ -14281,7 +14243,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct sigevent type" >&5
 $as_echo_n "checking for struct sigevent type... " >&6; }
-if test "${samba_cv_struct_sigevent+set}" = set; then :
+if ${samba_cv_struct_sigevent+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14317,7 +14279,7 @@
 
    ac_fn_c_check_member "$LINENO" "struct sigevent" "sigev_value.sival_ptr" "ac_cv_member_struct_sigevent_sigev_value_sival_ptr" "#include <signal.h>
 "
-if test "x$ac_cv_member_struct_sigevent_sigev_value_sival_ptr" = x""yes; then :
+if test "x$ac_cv_member_struct_sigevent_sigev_value_sival_ptr" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SIGEVENT_SIGEV_VALUE_SIVAL_PTR 1
@@ -14327,7 +14289,7 @@
 fi
 ac_fn_c_check_member "$LINENO" "struct sigevent" "sigev_value.sigval_ptr" "ac_cv_member_struct_sigevent_sigev_value_sigval_ptr" "#include <signal.h>
 "
-if test "x$ac_cv_member_struct_sigevent_sigev_value_sigval_ptr" = x""yes; then :
+if test "x$ac_cv_member_struct_sigevent_sigev_value_sigval_ptr" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SIGEVENT_SIGEV_VALUE_SIGVAL_PTR 1
@@ -14340,7 +14302,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct timespec type" >&5
 $as_echo_n "checking for struct timespec type... " >&6; }
-if test "${samba_cv_struct_timespec+set}" = set; then :
+if ${samba_cv_struct_timespec+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14390,7 +14352,7 @@
 # nothing until kernel 2.1.44! very dumb.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for real setresuid" >&5
 $as_echo_n "checking for real setresuid... " >&6; }
-if test "${samba_cv_have_setresuid+set}" = set; then :
+if ${samba_cv_have_setresuid+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14424,7 +14386,7 @@
 #
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for real setresgid" >&5
 $as_echo_n "checking for real setresgid... " >&6; }
-if test "${samba_cv_have_setresgid+set}" = set; then :
+if ${samba_cv_have_setresgid+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -14457,7 +14419,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working memcmp" >&5
 $as_echo_n "checking for working memcmp... " >&6; }
-if test "${ac_cv_func_memcmp_working+set}" = set; then :
+if ${ac_cv_func_memcmp_working+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -14537,8 +14499,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -14550,7 +14511,7 @@
     for ac_header in readline/history.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "readline/history.h" "ac_cv_header_readline_history_h" "$ac_includes_default"
-if test "x$ac_cv_header_readline_history_h" = x""yes; then :
+if test "x$ac_cv_header_readline_history_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_READLINE_HISTORY_H 1
 _ACEOF
@@ -14564,8 +14525,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -14574,7 +14534,7 @@
        as_ac_Lib=`$as_echo "ac_cv_lib_${termlib}''_tgetent" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -l${termlib}" >&5
 $as_echo_n "checking for tgetent in -l${termlib}... " >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Lib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14609,15 +14569,14 @@
 eval ac_res=\$$as_ac_Lib
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Lib
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :
   TERMLIBS="-l${termlib}"; break
 fi
 
       done
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_callback_handler_install in -lreadline" >&5
 $as_echo_n "checking for rl_callback_handler_install in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_rl_callback_handler_install+set}" = set; then :
+if ${ac_cv_lib_readline_rl_callback_handler_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14651,7 +14610,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_callback_handler_install" >&5
 $as_echo "$ac_cv_lib_readline_rl_callback_handler_install" >&6; }
-if test "x$ac_cv_lib_readline_rl_callback_handler_install" = x""yes; then :
+if test "x$ac_cv_lib_readline_rl_callback_handler_install" = xyes; then :
   TERMLIBS="-lreadline $TERMLIBS"
 
 $as_echo "#define HAVE_LIBREADLINE 1" >>confdefs.h
@@ -14687,8 +14646,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -14700,7 +14658,7 @@
     for ac_header in readline/history.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "readline/history.h" "ac_cv_header_readline_history_h" "$ac_includes_default"
-if test "x$ac_cv_header_readline_history_h" = x""yes; then :
+if test "x$ac_cv_header_readline_history_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_READLINE_HISTORY_H 1
 _ACEOF
@@ -14714,8 +14672,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -14724,7 +14681,7 @@
        as_ac_Lib=`$as_echo "ac_cv_lib_${termlib}''_tgetent" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -l${termlib}" >&5
 $as_echo_n "checking for tgetent in -l${termlib}... " >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Lib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14759,15 +14716,14 @@
 eval ac_res=\$$as_ac_Lib
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Lib
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :
   TERMLIBS="-l${termlib}"; break
 fi
 
       done
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_callback_handler_install in -lreadline" >&5
 $as_echo_n "checking for rl_callback_handler_install in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_rl_callback_handler_install+set}" = set; then :
+if ${ac_cv_lib_readline_rl_callback_handler_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14801,7 +14757,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_callback_handler_install" >&5
 $as_echo "$ac_cv_lib_readline_rl_callback_handler_install" >&6; }
-if test "x$ac_cv_lib_readline_rl_callback_handler_install" = x""yes; then :
+if test "x$ac_cv_lib_readline_rl_callback_handler_install" = xyes; then :
   TERMLDFLAGS="-L$with_readline/lib"
        TERMCPPFLAGS="-I$with_readline/include"
        CPPFLAGS="-I$with_readline/include $CPPFLAGS"
@@ -14836,7 +14792,7 @@
 # special cases.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_completion_matches in -lreadline" >&5
 $as_echo_n "checking for rl_completion_matches in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_rl_completion_matches+set}" = set; then :
+if ${ac_cv_lib_readline_rl_completion_matches+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14870,7 +14826,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_completion_matches" >&5
 $as_echo "$ac_cv_lib_readline_rl_completion_matches" >&6; }
-if test "x$ac_cv_lib_readline_rl_completion_matches" = x""yes; then :
+if test "x$ac_cv_lib_readline_rl_completion_matches" = xyes; then :
 
 $as_echo "#define HAVE_NEW_LIBREADLINE 1" >>confdefs.h
 
@@ -14880,7 +14836,7 @@
 # not all readline libs have rl_event_hook or history_list
 ac_fn_c_check_decl "$LINENO" "rl_event_hook" "ac_cv_have_decl_rl_event_hook" "#include <readline/readline.h>
 "
-if test "x$ac_cv_have_decl_rl_event_hook" = x""yes; then :
+if test "x$ac_cv_have_decl_rl_event_hook" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -14892,7 +14848,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for history_list in -lreadline" >&5
 $as_echo_n "checking for history_list in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_history_list+set}" = set; then :
+if ${ac_cv_lib_readline_history_list+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -14926,7 +14882,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_history_list" >&5
 $as_echo "$ac_cv_lib_readline_history_list" >&6; }
-if test "x$ac_cv_lib_readline_history_list" = x""yes; then :
+if test "x$ac_cv_lib_readline_history_list" = xyes; then :
 
 $as_echo "#define HAVE_HISTORY_LIST 1" >>confdefs.h
 
@@ -14937,7 +14893,7 @@
 # test for where we get yp_get_default_domain() from
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing yp_get_default_domain" >&5
 $as_echo_n "checking for library containing yp_get_default_domain... " >&6; }
-if test "${ac_cv_search_yp_get_default_domain+set}" = set; then :
+if ${ac_cv_search_yp_get_default_domain+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -14971,11 +14927,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_yp_get_default_domain+set}" = set; then :
+  if ${ac_cv_search_yp_get_default_domain+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_yp_get_default_domain+set}" = set; then :
+if ${ac_cv_search_yp_get_default_domain+:} false; then :
 
 else
   ac_cv_search_yp_get_default_domain=no
@@ -14994,7 +14950,7 @@
 for ac_func in yp_get_default_domain
 do :
   ac_fn_c_check_func "$LINENO" "yp_get_default_domain" "ac_cv_func_yp_get_default_domain"
-if test "x$ac_cv_func_yp_get_default_domain" = x""yes; then :
+if test "x$ac_cv_func_yp_get_default_domain" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_YP_GET_DEFAULT_DOMAIN 1
 _ACEOF
@@ -15007,7 +14963,7 @@
 for ac_func in execl
 do :
   ac_fn_c_check_func "$LINENO" "execl" "ac_cv_func_execl"
-if test "x$ac_cv_func_execl" = x""yes; then :
+if test "x$ac_cv_func_execl" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_EXECL 1
 _ACEOF
@@ -15023,8 +14979,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15035,7 +14990,7 @@
 for ac_func in strtol
 do :
   ac_fn_c_check_func "$LINENO" "strtol" "ac_cv_func_strtol"
-if test "x$ac_cv_func_strtol" = x""yes; then :
+if test "x$ac_cv_func_strtol" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STRTOL 1
 _ACEOF
@@ -15047,8 +15002,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15060,8 +15014,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15073,8 +15026,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15086,8 +15038,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15099,8 +15050,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15111,7 +15061,7 @@
 for ac_func in getgrset
 do :
   ac_fn_c_check_func "$LINENO" "getgrset" "ac_cv_func_getgrset"
-if test "x$ac_cv_func_getgrset" = x""yes; then :
+if test "x$ac_cv_func_getgrset" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETGRSET 1
 _ACEOF
@@ -15123,8 +15073,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15136,8 +15085,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15149,8 +15097,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15162,8 +15109,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15174,7 +15120,7 @@
 for ac_func in getpwent_r
 do :
   ac_fn_c_check_func "$LINENO" "getpwent_r" "ac_cv_func_getpwent_r"
-if test "x$ac_cv_func_getpwent_r" = x""yes; then :
+if test "x$ac_cv_func_getpwent_r" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETPWENT_R 1
 _ACEOF
@@ -15185,7 +15131,7 @@
 for ac_func in getdents64
 do :
   ac_fn_c_check_func "$LINENO" "getdents64" "ac_cv_func_getdents64"
-if test "x$ac_cv_func_getdents64" = x""yes; then :
+if test "x$ac_cv_func_getdents64" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETDENTS64 1
 _ACEOF
@@ -15197,8 +15143,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15210,8 +15155,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15223,8 +15167,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15235,7 +15178,7 @@
 for ac_func in nanosleep
 do :
   ac_fn_c_check_func "$LINENO" "nanosleep" "ac_cv_func_nanosleep"
-if test "x$ac_cv_func_nanosleep" = x""yes; then :
+if test "x$ac_cv_func_nanosleep" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_NANOSLEEP 1
 _ACEOF
@@ -15250,7 +15193,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nanosleep in -lrt" >&5
 $as_echo_n "checking for nanosleep in -lrt... " >&6; }
-if test "${ac_cv_lib_ext_rt_nanosleep+set}" = set; then :
+if ${ac_cv_lib_ext_rt_nanosleep+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -15313,7 +15256,7 @@
 for ac_func in utimensat
 do :
   ac_fn_c_check_func "$LINENO" "utimensat" "ac_cv_func_utimensat"
-if test "x$ac_cv_func_utimensat" = x""yes; then :
+if test "x$ac_cv_func_utimensat" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_UTIMENSAT 1
 _ACEOF
@@ -15325,8 +15268,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15338,8 +15280,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15350,7 +15291,7 @@
 for ac_header in sys/mman.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/mman.h" "ac_cv_header_sys_mman_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_mman_h" = x""yes; then :
+if test "x$ac_cv_header_sys_mman_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_MMAN_H 1
 _ACEOF
@@ -15364,8 +15305,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15377,8 +15317,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15390,8 +15329,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15402,7 +15340,7 @@
 for ac_func in strupr
 do :
   ac_fn_c_check_func "$LINENO" "strupr" "ac_cv_func_strupr"
-if test "x$ac_cv_func_strupr" = x""yes; then :
+if test "x$ac_cv_func_strupr" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUPR 1
 _ACEOF
@@ -15416,8 +15354,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -15429,7 +15366,7 @@
 # libexecinfo provides backtrace_symbols on FreeBSD
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing backtrace_symbols" >&5
 $as_echo_n "checking for library containing backtrace_symbols... " >&6; }
-if test "${ac_cv_search_backtrace_symbols+set}" = set; then :
+if ${ac_cv_search_backtrace_symbols+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -15463,11 +15400,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_backtrace_symbols+set}" = set; then :
+  if ${ac_cv_search_backtrace_symbols+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_backtrace_symbols+set}" = set; then :
+if ${ac_cv_search_backtrace_symbols+:} false; then :
 
 else
   ac_cv_search_backtrace_symbols=no
@@ -15486,7 +15423,7 @@
 for ac_func in backtrace_symbols
 do :
   ac_fn_c_check_func "$LINENO" "backtrace_symbols" "ac_cv_func_backtrace_symbols"
-if test "x$ac_cv_func_backtrace_symbols" = x""yes; then :
+if test "x$ac_cv_func_backtrace_symbols" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_BACKTRACE_SYMBOLS 1
 _ACEOF
@@ -15496,7 +15433,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for trace_back_stack in -lexc" >&5
 $as_echo_n "checking for trace_back_stack in -lexc... " >&6; }
-if test "${ac_cv_lib_exc_trace_back_stack+set}" = set; then :
+if ${ac_cv_lib_exc_trace_back_stack+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -15530,7 +15467,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_exc_trace_back_stack" >&5
 $as_echo "$ac_cv_lib_exc_trace_back_stack" >&6; }
-if test "x$ac_cv_lib_exc_trace_back_stack" = x""yes; then :
+if test "x$ac_cv_lib_exc_trace_back_stack" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBEXC 1
 _ACEOF
@@ -15544,7 +15481,7 @@
 for ac_func in sysctlbyname
 do :
   ac_fn_c_check_func "$LINENO" "sysctlbyname" "ac_cv_func_sysctlbyname"
-if test "x$ac_cv_func_sysctlbyname" = x""yes; then :
+if test "x$ac_cv_func_sysctlbyname" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYSCTLBYNAME 1
 _ACEOF
@@ -15558,7 +15495,7 @@
 for ac_header in gpfs_gpl.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "gpfs_gpl.h" "ac_cv_header_gpfs_gpl_h" "$ac_includes_default"
-if test "x$ac_cv_header_gpfs_gpl_h" = x""yes; then :
+if test "x$ac_cv_header_gpfs_gpl_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GPFS_GPL_H 1
 _ACEOF
@@ -15678,7 +15615,7 @@
 	for ac_header in libunwind-ptrace.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "libunwind-ptrace.h" "ac_cv_header_libunwind_ptrace_h" "$ac_includes_default"
-if test "x$ac_cv_header_libunwind_ptrace_h" = x""yes; then :
+if test "x$ac_cv_header_libunwind_ptrace_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBUNWIND_PTRACE_H 1
 _ACEOF
@@ -15689,7 +15626,7 @@
 
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for _UPT_create in -lunwind-ptrace" >&5
 $as_echo_n "checking for _UPT_create in -lunwind-ptrace... " >&6; }
-if test "${ac_cv_lib_unwind_ptrace__UPT_create+set}" = set; then :
+if ${ac_cv_lib_unwind_ptrace__UPT_create+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -15723,7 +15660,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_unwind_ptrace__UPT_create" >&5
 $as_echo "$ac_cv_lib_unwind_ptrace__UPT_create" >&6; }
-if test "x$ac_cv_lib_unwind_ptrace__UPT_create" = x""yes; then :
+if test "x$ac_cv_lib_unwind_ptrace__UPT_create" = xyes; then :
 
 		LIBUNWIND_PTRACE="-lunwind-ptrace";
 
@@ -15752,7 +15689,7 @@
     for ac_header in sys/ptrace.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/ptrace.h" "ac_cv_header_sys_ptrace_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_ptrace_h" = x""yes; then :
+if test "x$ac_cv_header_sys_ptrace_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_PTRACE_H 1
 _ACEOF
@@ -15811,8 +15748,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15824,8 +15760,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15837,8 +15772,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15850,8 +15784,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15863,8 +15796,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15876,8 +15808,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15889,8 +15820,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15902,8 +15832,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15915,8 +15844,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15928,8 +15856,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15941,8 +15868,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15954,8 +15880,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15967,8 +15892,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15980,8 +15904,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -15992,7 +15915,7 @@
 for ac_func in prctl
 do :
   ac_fn_c_check_func "$LINENO" "prctl" "ac_cv_func_prctl"
-if test "x$ac_cv_func_prctl" = x""yes; then :
+if test "x$ac_cv_func_prctl" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_PRCTL 1
 _ACEOF
@@ -16031,7 +15954,7 @@
        # glibc <= 2.3.2 has a broken getgrouplist
        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for good getgrouplist" >&5
 $as_echo_n "checking for good getgrouplist... " >&6; }
-if test "${samba_cv_linux_getgrouplist_ok+set}" = set; then :
+if ${samba_cv_linux_getgrouplist_ok+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -16079,7 +16002,7 @@
        for ac_func in getgrouplist
 do :
   ac_fn_c_check_func "$LINENO" "getgrouplist" "ac_cv_func_getgrouplist"
-if test "x$ac_cv_func_getgrouplist" = x""yes; then :
+if test "x$ac_cv_func_getgrouplist" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETGROUPLIST 1
 _ACEOF
@@ -16198,7 +16121,7 @@
 
 samba_cv_stat_hires=no
 ac_fn_c_check_member "$LINENO" "struct stat" "st_mtim.tv_nsec" "ac_cv_member_struct_stat_st_mtim_tv_nsec" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_mtim_tv_nsec" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_mtim_tv_nsec" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_MTIM_TV_NSEC 1
@@ -16209,7 +16132,7 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_mtimensec" "ac_cv_member_struct_stat_st_mtimensec" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_mtimensec" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_mtimensec" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_MTIMENSEC 1
@@ -16220,7 +16143,7 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_mtimespec.tv_nsec" "ac_cv_member_struct_stat_st_mtimespec_tv_nsec" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_mtimespec_tv_nsec" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_mtimespec_tv_nsec" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_MTIMESPEC_TV_NSEC 1
@@ -16231,7 +16154,7 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_mtime_n" "ac_cv_member_struct_stat_st_mtime_n" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_mtime_n" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_mtime_n" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_MTIME_N 1
@@ -16242,7 +16165,7 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_umtime" "ac_cv_member_struct_stat_st_umtime" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_umtime" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_umtime" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_UMTIME 1
@@ -16261,7 +16184,7 @@
 
 # recent FreeBSD, NetBSD have creation timestamps called birthtime:
 ac_fn_c_check_member "$LINENO" "struct stat" "st_birthtimespec.tv_nsec" "ac_cv_member_struct_stat_st_birthtimespec_tv_nsec" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_birthtimespec_tv_nsec" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_birthtimespec_tv_nsec" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_BIRTHTIMESPEC_TV_NSEC 1
@@ -16271,14 +16194,14 @@
 fi
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_birthtime" "ac_cv_member_struct_stat_st_birthtime" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_birthtime" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_birthtime" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_BIRTHTIME 1
 _ACEOF
 
 ac_fn_c_check_member "$LINENO" "struct stat" "st_birthtimensec" "ac_cv_member_struct_stat_st_birthtimensec" "$ac_includes_default"
-if test "x$ac_cv_member_struct_stat_st_birthtimensec" = x""yes; then :
+if test "x$ac_cv_member_struct_stat_st_birthtimensec" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_STAT_ST_BIRTHTIMENSEC 1
@@ -16293,7 +16216,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether there is DOS flags support in the stat struct" >&5
 $as_echo_n "checking whether there is DOS flags support in the stat struct... " >&6; }
-if test "${samba_cv_stat_dos_flags+set}" = set; then :
+if ${samba_cv_stat_dos_flags+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -16336,7 +16259,7 @@
 # needed for SRV lookups
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_expand in -lresolv" >&5
 $as_echo_n "checking for dn_expand in -lresolv... " >&6; }
-if test "${ac_cv_lib_resolv_dn_expand+set}" = set; then :
+if ${ac_cv_lib_resolv_dn_expand+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16370,7 +16293,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv_dn_expand" >&5
 $as_echo "$ac_cv_lib_resolv_dn_expand" >&6; }
-if test "x$ac_cv_lib_resolv_dn_expand" = x""yes; then :
+if test "x$ac_cv_lib_resolv_dn_expand" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRESOLV 1
 _ACEOF
@@ -16381,7 +16304,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _dn_expand in -lresolv" >&5
 $as_echo_n "checking for _dn_expand in -lresolv... " >&6; }
-if test "${ac_cv_lib_resolv__dn_expand+set}" = set; then :
+if ${ac_cv_lib_resolv__dn_expand+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16415,7 +16338,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv__dn_expand" >&5
 $as_echo "$ac_cv_lib_resolv__dn_expand" >&6; }
-if test "x$ac_cv_lib_resolv__dn_expand" = x""yes; then :
+if test "x$ac_cv_lib_resolv__dn_expand" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRESOLV 1
 _ACEOF
@@ -16426,7 +16349,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __dn_expand in -lresolv" >&5
 $as_echo_n "checking for __dn_expand in -lresolv... " >&6; }
-if test "${ac_cv_lib_resolv___dn_expand+set}" = set; then :
+if ${ac_cv_lib_resolv___dn_expand+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16460,7 +16383,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_resolv___dn_expand" >&5
 $as_echo "$ac_cv_lib_resolv___dn_expand" >&6; }
-if test "x$ac_cv_lib_resolv___dn_expand" = x""yes; then :
+if test "x$ac_cv_lib_resolv___dn_expand" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBRESOLV 1
 _ACEOF
@@ -16480,7 +16403,7 @@
   for ac_func in putprpwnam
 do :
   ac_fn_c_check_func "$LINENO" "putprpwnam" "ac_cv_func_putprpwnam"
-if test "x$ac_cv_func_putprpwnam" = x""yes; then :
+if test "x$ac_cv_func_putprpwnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_PUTPRPWNAM 1
 _ACEOF
@@ -16507,7 +16430,7 @@
 	    # putprpwnam was not found, try adding libsecurity
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for putprpwnam in -lsecurity" >&5
 $as_echo_n "checking for putprpwnam in -lsecurity... " >&6; }
-if test "${ac_cv_lib_security_putprpwnam+set}" = set; then :
+if ${ac_cv_lib_security_putprpwnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16541,7 +16464,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_security_putprpwnam" >&5
 $as_echo "$ac_cv_lib_security_putprpwnam" >&6; }
-if test "x$ac_cv_lib_security_putprpwnam" = x""yes; then :
+if test "x$ac_cv_lib_security_putprpwnam" = xyes; then :
 
 		LIBS="-lsecurity $LIBS"
 
@@ -16571,7 +16494,7 @@
   for ac_func in putprpwnam
 do :
   ac_fn_c_check_func "$LINENO" "putprpwnam" "ac_cv_func_putprpwnam"
-if test "x$ac_cv_func_putprpwnam" = x""yes; then :
+if test "x$ac_cv_func_putprpwnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_PUTPRPWNAM 1
 _ACEOF
@@ -16598,7 +16521,7 @@
 	    # putprpwnam was not found, try adding libsec
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for putprpwnam in -lsec" >&5
 $as_echo_n "checking for putprpwnam in -lsec... " >&6; }
-if test "${ac_cv_lib_sec_putprpwnam+set}" = set; then :
+if ${ac_cv_lib_sec_putprpwnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16632,7 +16555,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sec_putprpwnam" >&5
 $as_echo "$ac_cv_lib_sec_putprpwnam" >&6; }
-if test "x$ac_cv_lib_sec_putprpwnam" = x""yes; then :
+if test "x$ac_cv_lib_sec_putprpwnam" = xyes; then :
 
 		LIBS="-lsec $LIBS"
 
@@ -16663,7 +16586,7 @@
   for ac_func in set_auth_parameters
 do :
   ac_fn_c_check_func "$LINENO" "set_auth_parameters" "ac_cv_func_set_auth_parameters"
-if test "x$ac_cv_func_set_auth_parameters" = x""yes; then :
+if test "x$ac_cv_func_set_auth_parameters" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SET_AUTH_PARAMETERS 1
 _ACEOF
@@ -16690,7 +16613,7 @@
 	    # set_auth_parameters was not found, try adding libsecurity
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for set_auth_parameters in -lsecurity" >&5
 $as_echo_n "checking for set_auth_parameters in -lsecurity... " >&6; }
-if test "${ac_cv_lib_security_set_auth_parameters+set}" = set; then :
+if ${ac_cv_lib_security_set_auth_parameters+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16724,7 +16647,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_security_set_auth_parameters" >&5
 $as_echo "$ac_cv_lib_security_set_auth_parameters" >&6; }
-if test "x$ac_cv_lib_security_set_auth_parameters" = x""yes; then :
+if test "x$ac_cv_lib_security_set_auth_parameters" = xyes; then :
 
 		LIBS="-lsecurity $LIBS"
 
@@ -16754,7 +16677,7 @@
   for ac_func in set_auth_parameters
 do :
   ac_fn_c_check_func "$LINENO" "set_auth_parameters" "ac_cv_func_set_auth_parameters"
-if test "x$ac_cv_func_set_auth_parameters" = x""yes; then :
+if test "x$ac_cv_func_set_auth_parameters" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SET_AUTH_PARAMETERS 1
 _ACEOF
@@ -16781,7 +16704,7 @@
 	    # set_auth_parameters was not found, try adding libsec
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for set_auth_parameters in -lsec" >&5
 $as_echo_n "checking for set_auth_parameters in -lsec... " >&6; }
-if test "${ac_cv_lib_sec_set_auth_parameters+set}" = set; then :
+if ${ac_cv_lib_sec_set_auth_parameters+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16815,7 +16738,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sec_set_auth_parameters" >&5
 $as_echo "$ac_cv_lib_sec_set_auth_parameters" >&6; }
-if test "x$ac_cv_lib_sec_set_auth_parameters" = x""yes; then :
+if test "x$ac_cv_lib_sec_set_auth_parameters" = xyes; then :
 
 		LIBS="-lsec $LIBS"
 
@@ -16847,7 +16770,7 @@
   for ac_func in getspnam
 do :
   ac_fn_c_check_func "$LINENO" "getspnam" "ac_cv_func_getspnam"
-if test "x$ac_cv_func_getspnam" = x""yes; then :
+if test "x$ac_cv_func_getspnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETSPNAM 1
 _ACEOF
@@ -16874,7 +16797,7 @@
 	    # getspnam was not found, try adding libgen
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getspnam in -lgen" >&5
 $as_echo_n "checking for getspnam in -lgen... " >&6; }
-if test "${ac_cv_lib_gen_getspnam+set}" = set; then :
+if ${ac_cv_lib_gen_getspnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -16908,7 +16831,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_gen_getspnam" >&5
 $as_echo "$ac_cv_lib_gen_getspnam" >&6; }
-if test "x$ac_cv_lib_gen_getspnam" = x""yes; then :
+if test "x$ac_cv_lib_gen_getspnam" = xyes; then :
 
 		LIBS="-lgen $LIBS"
 
@@ -16939,7 +16862,7 @@
   for ac_func in getspnam
 do :
   ac_fn_c_check_func "$LINENO" "getspnam" "ac_cv_func_getspnam"
-if test "x$ac_cv_func_getspnam" = x""yes; then :
+if test "x$ac_cv_func_getspnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETSPNAM 1
 _ACEOF
@@ -16966,7 +16889,7 @@
 	    # getspnam was not found, try adding libsecurity
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getspnam in -lsecurity" >&5
 $as_echo_n "checking for getspnam in -lsecurity... " >&6; }
-if test "${ac_cv_lib_security_getspnam+set}" = set; then :
+if ${ac_cv_lib_security_getspnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -17000,7 +16923,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_security_getspnam" >&5
 $as_echo "$ac_cv_lib_security_getspnam" >&6; }
-if test "x$ac_cv_lib_security_getspnam" = x""yes; then :
+if test "x$ac_cv_lib_security_getspnam" = xyes; then :
 
 		LIBS="-lsecurity $LIBS"
 
@@ -17030,7 +16953,7 @@
   for ac_func in getspnam
 do :
   ac_fn_c_check_func "$LINENO" "getspnam" "ac_cv_func_getspnam"
-if test "x$ac_cv_func_getspnam" = x""yes; then :
+if test "x$ac_cv_func_getspnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETSPNAM 1
 _ACEOF
@@ -17057,7 +16980,7 @@
 	    # getspnam was not found, try adding libsec
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getspnam in -lsec" >&5
 $as_echo_n "checking for getspnam in -lsec... " >&6; }
-if test "${ac_cv_lib_sec_getspnam+set}" = set; then :
+if ${ac_cv_lib_sec_getspnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -17091,7 +17014,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sec_getspnam" >&5
 $as_echo "$ac_cv_lib_sec_getspnam" >&6; }
-if test "x$ac_cv_lib_sec_getspnam" = x""yes; then :
+if test "x$ac_cv_lib_sec_getspnam" = xyes; then :
 
 		LIBS="-lsec $LIBS"
 
@@ -17122,7 +17045,7 @@
   for ac_func in bigcrypt
 do :
   ac_fn_c_check_func "$LINENO" "bigcrypt" "ac_cv_func_bigcrypt"
-if test "x$ac_cv_func_bigcrypt" = x""yes; then :
+if test "x$ac_cv_func_bigcrypt" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_BIGCRYPT 1
 _ACEOF
@@ -17149,7 +17072,7 @@
 	    # bigcrypt was not found, try adding libsecurity
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bigcrypt in -lsecurity" >&5
 $as_echo_n "checking for bigcrypt in -lsecurity... " >&6; }
-if test "${ac_cv_lib_security_bigcrypt+set}" = set; then :
+if ${ac_cv_lib_security_bigcrypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -17183,7 +17106,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_security_bigcrypt" >&5
 $as_echo "$ac_cv_lib_security_bigcrypt" >&6; }
-if test "x$ac_cv_lib_security_bigcrypt" = x""yes; then :
+if test "x$ac_cv_lib_security_bigcrypt" = xyes; then :
 
 		LIBS="-lsecurity $LIBS"
 
@@ -17213,7 +17136,7 @@
   for ac_func in bigcrypt
 do :
   ac_fn_c_check_func "$LINENO" "bigcrypt" "ac_cv_func_bigcrypt"
-if test "x$ac_cv_func_bigcrypt" = x""yes; then :
+if test "x$ac_cv_func_bigcrypt" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_BIGCRYPT 1
 _ACEOF
@@ -17240,7 +17163,7 @@
 	    # bigcrypt was not found, try adding libsec
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bigcrypt in -lsec" >&5
 $as_echo_n "checking for bigcrypt in -lsec... " >&6; }
-if test "${ac_cv_lib_sec_bigcrypt+set}" = set; then :
+if ${ac_cv_lib_sec_bigcrypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -17274,7 +17197,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sec_bigcrypt" >&5
 $as_echo "$ac_cv_lib_sec_bigcrypt" >&6; }
-if test "x$ac_cv_lib_sec_bigcrypt" = x""yes; then :
+if test "x$ac_cv_lib_sec_bigcrypt" = xyes; then :
 
 		LIBS="-lsec $LIBS"
 
@@ -17305,7 +17228,7 @@
   for ac_func in getprpwnam
 do :
   ac_fn_c_check_func "$LINENO" "getprpwnam" "ac_cv_func_getprpwnam"
-if test "x$ac_cv_func_getprpwnam" = x""yes; then :
+if test "x$ac_cv_func_getprpwnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETPRPWNAM 1
 _ACEOF
@@ -17332,7 +17255,7 @@
 	    # getprpwnam was not found, try adding libsecurity
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getprpwnam in -lsecurity" >&5
 $as_echo_n "checking for getprpwnam in -lsecurity... " >&6; }
-if test "${ac_cv_lib_security_getprpwnam+set}" = set; then :
+if ${ac_cv_lib_security_getprpwnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -17366,7 +17289,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_security_getprpwnam" >&5
 $as_echo "$ac_cv_lib_security_getprpwnam" >&6; }
-if test "x$ac_cv_lib_security_getprpwnam" = x""yes; then :
+if test "x$ac_cv_lib_security_getprpwnam" = xyes; then :
 
 		LIBS="-lsecurity $LIBS"
 
@@ -17396,7 +17319,7 @@
   for ac_func in getprpwnam
 do :
   ac_fn_c_check_func "$LINENO" "getprpwnam" "ac_cv_func_getprpwnam"
-if test "x$ac_cv_func_getprpwnam" = x""yes; then :
+if test "x$ac_cv_func_getprpwnam" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETPRPWNAM 1
 _ACEOF
@@ -17423,7 +17346,7 @@
 	    # getprpwnam was not found, try adding libsec
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for getprpwnam in -lsec" >&5
 $as_echo_n "checking for getprpwnam in -lsec... " >&6; }
-if test "${ac_cv_lib_sec_getprpwnam+set}" = set; then :
+if ${ac_cv_lib_sec_getprpwnam+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -17457,7 +17380,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sec_getprpwnam" >&5
 $as_echo "$ac_cv_lib_sec_getprpwnam" >&6; }
-if test "x$ac_cv_lib_sec_getprpwnam" = x""yes; then :
+if test "x$ac_cv_lib_sec_getprpwnam" = xyes; then :
 
 		LIBS="-lsec $LIBS"
 
@@ -17487,7 +17410,7 @@
 for ac_func in strsignal
 do :
   ac_fn_c_check_func "$LINENO" "strsignal" "ac_cv_func_strsignal"
-if test "x$ac_cv_func_strsignal" = x""yes; then :
+if test "x$ac_cv_func_strsignal" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_STRSIGNAL 1
 _ACEOF
@@ -17502,7 +17425,7 @@
   *osf*)
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing getproplist" >&5
 $as_echo_n "checking for library containing getproplist... " >&6; }
-if test "${ac_cv_search_getproplist+set}" = set; then :
+if ${ac_cv_search_getproplist+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -17536,11 +17459,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_getproplist+set}" = set; then :
+  if ${ac_cv_search_getproplist+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_getproplist+set}" = set; then :
+if ${ac_cv_search_getproplist+:} false; then :
 
 else
   ac_cv_search_getproplist=no
@@ -17560,8 +17483,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17573,8 +17495,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17585,7 +17506,7 @@
 	for ac_func in sizeof_proplist_entry
 do :
   ac_fn_c_check_func "$LINENO" "sizeof_proplist_entry" "ac_cv_func_sizeof_proplist_entry"
-if test "x$ac_cv_func_sizeof_proplist_entry" = x""yes; then :
+if test "x$ac_cv_func_sizeof_proplist_entry" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SIZEOF_PROPLIST_ENTRY 1
 _ACEOF
@@ -17597,7 +17518,7 @@
   *)
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing getxattr" >&5
 $as_echo_n "checking for library containing getxattr... " >&6; }
-if test "${ac_cv_search_getxattr+set}" = set; then :
+if ${ac_cv_search_getxattr+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -17631,11 +17552,11 @@
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
-  if test "${ac_cv_search_getxattr+set}" = set; then :
+  if ${ac_cv_search_getxattr+:} false; then :
   break
 fi
 done
-if test "${ac_cv_search_getxattr+set}" = set; then :
+if ${ac_cv_search_getxattr+:} false; then :
 
 else
   ac_cv_search_getxattr=no
@@ -17655,8 +17576,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17668,8 +17588,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17681,8 +17600,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17694,8 +17612,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17707,8 +17624,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17720,8 +17636,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17733,8 +17648,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17752,7 +17666,7 @@
 	for ac_func in attropen
 do :
   ac_fn_c_check_func "$LINENO" "attropen" "ac_cv_func_attropen"
-if test "x$ac_cv_func_attropen" = x""yes; then :
+if test "x$ac_cv_func_attropen" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_ATTROPEN 1
 _ACEOF
@@ -17768,7 +17682,7 @@
 if test x"$ac_cv_func_getxattr" = x"yes" ; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether xattr interface takes additional options" >&5
 $as_echo_n "checking whether xattr interface takes additional options... " >&6; }
-if test "${smb_attr_cv_xattr_add_opt+set}" = set; then :
+if ${smb_attr_cv_xattr_add_opt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17823,8 +17737,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17836,8 +17749,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17849,8 +17761,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17862,8 +17773,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -17933,7 +17843,7 @@
 then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for -pie and -fPIE" >&5
 $as_echo_n "checking for -pie and -fPIE... " >&6; }
-if test "${samba_cv_fpie+set}" = set; then :
+if ${samba_cv_fpie+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -17980,7 +17890,7 @@
 then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for -Wl,-z,relro" >&5
 $as_echo_n "checking for -Wl,-z,relro... " >&6; }
-if test "${samba_cv_relro+set}" = set; then :
+if ${samba_cv_relro+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -18238,7 +18148,7 @@
 set dummy groff; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_ROFF+set}" = set; then :
+if ${ac_cv_prog_ROFF+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$ROFF"; then
@@ -18507,7 +18417,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether building shared libraries actually works" >&5
 $as_echo_n "checking whether building shared libraries actually works... " >&6; }
-if test "${ac_cv_shlib_works+set}" = set; then :
+if ${ac_cv_shlib_works+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -18718,7 +18628,7 @@
 set dummy ${ac_tool_prefix}pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKG_CONFIG in
@@ -18761,7 +18671,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_ac_pt_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_ac_pt_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $ac_pt_PKG_CONFIG in
@@ -18888,14 +18798,14 @@
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
                 if test x$enable_external_libtalloc = xyes; then
-			as_fn_error "Unable to find libtalloc" "$LINENO" 5
+			as_fn_error $? "Unable to find libtalloc" "$LINENO" 5
 		  else
 			enable_external_libtalloc=no
 		  fi
 
 elif test $pkg_failed = untried; then
 	if test x$enable_external_libtalloc = xyes; then
-			as_fn_error "Unable to find libtalloc" "$LINENO" 5
+			as_fn_error $? "Unable to find libtalloc" "$LINENO" 5
 		  else
 			enable_external_libtalloc=no
 		  fi
@@ -18921,7 +18831,7 @@
 	fi
 done
 if test x"$tallocdir" = "x"; then
-   as_fn_error "cannot find talloc source in $tallocpaths" "$LINENO" 5
+   as_fn_error $? "cannot find talloc source in $tallocpaths" "$LINENO" 5
 fi
 TALLOC_OBJ="talloc.o"
 
@@ -18938,7 +18848,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of size_t" >&5
 $as_echo_n "checking size of size_t... " >&6; }
-if test "${ac_cv_sizeof_size_t+set}" = set; then :
+if ${ac_cv_sizeof_size_t+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (size_t))" "ac_cv_sizeof_size_t"        "$ac_includes_default"; then :
@@ -18947,9 +18857,8 @@
   if test "$ac_cv_type_size_t" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (size_t)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (size_t)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_size_t=0
    fi
@@ -18972,7 +18881,7 @@
 # This bug is HP SR number 8606223364.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking size of void *" >&5
 $as_echo_n "checking size of void *... " >&6; }
-if test "${ac_cv_sizeof_void_p+set}" = set; then :
+if ${ac_cv_sizeof_void_p+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if ac_fn_c_compute_int "$LINENO" "(long int) (sizeof (void *))" "ac_cv_sizeof_void_p"        "$ac_includes_default"; then :
@@ -18981,9 +18890,8 @@
   if test "$ac_cv_type_void_p" = yes; then
      { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "cannot compute sizeof (void *)
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "cannot compute sizeof (void *)
+See \`config.log' for more details" "$LINENO" 5; }
    else
      ac_cv_sizeof_void_p=0
    fi
@@ -19010,7 +18918,7 @@
 $as_echo "$as_me: WARNING: sizeof(size_t) = $ac_cv_sizeof_size_t" >&2;}
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: sizeof(void *) = $ac_cv_sizeof_void_p" >&5
 $as_echo "$as_me: WARNING: sizeof(void *) = $ac_cv_sizeof_void_p" >&2;}
-	as_fn_error "sizeof(size_t) < sizeof(void *)" "$LINENO" 5
+	as_fn_error $? "sizeof(size_t) < sizeof(void *)" "$LINENO" 5
 fi
 
 if test x"$VERSIONSCRIPT" != "x"; then
@@ -19196,7 +19104,7 @@
 $as_echo "no" >&6; }
 
 		if test x$enable_external_libtdb = xyes; then
-			as_fn_error "Unable to find libtdb" "$LINENO" 5
+			as_fn_error $? "Unable to find libtdb" "$LINENO" 5
 		else
 			enable_external_libtdb=no
 		fi
@@ -19204,7 +19112,7 @@
 elif test $pkg_failed = untried; then
 
 		if test x$enable_external_libtdb = xyes; then
-			as_fn_error "Unable to find libtdb" "$LINENO" 5
+			as_fn_error $? "Unable to find libtdb" "$LINENO" 5
 		else
 			enable_external_libtdb=no
 		fi
@@ -19231,7 +19139,7 @@
 	fi
 done
 if test x"$tdbdir" = "x"; then
-   as_fn_error "cannot find tdb source in $tdbpaths" "$LINENO" 5
+   as_fn_error $? "cannot find tdb source in $tdbpaths" "$LINENO" 5
 fi
 TDB_OBJ="common/tdb.o common/dump.o common/transaction.o common/error.o common/traverse.o"
 TDB_OBJ="$TDB_OBJ common/freelist.o common/freelistcheck.o common/io.o common/lock.o common/open.o common/check.o"
@@ -19248,8 +19156,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -19261,8 +19168,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -19275,7 +19181,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pread declaration" >&5
 $as_echo_n "checking for pread declaration... " >&6; }
-if test "${ac_cv_have_pread_decl+set}" = set; then :
+if ${ac_cv_have_pread_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19308,7 +19214,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pwrite declaration" >&5
 $as_echo_n "checking for pwrite declaration... " >&6; }
-if test "${ac_cv_have_pwrite_decl+set}" = set; then :
+if ${ac_cv_have_pwrite_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19827,7 +19733,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for long long" >&5
 $as_echo_n "checking for long long... " >&6; }
-if test "${samba_cv_have_longlong+set}" = set; then :
+if ${samba_cv_have_longlong+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19856,7 +19762,7 @@
 $as_echo "#define HAVE_LONGLONG 1" >>confdefs.h
 
     ac_fn_c_check_type "$LINENO" "intptr_t" "ac_cv_type_intptr_t" "$ac_includes_default"
-if test "x$ac_cv_type_intptr_t" = x""yes; then :
+if test "x$ac_cv_type_intptr_t" = xyes; then :
 
 else
 
@@ -19868,7 +19774,7 @@
 
 else
     ac_fn_c_check_type "$LINENO" "intptr_t" "ac_cv_type_intptr_t" "$ac_includes_default"
-if test "x$ac_cv_type_intptr_t" = x""yes; then :
+if test "x$ac_cv_type_intptr_t" = xyes; then :
 
 else
 
@@ -19886,7 +19792,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LL suffix on long long integers" >&5
 $as_echo_n "checking for LL suffix on long long integers... " >&6; }
-if test "${samba_cv_compiler_supports_ll+set}" = set; then :
+if ${samba_cv_compiler_supports_ll+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19919,7 +19825,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 64 bit time_t" >&5
 $as_echo_n "checking for 64 bit time_t... " >&6; }
-if test "${samba_cv_SIZEOF_TIME_T+set}" = set; then :
+if ${samba_cv_SIZEOF_TIME_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -19951,7 +19857,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for TIME_T_MAX" >&5
 $as_echo_n "checking for TIME_T_MAX... " >&6; }
-if test "${samba_cv_TIME_T_MAX+set}" = set; then :
+if ${samba_cv_TIME_T_MAX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20000,7 +19906,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 64 bit off_t" >&5
 $as_echo_n "checking for 64 bit off_t... " >&6; }
-if test "${samba_cv_SIZEOF_OFF_T+set}" = set; then :
+if ${samba_cv_SIZEOF_OFF_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20033,7 +19939,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for off64_t" >&5
 $as_echo_n "checking for off64_t... " >&6; }
-if test "${samba_cv_HAVE_OFF64_T+set}" = set; then :
+if ${samba_cv_HAVE_OFF64_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20070,7 +19976,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 64 bit ino_t" >&5
 $as_echo_n "checking for 64 bit ino_t... " >&6; }
-if test "${samba_cv_SIZEOF_INO_T+set}" = set; then :
+if ${samba_cv_SIZEOF_INO_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20107,7 +20013,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ino64_t" >&5
 $as_echo_n "checking for ino64_t... " >&6; }
-if test "${samba_cv_HAVE_INO64_T+set}" = set; then :
+if ${samba_cv_HAVE_INO64_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20144,7 +20050,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 64 bit dev_t" >&5
 $as_echo_n "checking for 64 bit dev_t... " >&6; }
-if test "${samba_cv_SIZEOF_DEV_T+set}" = set; then :
+if ${samba_cv_SIZEOF_DEV_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20181,7 +20087,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dev64_t" >&5
 $as_echo_n "checking for dev64_t... " >&6; }
-if test "${samba_cv_HAVE_DEV64_T+set}" = set; then :
+if ${samba_cv_HAVE_DEV64_T+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20218,7 +20124,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct dirent64" >&5
 $as_echo_n "checking for struct dirent64... " >&6; }
-if test "${samba_cv_HAVE_STRUCT_DIR64+set}" = set; then :
+if ${samba_cv_HAVE_STRUCT_DIR64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20255,7 +20161,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct dirent64" >&5
 $as_echo_n "checking for struct dirent64... " >&6; }
-if test "${samba_cv_HAVE_STRUCT_DIRENT64+set}" = set; then :
+if ${samba_cv_HAVE_STRUCT_DIRENT64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20292,7 +20198,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for major macro" >&5
 $as_echo_n "checking for major macro... " >&6; }
-if test "${samba_cv_HAVE_DEVICE_MAJOR_FN+set}" = set; then :
+if ${samba_cv_HAVE_DEVICE_MAJOR_FN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20328,7 +20234,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for minor macro" >&5
 $as_echo_n "checking for minor macro... " >&6; }
-if test "${samba_cv_HAVE_DEVICE_MINOR_FN+set}" = set; then :
+if ${samba_cv_HAVE_DEVICE_MINOR_FN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20364,7 +20270,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for makedev macro" >&5
 $as_echo_n "checking for makedev macro... " >&6; }
-if test "${samba_cv_HAVE_MAKEDEV+set}" = set; then :
+if ${samba_cv_HAVE_MAKEDEV+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20400,7 +20306,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for unsigned char" >&5
 $as_echo_n "checking for unsigned char... " >&6; }
-if test "${samba_cv_HAVE_UNSIGNED_CHAR+set}" = set; then :
+if ${samba_cv_HAVE_UNSIGNED_CHAR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20432,7 +20338,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether seekdir returns void" >&5
 $as_echo_n "checking whether seekdir returns void... " >&6; }
-if test "${samba_cv_SEEKDIR_RETURNS_VOID+set}" = set; then :
+if ${samba_cv_SEEKDIR_RETURNS_VOID+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20466,7 +20372,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __FUNCTION__ macro" >&5
 $as_echo_n "checking for __FUNCTION__ macro... " >&6; }
-if test "${samba_cv_HAVE_FUNCTION_MACRO+set}" = set; then :
+if ${samba_cv_HAVE_FUNCTION_MACRO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20498,7 +20404,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if gettimeofday takes tz argument" >&5
 $as_echo_n "checking if gettimeofday takes tz argument... " >&6; }
-if test "${samba_cv_HAVE_GETTIMEOFDAY_TZ+set}" = set; then :
+if ${samba_cv_HAVE_GETTIMEOFDAY_TZ+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20542,7 +20448,7 @@
   for ac_func in clock_gettime
 do :
   ac_fn_c_check_func "$LINENO" "clock_gettime" "ac_cv_func_clock_gettime"
-if test "x$ac_cv_func_clock_gettime" = x""yes; then :
+if test "x$ac_cv_func_clock_gettime" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_CLOCK_GETTIME 1
 _ACEOF
@@ -20703,7 +20609,7 @@
 	    # clock_gettime was not found, try adding librt
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for clock_gettime in -lrt" >&5
 $as_echo_n "checking for clock_gettime in -lrt... " >&6; }
-if test "${ac_cv_lib_rt_clock_gettime+set}" = set; then :
+if ${ac_cv_lib_rt_clock_gettime+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -20737,7 +20643,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rt_clock_gettime" >&5
 $as_echo "$ac_cv_lib_rt_clock_gettime" >&6; }
-if test "x$ac_cv_lib_rt_clock_gettime" = x""yes; then :
+if test "x$ac_cv_lib_rt_clock_gettime" = xyes; then :
 
 		LIBS="-lrt $LIBS"
 
@@ -20902,7 +20808,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken readdir name" >&5
 $as_echo_n "checking for broken readdir name... " >&6; }
-if test "${samba_cv_HAVE_BROKEN_READDIR_NAME+set}" = set; then :
+if ${samba_cv_HAVE_BROKEN_READDIR_NAME+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20937,7 +20843,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for utimbuf" >&5
 $as_echo_n "checking for utimbuf... " >&6; }
-if test "${samba_cv_HAVE_UTIMBUF+set}" = set; then :
+if ${samba_cv_HAVE_UTIMBUF+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -20976,8 +20882,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -20988,7 +20893,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_name in utmp" >&5
 $as_echo_n "checking for ut_name in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_NAME+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_NAME+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21021,7 +20926,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_user in utmp" >&5
 $as_echo_n "checking for ut_user in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_USER+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_USER+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21054,7 +20959,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_id in utmp" >&5
 $as_echo_n "checking for ut_id in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_ID+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_ID+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21087,7 +20992,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_host in utmp" >&5
 $as_echo_n "checking for ut_host in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_HOST+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_HOST+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21120,7 +21025,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_time in utmp" >&5
 $as_echo_n "checking for ut_time in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_TIME+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_TIME+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21153,7 +21058,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_tv in utmp" >&5
 $as_echo_n "checking for ut_tv in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_TV+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_TV+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21186,7 +21091,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_type in utmp" >&5
 $as_echo_n "checking for ut_type in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_TYPE+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_TYPE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21219,7 +21124,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_pid in utmp" >&5
 $as_echo_n "checking for ut_pid in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_PID+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_PID+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21252,7 +21157,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_exit in utmp" >&5
 $as_echo_n "checking for ut_exit in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_EXIT+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_EXIT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21285,7 +21190,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_addr_v6 in utmp" >&5
 $as_echo_n "checking for ut_addr_v6 in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_ADDR_V6+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_ADDR_V6+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21318,7 +21223,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_addr in utmp" >&5
 $as_echo_n "checking for ut_addr in utmp... " >&6; }
-if test "${samba_cv_HAVE_UT_UT_ADDR+set}" = set; then :
+if ${samba_cv_HAVE_UT_UT_ADDR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21352,7 +21257,7 @@
 if test x$ac_cv_func_pututline = xyes ; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether pututline returns pointer" >&5
 $as_echo_n "checking whether pututline returns pointer... " >&6; }
-if test "${samba_cv_PUTUTLINE_RETURNS_UTMP+set}" = set; then :
+if ${samba_cv_PUTUTLINE_RETURNS_UTMP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21386,7 +21291,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ut_syslen in utmpx" >&5
 $as_echo_n "checking for ut_syslen in utmpx... " >&6; }
-if test "${samba_cv_HAVE_UX_UT_SYSLEN+set}" = set; then :
+if ${samba_cv_HAVE_UX_UT_SYSLEN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21427,7 +21332,7 @@
 if test "${with_libiconv+set}" = set; then :
   withval=$with_libiconv;
   if test "$withval" = "no" ; then
-    as_fn_error "argument to --with-libiconv must be a directory" "$LINENO" 5
+    as_fn_error $? "argument to --with-libiconv must be a directory" "$LINENO" 5
   else
      if test "$withval" != "yes" ; then
 	ICONV_PATH_SPEC=yes
@@ -21907,7 +21812,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Linux kernel oplocks" >&5
 $as_echo_n "checking for Linux kernel oplocks... " >&6; }
-if test "${samba_cv_HAVE_KERNEL_OPLOCKS_LINUX+set}" = set; then :
+if ${samba_cv_HAVE_KERNEL_OPLOCKS_LINUX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21948,7 +21853,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for kernel change notify support" >&5
 $as_echo_n "checking for kernel change notify support... " >&6; }
-if test "${samba_cv_HAVE_KERNEL_CHANGE_NOTIFY+set}" = set; then :
+if ${samba_cv_HAVE_KERNEL_CHANGE_NOTIFY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21989,7 +21894,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for inotify support" >&5
 $as_echo_n "checking for inotify support... " >&6; }
-if test "${samba_cv_HAVE_INOTIFY+set}" = set; then :
+if ${samba_cv_HAVE_INOTIFY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -21997,8 +21902,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -22010,7 +21914,7 @@
 for ac_func in inotify_init
 do :
   ac_fn_c_check_func "$LINENO" "inotify_init" "ac_cv_func_inotify_init"
-if test "x$ac_cv_func_inotify_init" = x""yes; then :
+if test "x$ac_cv_func_inotify_init" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_INOTIFY_INIT 1
 _ACEOF
@@ -22021,7 +21925,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __NR_inotify_init declaration" >&5
 $as_echo_n "checking for __NR_inotify_init declaration... " >&6; }
-if test "${ac_cv_have___NR_inotify_init_decl+set}" = set; then :
+if ${ac_cv_have___NR_inotify_init_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22076,7 +21980,7 @@
     for ac_header in fam.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "fam.h" "ac_cv_header_fam_h" "$ac_includes_default"
-if test "x$ac_cv_header_fam_h" = x""yes; then :
+if test "x$ac_cv_header_fam_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_FAM_H 1
 _ACEOF
@@ -22092,7 +21996,7 @@
 	# might not need it.
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for FAMOpen2 in -lfam" >&5
 $as_echo_n "checking for FAMOpen2 in -lfam... " >&6; }
-if test "${ac_cv_lib_fam_FAMOpen2+set}" = set; then :
+if ${ac_cv_lib_fam_FAMOpen2+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22126,7 +22030,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_fam_FAMOpen2" >&5
 $as_echo "$ac_cv_lib_fam_FAMOpen2" >&6; }
-if test "x$ac_cv_lib_fam_FAMOpen2" = x""yes; then :
+if test "x$ac_cv_lib_fam_FAMOpen2" = xyes; then :
   samba_cv_HAVE_LIBFAM=yes; SMB_FAM_LIBS="-lfam"
 else
   samba_cv_HAVE_LIBFAM=no
@@ -22144,7 +22048,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for FAMOpen2 in -lfam" >&5
 $as_echo_n "checking for FAMOpen2 in -lfam... " >&6; }
-if test "${ac_cv_lib_ext_fam_FAMOpen2+set}" = set; then :
+if ${ac_cv_lib_ext_fam_FAMOpen2+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -22219,7 +22123,7 @@
     fi
 
     if test x$enable_fam = xyes && test x"$samba_cv_HAVE_LIBFAM" != xyes ; then
-        as_fn_error "FAM support requested but FAM library not available " "$LINENO" 5
+        as_fn_error $? "FAM support requested but FAM library not available " "$LINENO" 5
     fi
 fi
 
@@ -22253,7 +22157,7 @@
     if test x"$samba_dmapi_libs" = x"" ; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dm_get_eventlist in -ldm" >&5
 $as_echo_n "checking for dm_get_eventlist in -ldm... " >&6; }
-if test "${ac_cv_lib_dm_dm_get_eventlist+set}" = set; then :
+if ${ac_cv_lib_dm_dm_get_eventlist+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22287,7 +22191,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dm_dm_get_eventlist" >&5
 $as_echo "$ac_cv_lib_dm_dm_get_eventlist" >&6; }
-if test "x$ac_cv_lib_dm_dm_get_eventlist" = x""yes; then :
+if test "x$ac_cv_lib_dm_dm_get_eventlist" = xyes; then :
    samba_dmapi_libs="-ldm"
 fi
 
@@ -22296,7 +22200,7 @@
     if test x"$samba_dmapi_libs" = x"" ; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dm_get_eventlist in -ljfsdm" >&5
 $as_echo_n "checking for dm_get_eventlist in -ljfsdm... " >&6; }
-if test "${ac_cv_lib_jfsdm_dm_get_eventlist+set}" = set; then :
+if ${ac_cv_lib_jfsdm_dm_get_eventlist+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22330,7 +22234,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_jfsdm_dm_get_eventlist" >&5
 $as_echo "$ac_cv_lib_jfsdm_dm_get_eventlist" >&6; }
-if test "x$ac_cv_lib_jfsdm_dm_get_eventlist" = x""yes; then :
+if test "x$ac_cv_lib_jfsdm_dm_get_eventlist" = xyes; then :
   samba_dmapi_libs="-ljfsdm"
 fi
 
@@ -22339,7 +22243,7 @@
     if test x"$samba_dmapi_libs" = x"" ; then
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dm_get_eventlist in -ldmapi" >&5
 $as_echo_n "checking for dm_get_eventlist in -ldmapi... " >&6; }
-if test "${ac_cv_lib_dmapi_dm_get_eventlist+set}" = set; then :
+if ${ac_cv_lib_dmapi_dm_get_eventlist+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22373,7 +22277,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dmapi_dm_get_eventlist" >&5
 $as_echo "$ac_cv_lib_dmapi_dm_get_eventlist" >&6; }
-if test "x$ac_cv_lib_dmapi_dm_get_eventlist" = x""yes; then :
+if test "x$ac_cv_lib_dmapi_dm_get_eventlist" = xyes; then :
   samba_dmapi_libs="-ldmapi"
 fi
 
@@ -22382,7 +22286,7 @@
     if test x"$samba_dmapi_libs" = x"" ; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for dm_get_eventlist in -lxdsm" >&5
 $as_echo_n "checking for dm_get_eventlist in -lxdsm... " >&6; }
-if test "${ac_cv_lib_xdsm_dm_get_eventlist+set}" = set; then :
+if ${ac_cv_lib_xdsm_dm_get_eventlist+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22416,7 +22320,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_xdsm_dm_get_eventlist" >&5
 $as_echo "$ac_cv_lib_xdsm_dm_get_eventlist" >&6; }
-if test "x$ac_cv_lib_xdsm_dm_get_eventlist" = x""yes; then :
+if test "x$ac_cv_lib_xdsm_dm_get_eventlist" = xyes; then :
   samba_dmapi_libs="-lxdsm"
 fi
 
@@ -22429,8 +22333,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -22501,7 +22404,7 @@
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: DMAPI support not present" >&5
 $as_echo "$as_me: DMAPI support not present" >&6;}
 		if test x"$with_dmapi_support" = xyes ; then
-			as_fn_error "no DMAPI support found but requested!" "$LINENO" 5
+			as_fn_error $? "no DMAPI support found but requested!" "$LINENO" 5
 		fi
 
 
@@ -22530,7 +22433,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for kernel share modes" >&5
 $as_echo_n "checking for kernel share modes... " >&6; }
-if test "${samba_cv_HAVE_KERNEL_SHARE_MODES+set}" = set; then :
+if ${samba_cv_HAVE_KERNEL_SHARE_MODES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22574,7 +22477,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IRIX kernel oplock type definitions" >&5
 $as_echo_n "checking for IRIX kernel oplock type definitions... " >&6; }
-if test "${samba_cv_HAVE_KERNEL_OPLOCKS_IRIX+set}" = set; then :
+if ${samba_cv_HAVE_KERNEL_OPLOCKS_IRIX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22609,7 +22512,7 @@
 # Check for POSIX capability support
 
 ac_fn_c_check_header_mongrel "$LINENO" "sys/capability.h" "ac_cv_header_sys_capability_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_capability_h" = x""yes; then :
+if test "x$ac_cv_header_sys_capability_h" = xyes; then :
   samba_cv_HAVE_SYS_CAPABILITY_H=yes;
 
 $as_echo "#define HAVE_SYS_CAPABILITY_H 1" >>confdefs.h
@@ -22625,7 +22528,7 @@
   for ac_func in cap_get_proc
 do :
   ac_fn_c_check_func "$LINENO" "cap_get_proc" "ac_cv_func_cap_get_proc"
-if test "x$ac_cv_func_cap_get_proc" = x""yes; then :
+if test "x$ac_cv_func_cap_get_proc" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_CAP_GET_PROC 1
 _ACEOF
@@ -22652,7 +22555,7 @@
 	    # cap_get_proc was not found, try adding libcap
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for cap_get_proc in -lcap" >&5
 $as_echo_n "checking for cap_get_proc in -lcap... " >&6; }
-if test "${ac_cv_lib_cap_cap_get_proc+set}" = set; then :
+if ${ac_cv_lib_cap_cap_get_proc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -22686,7 +22589,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_cap_cap_get_proc" >&5
 $as_echo "$ac_cv_lib_cap_cap_get_proc" >&6; }
-if test "x$ac_cv_lib_cap_cap_get_proc" = x""yes; then :
+if test "x$ac_cv_lib_cap_cap_get_proc" = xyes; then :
 
 		LIBS="-lcap $LIBS"
 
@@ -22715,7 +22618,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for POSIX capabilities" >&5
 $as_echo_n "checking for POSIX capabilities... " >&6; }
-if test "${samba_cv_HAVE_POSIX_CAPABILITIES+set}" = set; then :
+if ${samba_cv_HAVE_POSIX_CAPABILITIES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22769,7 +22672,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for int16 typedef included by rpc/rpc.h" >&5
 $as_echo_n "checking for int16 typedef included by rpc/rpc.h... " >&6; }
-if test "${samba_cv_HAVE_INT16_FROM_RPC_RPC_H+set}" = set; then :
+if ${samba_cv_HAVE_INT16_FROM_RPC_RPC_H+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22804,7 +22707,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uint16 typedef included by rpc/rpc.h" >&5
 $as_echo_n "checking for uint16 typedef included by rpc/rpc.h... " >&6; }
-if test "${samba_cv_HAVE_UINT16_FROM_RPC_RPC_H+set}" = set; then :
+if ${samba_cv_HAVE_UINT16_FROM_RPC_RPC_H+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22839,7 +22742,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for int32 typedef included by rpc/rpc.h" >&5
 $as_echo_n "checking for int32 typedef included by rpc/rpc.h... " >&6; }
-if test "${samba_cv_HAVE_INT32_FROM_RPC_RPC_H+set}" = set; then :
+if ${samba_cv_HAVE_INT32_FROM_RPC_RPC_H+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22874,7 +22777,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uint32 typedef included by rpc/rpc.h" >&5
 $as_echo_n "checking for uint32 typedef included by rpc/rpc.h... " >&6; }
-if test "${samba_cv_HAVE_UINT32_FROM_RPC_RPC_H+set}" = set; then :
+if ${samba_cv_HAVE_UINT32_FROM_RPC_RPC_H+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22910,7 +22813,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for conflicting AUTH_ERROR define in rpc/rpc.h" >&5
 $as_echo_n "checking for conflicting AUTH_ERROR define in rpc/rpc.h... " >&6; }
-if test "${samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT+set}" = set; then :
+if ${samba_cv_HAVE_RPC_AUTH_ERROR_CONFLICT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -22961,7 +22864,7 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 else
-  as_fn_error "cant find test code. Aborting config" "$LINENO" 5
+  as_fn_error $? "cant find test code. Aborting config" "$LINENO" 5
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
@@ -22970,7 +22873,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ftruncate extend" >&5
 $as_echo_n "checking for ftruncate extend... " >&6; }
-if test "${samba_cv_HAVE_FTRUNCATE_EXTEND+set}" = set; then :
+if ${samba_cv_HAVE_FTRUNCATE_EXTEND+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23001,7 +22904,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken getgroups" >&5
 $as_echo_n "checking for broken getgroups... " >&6; }
-if test "${samba_cv_HAVE_BROKEN_GETGROUPS+set}" = set; then :
+if ${samba_cv_HAVE_BROKEN_GETGROUPS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23033,7 +22936,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysconf(_SC_NGROUPS_MAX)" >&5
 $as_echo_n "checking for sysconf(_SC_NGROUPS_MAX)... " >&6; }
-if test "${samba_cv_SYSCONF_SC_NGROUPS_MAX+set}" = set; then :
+if ${samba_cv_SYSCONF_SC_NGROUPS_MAX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23069,7 +22972,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysconf(_SC_NPROC_ONLN)" >&5
 $as_echo_n "checking for sysconf(_SC_NPROC_ONLN)... " >&6; }
-if test "${samba_cv_SYSCONF_SC_NPROC_ONLN+set}" = set; then :
+if ${samba_cv_SYSCONF_SC_NPROC_ONLN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23105,7 +23008,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysconf(_SC_NPROCESSORS_ONLN)" >&5
 $as_echo_n "checking for sysconf(_SC_NPROCESSORS_ONLN)... " >&6; }
-if test "${samba_cv_SYSCONF_SC_NPROCESSORS_ONLN+set}" = set; then :
+if ${samba_cv_SYSCONF_SC_NPROCESSORS_ONLN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23141,7 +23044,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sysconf(_SC_PAGESIZE)" >&5
 $as_echo_n "checking for sysconf(_SC_PAGESIZE)... " >&6; }
-if test "${samba_cv_SYSCONF_SC_PAGESIZE+set}" = set; then :
+if ${samba_cv_SYSCONF_SC_PAGESIZE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23177,7 +23080,7 @@
 for ac_func in getpagesize
 do :
   ac_fn_c_check_func "$LINENO" "getpagesize" "ac_cv_func_getpagesize"
-if test "x$ac_cv_func_getpagesize" = x""yes; then :
+if test "x$ac_cv_func_getpagesize" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GETPAGESIZE 1
 _ACEOF
@@ -23193,7 +23096,7 @@
 if test $seteuid = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setreuid" >&5
 $as_echo_n "checking for setreuid... " >&6; }
-if test "${samba_cv_USE_SETREUID+set}" = set; then :
+if ${samba_cv_USE_SETREUID+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23232,7 +23135,7 @@
 if test $seteuid = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setresuid" >&5
 $as_echo_n "checking for setresuid... " >&6; }
-if test "${samba_cv_USE_SETRESUID+set}" = set; then :
+if ${samba_cv_USE_SETRESUID+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23269,7 +23172,7 @@
 if test $seteuid = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for seteuid" >&5
 $as_echo_n "checking for seteuid... " >&6; }
-if test "${samba_cv_USE_SETEUID+set}" = set; then :
+if ${samba_cv_USE_SETEUID+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23306,7 +23209,7 @@
 if test $seteuid = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setuidx" >&5
 $as_echo_n "checking for setuidx... " >&6; }
-if test "${samba_cv_USE_SETUIDX+set}" = set; then :
+if ${samba_cv_USE_SETUIDX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23342,7 +23245,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for the Darwin initgroups system call" >&5
 $as_echo_n "checking for the Darwin initgroups system call... " >&6; }
-if test "${samba_cv_DARWIN_INITGROUPS+set}" = set; then :
+if ${samba_cv_DARWIN_INITGROUPS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -23379,7 +23282,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for fcntl locking" >&5
 $as_echo_n "checking for fcntl locking... " >&6; }
-if test "${samba_cv_HAVE_FCNTL_LOCK+set}" = set; then :
+if ${samba_cv_HAVE_FCNTL_LOCK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23410,7 +23313,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken (glibc2.1/x86) 64 bit fcntl locking" >&5
 $as_echo_n "checking for broken (glibc2.1/x86) 64 bit fcntl locking... " >&6; }
-if test "${samba_cv_HAVE_BROKEN_FCNTL64_LOCKS+set}" = set; then :
+if ${samba_cv_HAVE_BROKEN_FCNTL64_LOCKS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23443,7 +23346,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 64 bit fcntl locking" >&5
 $as_echo_n "checking for 64 bit fcntl locking... " >&6; }
-if test "${samba_cv_HAVE_STRUCT_FLOCK64+set}" = set; then :
+if ${samba_cv_HAVE_STRUCT_FLOCK64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23497,7 +23400,7 @@
 # glibc up to 2.3.6 had dangerously broken posix_fallocate(). DON'T USE IT.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken posix_fallocate" >&5
 $as_echo_n "checking for broken posix_fallocate... " >&6; }
-if test "${samba_cv_HAVE_BROKEN_POSIX_FALLOCATE+set}" = set; then :
+if ${samba_cv_HAVE_BROKEN_POSIX_FALLOCATE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23537,7 +23440,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for st_blocks in struct stat" >&5
 $as_echo_n "checking for st_blocks in struct stat... " >&6; }
-if test "${samba_cv_HAVE_STAT_ST_BLOCKS+set}" = set; then :
+if ${samba_cv_HAVE_STAT_ST_BLOCKS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23571,7 +23474,7 @@
 
 ac_fn_c_check_type "$LINENO" "blksize_t" "ac_cv_type_blksize_t" "#include <sys/stat.h>
 "
-if test "x$ac_cv_type_blksize_t" = x""yes; then :
+if test "x$ac_cv_type_blksize_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_BLKSIZE_T 1
@@ -23581,7 +23484,7 @@
 fi
 ac_fn_c_check_type "$LINENO" "blkcnt_t" "ac_cv_type_blkcnt_t" "#include <sys/stat.h>
 "
-if test "x$ac_cv_type_blkcnt_t" = x""yes; then :
+if test "x$ac_cv_type_blkcnt_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_BLKCNT_T 1
@@ -23593,7 +23496,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for st_blksize in struct stat" >&5
 $as_echo_n "checking for st_blksize in struct stat... " >&6; }
-if test "${samba_cv_HAVE_STAT_ST_BLKSIZE+set}" = set; then :
+if ${samba_cv_HAVE_STAT_ST_BLKSIZE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23627,7 +23530,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for st_flags in struct stat" >&5
 $as_echo_n "checking for st_flags in struct stat... " >&6; }
-if test "${samba_cv_HAVE_STAT_ST_FLAGS+set}" = set; then :
+if ${samba_cv_HAVE_STAT_ST_FLAGS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23663,7 +23566,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken nisplus include files" >&5
 $as_echo_n "checking for broken nisplus include files... " >&6; }
-if test "${samba_cv_BROKEN_NISPLUS_INCLUDE_FILES+set}" = set; then :
+if ${samba_cv_BROKEN_NISPLUS_INCLUDE_FILES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23700,7 +23603,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the realpath function allows a NULL argument" >&5
 $as_echo_n "checking if the realpath function allows a NULL argument... " >&6; }
-if test "${samba_cv_REALPATH_TAKES_NULL+set}" = set; then :
+if ${samba_cv_REALPATH_TAKES_NULL+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -23804,7 +23707,7 @@
     # see if this box has the OpenSSL DES libraries
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DES_pcbc_encrypt in -lcrypto" >&5
 $as_echo_n "checking for DES_pcbc_encrypt in -lcrypto... " >&6; }
-if test "${ac_cv_lib_crypto_DES_pcbc_encrypt+set}" = set; then :
+if ${ac_cv_lib_crypto_DES_pcbc_encrypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -23838,10 +23741,10 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypto_DES_pcbc_encrypt" >&5
 $as_echo "$ac_cv_lib_crypto_DES_pcbc_encrypt" >&6; }
-if test "x$ac_cv_lib_crypto_DES_pcbc_encrypt" = x""yes; then :
+if test "x$ac_cv_lib_crypto_DES_pcbc_encrypt" = xyes; then :
   LIBS="$LIBS -lcrypto"
 else
-  as_fn_error "OpenSSL library: libcrypto ot found!" "$LINENO" 5
+  as_fn_error $? "OpenSSL library: libcrypto ot found!" "$LINENO" 5
 fi
 
 
@@ -23862,8 +23765,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -23878,7 +23780,7 @@
 	    	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: AFS cannot be supported without afs.h" >&5
 $as_echo "$as_me: WARNING: AFS cannot be supported without afs.h" >&2;}
 	else
-	    	as_fn_error "AFS cannot be supported without afs.h" "$LINENO" 5
+	    	as_fn_error $? "AFS cannot be supported without afs.h" "$LINENO" 5
 	fi
     else
     	have_afs_headers=yes
@@ -23994,8 +23896,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -24007,7 +23908,7 @@
 
   if test x"$ac_cv_header_ldap_h" != x"yes"; then
 	if test x"$with_ldap_support" = x"yes"; then
-	 as_fn_error "ldap.h is needed for LDAP support" "$LINENO" 5
+	 as_fn_error $? "ldap.h is needed for LDAP support" "$LINENO" 5
 	else
 	 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: ldap.h is needed for LDAP support" >&5
 $as_echo "$as_me: WARNING: ldap.h is needed for LDAP support" >&2;}
@@ -24030,13 +23931,13 @@
 	*)
   	ac_fn_c_check_type "$LINENO" "ber_tag_t" "ac_cv_type_ber_tag_t" "#include <lber.h>
 "
-if test "x$ac_cv_type_ber_tag_t" = x""yes; then :
+if test "x$ac_cv_type_ber_tag_t" = xyes; then :
 
 fi
 
   	if test x"$ac_cv_type_ber_tag_t" != x"yes"; then
 		if test x"$with_ldap_support" = x"yes"; then
-	 	as_fn_error "ber_tag_t is needed for LDAP support" "$LINENO" 5
+	 	as_fn_error $? "ber_tag_t is needed for LDAP support" "$LINENO" 5
 		else
 	 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: ber_tag_t is needed for LDAP support" >&5
 $as_echo "$as_me: WARNING: ber_tag_t is needed for LDAP support" >&2;}
@@ -24062,7 +23963,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ber_scanf in -llber" >&5
 $as_echo_n "checking for ber_scanf in -llber... " >&6; }
-if test "${ac_cv_lib_ext_lber_ber_scanf+set}" = set; then :
+if ${ac_cv_lib_ext_lber_ber_scanf+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24129,7 +24030,7 @@
     LIBS="$LDAP_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ber_sockbuf_add_io" >&5
 $as_echo_n "checking for ber_sockbuf_add_io... " >&6; }
-if test "${ac_cv_func_ext_ber_sockbuf_add_io+set}" = set; then :
+if ${ac_cv_func_ext_ber_sockbuf_add_io+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24193,7 +24094,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LDAP_OPT_SOCKBUF" >&5
 $as_echo_n "checking for LDAP_OPT_SOCKBUF... " >&6; }
-if test "${samba_cv_HAVE_LDAP_OPT_SOCKBUF+set}" = set; then :
+if ${samba_cv_HAVE_LDAP_OPT_SOCKBUF+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -24230,7 +24131,7 @@
   # ldap logging and print it out in the samba logs
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LBER_OPT_LOG_PRINT_FN" >&5
 $as_echo_n "checking for LBER_OPT_LOG_PRINT_FN... " >&6; }
-if test "${samba_cv_HAVE_LBER_OPT_LOG_PRINT_FN+set}" = set; then :
+if ${samba_cv_HAVE_LBER_OPT_LOG_PRINT_FN+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24271,7 +24172,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_init in -lldap" >&5
 $as_echo_n "checking for ldap_init in -lldap... " >&6; }
-if test "${ac_cv_lib_ext_ldap_ldap_init+set}" = set; then :
+if ${ac_cv_lib_ext_ldap_ldap_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24338,7 +24239,7 @@
     LIBS="$LDAP_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_set_rebind_proc" >&5
 $as_echo_n "checking for ldap_set_rebind_proc... " >&6; }
-if test "${ac_cv_func_ext_ldap_set_rebind_proc+set}" = set; then :
+if ${ac_cv_func_ext_ldap_set_rebind_proc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24403,7 +24304,7 @@
   LIBS="$LIBS $LDAP_LIBS"
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ldap_set_rebind_proc takes 3 arguments" >&5
 $as_echo_n "checking whether ldap_set_rebind_proc takes 3 arguments... " >&6; }
-if test "${smb_ldap_cv_ldap_set_rebind_proc+set}" = set; then :
+if ${smb_ldap_cv_ldap_set_rebind_proc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -24444,7 +24345,7 @@
     LIBS="$LDAP_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_initialize" >&5
 $as_echo_n "checking for ldap_initialize... " >&6; }
-if test "${ac_cv_func_ext_ldap_initialize+set}" = set; then :
+if ${ac_cv_func_ext_ldap_initialize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24522,7 +24423,7 @@
 $as_echo "yes" >&6; }
   else
     if test x"$with_ldap_support" = x"yes"; then
-	as_fn_error "libldap is needed for LDAP support" "$LINENO" 5
+	as_fn_error $? "libldap is needed for LDAP support" "$LINENO" 5
     else
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libldap is needed for LDAP support" >&5
 $as_echo "$as_me: WARNING: libldap is needed for LDAP support" >&2;}
@@ -24562,7 +24463,7 @@
 if test x"$with_ldap_support" != x"yes"; then
 
     if test x"$with_ads_support" = x"yes"; then
-	as_fn_error "Active Directory Support requires LDAP support" "$LINENO" 5
+	as_fn_error $? "Active Directory Support requires LDAP support" "$LINENO" 5
     elif test x"$with_ads_support" = x"auto"; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Disabling Active Directory support (requires LDAP support)" >&5
 $as_echo "$as_me: WARNING: Disabling Active Directory support (requires LDAP support)" >&2;}
@@ -24583,7 +24484,7 @@
     LIBS="$LDAP_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_init" >&5
 $as_echo_n "checking for ldap_init... " >&6; }
-if test "${ac_cv_func_ext_ldap_init+set}" = set; then :
+if ${ac_cv_func_ext_ldap_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24647,7 +24548,7 @@
 
     if test x"$ac_cv_func_ext_ldap_init" != x"yes"; then
 	if test x"$with_ads_support" = x"yes"; then
-	    as_fn_error "Active Directory support on HPUX requires ldap_init" "$LINENO" 5
+	    as_fn_error $? "Active Directory support on HPUX requires ldap_init" "$LINENO" 5
 	elif test x"$with_ads_support" = x"auto"; then
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Disabling Active Directory support (requires ldap_init on HPUX)" >&5
 $as_echo "$as_me: WARNING: Disabling Active Directory support (requires ldap_init on HPUX)" >&2;}
@@ -24662,7 +24563,7 @@
     LIBS="$LDAP_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_initialize" >&5
 $as_echo_n "checking for ldap_initialize... " >&6; }
-if test "${ac_cv_func_ext_ldap_initialize+set}" = set; then :
+if ${ac_cv_func_ext_ldap_initialize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24726,7 +24627,7 @@
 
     if test x"$ac_cv_func_ext_ldap_initialize" != x"yes"; then
 	if test x"$with_ads_support" = x"yes"; then
-	    as_fn_error "Active Directory support requires ldap_initialize" "$LINENO" 5
+	    as_fn_error $? "Active Directory support requires ldap_initialize" "$LINENO" 5
 	elif test x"$with_ads_support" = x"auto"; then
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Disabling Active Directory support (requires ldap_initialize)" >&5
 $as_echo "$as_me: WARNING: Disabling Active Directory support (requires ldap_initialize)" >&2;}
@@ -24743,7 +24644,7 @@
     LIBS="$LDAP_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ldap_add_result_entry" >&5
 $as_echo_n "checking for ldap_add_result_entry... " >&6; }
-if test "${ac_cv_func_ext_ldap_add_result_entry+set}" = set; then :
+if ${ac_cv_func_ext_ldap_add_result_entry+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -24807,7 +24708,7 @@
 
     if test x"$ac_cv_func_ext_ldap_add_result_entry" != x"yes"; then
 	if test x"$with_ads_support" = x"yes"; then
-	    as_fn_error "Active Directory support requires ldap_add_result_entry" "$LINENO" 5
+	    as_fn_error $? "Active Directory support requires ldap_add_result_entry" "$LINENO" 5
 	elif test x"$with_ads_support" = x"auto"; then
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Disabling Active Directory support (requires ldap_add_result_entry)" >&5
 $as_echo "$as_me: WARNING: Disabling Active Directory support (requires ldap_add_result_entry)" >&2;}
@@ -24866,7 +24767,7 @@
 set dummy krb5-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_KRB5CONFIG+set}" = set; then :
+if ${ac_cv_path_KRB5CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $KRB5CONFIG in
@@ -25069,7 +24970,7 @@
   for ac_header in krb5.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "krb5.h" "ac_cv_header_krb5_h" "$ac_includes_default"
-if test "x$ac_cv_header_krb5_h" = x""yes; then :
+if test "x$ac_cv_header_krb5_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_KRB5_H 1
 _ACEOF
@@ -25085,7 +24986,7 @@
     # i.e with_ads_support = auto, otherwise die with an error.
 
     if test x"$with_ads_support" = x"yes"; then
-      as_fn_error "Active Directory cannot be supported without krb5.h" "$LINENO" 5
+      as_fn_error $? "Active Directory cannot be supported without krb5.h" "$LINENO" 5
     else
       { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Active Directory cannot be supported without krb5.h" >&5
 $as_echo "$as_me: WARNING: Active Directory cannot be supported without krb5.h" >&2;}
@@ -25106,7 +25007,7 @@
  #endif
 
 "
-if test "x$ac_cv_header_krb5_locate_plugin_h" = x""yes; then :
+if test "x$ac_cv_header_krb5_locate_plugin_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_KRB5_LOCATE_PLUGIN_H 1
 _ACEOF
@@ -25127,7 +25028,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for KRB5_DEPRECATED define taking an identifier" >&5
 $as_echo_n "checking for KRB5_DEPRECATED define taking an identifier... " >&6; }
-if test "${samba_cv_HAVE_KRB5_DEPRECATED_WITH_IDENTIFIER+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_DEPRECATED_WITH_IDENTIFIER+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -25173,8 +25074,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -25195,7 +25095,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _et_list in -lcom_err" >&5
 $as_echo_n "checking for _et_list in -lcom_err... " >&6; }
-if test "${ac_cv_lib_ext_com_err__et_list+set}" = set; then :
+if ${ac_cv_lib_ext_com_err__et_list+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25261,7 +25161,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_encrypt_data in -lk5crypto" >&5
 $as_echo_n "checking for krb5_encrypt_data in -lk5crypto... " >&6; }
-if test "${ac_cv_lib_ext_k5crypto_krb5_encrypt_data+set}" = set; then :
+if ${ac_cv_lib_ext_k5crypto_krb5_encrypt_data+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25329,7 +25229,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for des_set_key in -lcrypto" >&5
 $as_echo_n "checking for des_set_key in -lcrypto... " >&6; }
-if test "${ac_cv_lib_ext_crypto_des_set_key+set}" = set; then :
+if ${ac_cv_lib_ext_crypto_des_set_key+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25395,7 +25295,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for copy_Authenticator in -lasn1" >&5
 $as_echo_n "checking for copy_Authenticator in -lasn1... " >&6; }
-if test "${ac_cv_lib_ext_asn1_copy_Authenticator+set}" = set; then :
+if ${ac_cv_lib_ext_asn1_copy_Authenticator+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25461,7 +25361,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for roken_getaddrinfo_hostspec in -lroken" >&5
 $as_echo_n "checking for roken_getaddrinfo_hostspec in -lroken... " >&6; }
-if test "${ac_cv_lib_ext_roken_roken_getaddrinfo_hostspec+set}" = set; then :
+if ${ac_cv_lib_ext_roken_roken_getaddrinfo_hostspec+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25529,7 +25429,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gss_display_status in -lgssapi" >&5
 $as_echo_n "checking for gss_display_status in -lgssapi... " >&6; }
-if test "${ac_cv_lib_ext_gssapi_gss_display_status+set}" = set; then :
+if ${ac_cv_lib_ext_gssapi_gss_display_status+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25599,7 +25499,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_mk_req_extended in -lkrb5" >&5
 $as_echo_n "checking for krb5_mk_req_extended in -lkrb5... " >&6; }
-if test "${ac_cv_lib_ext_krb5_krb5_mk_req_extended+set}" = set; then :
+if ${ac_cv_lib_ext_krb5_krb5_mk_req_extended+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25665,7 +25565,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_kt_compare in -lkrb5" >&5
 $as_echo_n "checking for krb5_kt_compare in -lkrb5... " >&6; }
-if test "${ac_cv_lib_ext_krb5_krb5_kt_compare+set}" = set; then :
+if ${ac_cv_lib_ext_krb5_krb5_kt_compare+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25735,7 +25635,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gss_display_status in -lgssapi_krb5" >&5
 $as_echo_n "checking for gss_display_status in -lgssapi_krb5... " >&6; }
-if test "${ac_cv_lib_ext_gssapi_krb5_gss_display_status+set}" = set; then :
+if ${ac_cv_lib_ext_gssapi_krb5_gss_display_status+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25800,7 +25700,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_set_real_time" >&5
 $as_echo_n "checking for krb5_set_real_time... " >&6; }
-if test "${ac_cv_func_ext_krb5_set_real_time+set}" = set; then :
+if ${ac_cv_func_ext_krb5_set_real_time+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25867,7 +25767,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_set_default_in_tkt_etypes" >&5
 $as_echo_n "checking for krb5_set_default_in_tkt_etypes... " >&6; }
-if test "${ac_cv_func_ext_krb5_set_default_in_tkt_etypes+set}" = set; then :
+if ${ac_cv_func_ext_krb5_set_default_in_tkt_etypes+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -25934,7 +25834,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_set_default_tgs_enctypes" >&5
 $as_echo_n "checking for krb5_set_default_tgs_enctypes... " >&6; }
-if test "${ac_cv_func_ext_krb5_set_default_tgs_enctypes+set}" = set; then :
+if ${ac_cv_func_ext_krb5_set_default_tgs_enctypes+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26001,7 +25901,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_set_default_tgs_ktypes" >&5
 $as_echo_n "checking for krb5_set_default_tgs_ktypes... " >&6; }
-if test "${ac_cv_func_ext_krb5_set_default_tgs_ktypes+set}" = set; then :
+if ${ac_cv_func_ext_krb5_set_default_tgs_ktypes+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26068,7 +25968,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_principal2salt" >&5
 $as_echo_n "checking for krb5_principal2salt... " >&6; }
-if test "${ac_cv_func_ext_krb5_principal2salt+set}" = set; then :
+if ${ac_cv_func_ext_krb5_principal2salt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26135,7 +26035,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_use_enctype" >&5
 $as_echo_n "checking for krb5_use_enctype... " >&6; }
-if test "${ac_cv_func_ext_krb5_use_enctype+set}" = set; then :
+if ${ac_cv_func_ext_krb5_use_enctype+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26202,7 +26102,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_string_to_key" >&5
 $as_echo_n "checking for krb5_string_to_key... " >&6; }
-if test "${ac_cv_func_ext_krb5_string_to_key+set}" = set; then :
+if ${ac_cv_func_ext_krb5_string_to_key+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26269,7 +26169,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_pw_salt" >&5
 $as_echo_n "checking for krb5_get_pw_salt... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_pw_salt+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_pw_salt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26336,7 +26236,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_string_to_key_salt" >&5
 $as_echo_n "checking for krb5_string_to_key_salt... " >&6; }
-if test "${ac_cv_func_ext_krb5_string_to_key_salt+set}" = set; then :
+if ${ac_cv_func_ext_krb5_string_to_key_salt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26403,7 +26303,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_auth_con_setkey" >&5
 $as_echo_n "checking for krb5_auth_con_setkey... " >&6; }
-if test "${ac_cv_func_ext_krb5_auth_con_setkey+set}" = set; then :
+if ${ac_cv_func_ext_krb5_auth_con_setkey+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26470,7 +26370,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_auth_con_setuseruserkey" >&5
 $as_echo_n "checking for krb5_auth_con_setuseruserkey... " >&6; }
-if test "${ac_cv_func_ext_krb5_auth_con_setuseruserkey+set}" = set; then :
+if ${ac_cv_func_ext_krb5_auth_con_setuseruserkey+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26537,7 +26437,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_locate_kdc" >&5
 $as_echo_n "checking for krb5_locate_kdc... " >&6; }
-if test "${ac_cv_func_ext_krb5_locate_kdc+set}" = set; then :
+if ${ac_cv_func_ext_krb5_locate_kdc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26604,7 +26504,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_permitted_enctypes" >&5
 $as_echo_n "checking for krb5_get_permitted_enctypes... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_permitted_enctypes+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_permitted_enctypes+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26671,7 +26571,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_default_in_tkt_etypes" >&5
 $as_echo_n "checking for krb5_get_default_in_tkt_etypes... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_default_in_tkt_etypes+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_default_in_tkt_etypes+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26738,7 +26638,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_free_data_contents" >&5
 $as_echo_n "checking for krb5_free_data_contents... " >&6; }
-if test "${ac_cv_func_ext_krb5_free_data_contents+set}" = set; then :
+if ${ac_cv_func_ext_krb5_free_data_contents+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26805,7 +26705,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_principal_get_comp_string" >&5
 $as_echo_n "checking for krb5_principal_get_comp_string... " >&6; }
-if test "${ac_cv_func_ext_krb5_principal_get_comp_string+set}" = set; then :
+if ${ac_cv_func_ext_krb5_principal_get_comp_string+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26872,7 +26772,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_free_unparsed_name" >&5
 $as_echo_n "checking for krb5_free_unparsed_name... " >&6; }
-if test "${ac_cv_func_ext_krb5_free_unparsed_name+set}" = set; then :
+if ${ac_cv_func_ext_krb5_free_unparsed_name+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -26939,7 +26839,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_free_keytab_entry_contents" >&5
 $as_echo_n "checking for krb5_free_keytab_entry_contents... " >&6; }
-if test "${ac_cv_func_ext_krb5_free_keytab_entry_contents+set}" = set; then :
+if ${ac_cv_func_ext_krb5_free_keytab_entry_contents+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27006,7 +26906,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_kt_free_entry" >&5
 $as_echo_n "checking for krb5_kt_free_entry... " >&6; }
-if test "${ac_cv_func_ext_krb5_kt_free_entry+set}" = set; then :
+if ${ac_cv_func_ext_krb5_kt_free_entry+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27073,7 +26973,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_krbhst_init" >&5
 $as_echo_n "checking for krb5_krbhst_init... " >&6; }
-if test "${ac_cv_func_ext_krb5_krbhst_init+set}" = set; then :
+if ${ac_cv_func_ext_krb5_krbhst_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27140,7 +27040,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_krbhst_get_addrinfo" >&5
 $as_echo_n "checking for krb5_krbhst_get_addrinfo... " >&6; }
-if test "${ac_cv_func_ext_krb5_krbhst_get_addrinfo+set}" = set; then :
+if ${ac_cv_func_ext_krb5_krbhst_get_addrinfo+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27207,7 +27107,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_c_enctype_compare" >&5
 $as_echo_n "checking for krb5_c_enctype_compare... " >&6; }
-if test "${ac_cv_func_ext_krb5_c_enctype_compare+set}" = set; then :
+if ${ac_cv_func_ext_krb5_c_enctype_compare+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27274,7 +27174,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_enctypes_compatible_keys" >&5
 $as_echo_n "checking for krb5_enctypes_compatible_keys... " >&6; }
-if test "${ac_cv_func_ext_krb5_enctypes_compatible_keys+set}" = set; then :
+if ${ac_cv_func_ext_krb5_enctypes_compatible_keys+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27341,7 +27241,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_crypto_init" >&5
 $as_echo_n "checking for krb5_crypto_init... " >&6; }
-if test "${ac_cv_func_ext_krb5_crypto_init+set}" = set; then :
+if ${ac_cv_func_ext_krb5_crypto_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27408,7 +27308,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_crypto_destroy" >&5
 $as_echo_n "checking for krb5_crypto_destroy... " >&6; }
-if test "${ac_cv_func_ext_krb5_crypto_destroy+set}" = set; then :
+if ${ac_cv_func_ext_krb5_crypto_destroy+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27475,7 +27375,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_decode_ap_req" >&5
 $as_echo_n "checking for krb5_decode_ap_req... " >&6; }
-if test "${ac_cv_func_ext_krb5_decode_ap_req+set}" = set; then :
+if ${ac_cv_func_ext_krb5_decode_ap_req+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27542,7 +27442,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for free_AP_REQ" >&5
 $as_echo_n "checking for free_AP_REQ... " >&6; }
-if test "${ac_cv_func_ext_free_AP_REQ+set}" = set; then :
+if ${ac_cv_func_ext_free_AP_REQ+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27609,7 +27509,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_verify_checksum" >&5
 $as_echo_n "checking for krb5_verify_checksum... " >&6; }
-if test "${ac_cv_func_ext_krb5_verify_checksum+set}" = set; then :
+if ${ac_cv_func_ext_krb5_verify_checksum+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27676,7 +27576,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_c_verify_checksum" >&5
 $as_echo_n "checking for krb5_c_verify_checksum... " >&6; }
-if test "${ac_cv_func_ext_krb5_c_verify_checksum+set}" = set; then :
+if ${ac_cv_func_ext_krb5_c_verify_checksum+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27743,7 +27643,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_principal_compare_any_realm" >&5
 $as_echo_n "checking for krb5_principal_compare_any_realm... " >&6; }
-if test "${ac_cv_func_ext_krb5_principal_compare_any_realm+set}" = set; then :
+if ${ac_cv_func_ext_krb5_principal_compare_any_realm+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27810,7 +27710,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_parse_name_norealm" >&5
 $as_echo_n "checking for krb5_parse_name_norealm... " >&6; }
-if test "${ac_cv_func_ext_krb5_parse_name_norealm+set}" = set; then :
+if ${ac_cv_func_ext_krb5_parse_name_norealm+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27877,7 +27777,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_princ_size" >&5
 $as_echo_n "checking for krb5_princ_size... " >&6; }
-if test "${ac_cv_func_ext_krb5_princ_size+set}" = set; then :
+if ${ac_cv_func_ext_krb5_princ_size+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -27944,7 +27844,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_init_creds_opt_set_pac_request" >&5
 $as_echo_n "checking for krb5_get_init_creds_opt_set_pac_request... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_init_creds_opt_set_pac_request+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_init_creds_opt_set_pac_request+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28011,7 +27911,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_renewed_creds" >&5
 $as_echo_n "checking for krb5_get_renewed_creds... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_renewed_creds+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_renewed_creds+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28078,7 +27978,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_kdc_cred" >&5
 $as_echo_n "checking for krb5_get_kdc_cred... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_kdc_cred+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_kdc_cred+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28145,7 +28045,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_free_error_contents" >&5
 $as_echo_n "checking for krb5_free_error_contents... " >&6; }
-if test "${ac_cv_func_ext_krb5_free_error_contents+set}" = set; then :
+if ${ac_cv_func_ext_krb5_free_error_contents+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28212,7 +28112,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for initialize_krb5_error_table" >&5
 $as_echo_n "checking for initialize_krb5_error_table... " >&6; }
-if test "${ac_cv_func_ext_initialize_krb5_error_table+set}" = set; then :
+if ${ac_cv_func_ext_initialize_krb5_error_table+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28279,7 +28179,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_init_creds_opt_alloc" >&5
 $as_echo_n "checking for krb5_get_init_creds_opt_alloc... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_init_creds_opt_alloc+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_init_creds_opt_alloc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28346,7 +28246,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_init_creds_opt_free" >&5
 $as_echo_n "checking for krb5_get_init_creds_opt_free... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_init_creds_opt_free+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_init_creds_opt_free+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28413,7 +28313,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_init_creds_opt_get_error" >&5
 $as_echo_n "checking for krb5_get_init_creds_opt_get_error... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_init_creds_opt_get_error+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_init_creds_opt_get_error+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28480,7 +28380,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_enctype_to_string" >&5
 $as_echo_n "checking for krb5_enctype_to_string... " >&6; }
-if test "${ac_cv_func_ext_krb5_enctype_to_string+set}" = set; then :
+if ${ac_cv_func_ext_krb5_enctype_to_string+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28547,7 +28447,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_fwd_tgt_creds" >&5
 $as_echo_n "checking for krb5_fwd_tgt_creds... " >&6; }
-if test "${ac_cv_func_ext_krb5_fwd_tgt_creds+set}" = set; then :
+if ${ac_cv_func_ext_krb5_fwd_tgt_creds+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28614,7 +28514,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_auth_con_set_req_cksumtype" >&5
 $as_echo_n "checking for krb5_auth_con_set_req_cksumtype... " >&6; }
-if test "${ac_cv_func_ext_krb5_auth_con_set_req_cksumtype+set}" = set; then :
+if ${ac_cv_func_ext_krb5_auth_con_set_req_cksumtype+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28681,7 +28581,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_creds_opt_alloc" >&5
 $as_echo_n "checking for krb5_get_creds_opt_alloc... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_creds_opt_alloc+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_creds_opt_alloc+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28748,7 +28648,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_creds_opt_set_impersonate" >&5
 $as_echo_n "checking for krb5_get_creds_opt_set_impersonate... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_creds_opt_set_impersonate+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_creds_opt_set_impersonate+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28815,7 +28715,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_creds" >&5
 $as_echo_n "checking for krb5_get_creds... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_creds+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_creds+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28882,7 +28782,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_credentials_for_user" >&5
 $as_echo_n "checking for krb5_get_credentials_for_user... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_credentials_for_user+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_credentials_for_user+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -28949,7 +28849,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_get_host_realm" >&5
 $as_echo_n "checking for krb5_get_host_realm... " >&6; }
-if test "${ac_cv_func_ext_krb5_get_host_realm+set}" = set; then :
+if ${ac_cv_func_ext_krb5_get_host_realm+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -29016,7 +28916,7 @@
     LIBS="$KRB5_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_free_host_realm" >&5
 $as_echo_n "checking for krb5_free_host_realm... " >&6; }
-if test "${ac_cv_func_ext_krb5_free_host_realm+set}" = set; then :
+if ${ac_cv_func_ext_krb5_free_host_realm+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -29081,7 +28981,7 @@
   # MIT krb5 1.8 does not expose this call (yet)
   ac_fn_c_check_decl "$LINENO" "krb5_get_credentials_for_user" "ac_cv_have_decl_krb5_get_credentials_for_user" "#include <krb5.h>
 "
-if test "x$ac_cv_have_decl_krb5_get_credentials_for_user" = x""yes; then :
+if test "x$ac_cv_have_decl_krb5_get_credentials_for_user" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -29096,7 +28996,7 @@
   # but does have the symbol
   ac_fn_c_check_decl "$LINENO" "krb5_auth_con_set_req_cksumtype" "ac_cv_have_decl_krb5_auth_con_set_req_cksumtype" "#include <krb5.h>
 "
-if test "x$ac_cv_have_decl_krb5_auth_con_set_req_cksumtype" = x""yes; then :
+if test "x$ac_cv_have_decl_krb5_auth_con_set_req_cksumtype" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -29111,7 +29011,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether krb5_ticket contains kvno and enctype" >&5
 $as_echo_n "checking whether krb5_ticket contains kvno and enctype... " >&6; }
-if test "${smb_krb5_cv_ticket_has_keyinfo+set}" = set; then :
+if ${smb_krb5_cv_ticket_has_keyinfo+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29154,7 +29054,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether krb5_get_init_creds_opt_free takes a context argument" >&5
 $as_echo_n "checking whether krb5_get_init_creds_opt_free takes a context argument... " >&6; }
-if test "${smb_krb5_cv_creds_opt_free_context+set}" = set; then :
+if ${smb_krb5_cv_creds_opt_free_context+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29194,7 +29094,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether krb5_verify_checksum takes 7 arguments" >&5
 $as_echo_n "checking whether krb5_verify_checksum takes 7 arguments... " >&6; }
-if test "${smb_krb5_cv_verify_checksum+set}" = set; then :
+if ${smb_krb5_cv_verify_checksum+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29228,7 +29128,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for checksum in krb5_checksum" >&5
 $as_echo_n "checking for checksum in krb5_checksum... " >&6; }
-if test "${samba_cv_HAVE_CHECKSUM_IN_KRB5_CHECKSUM+set}" = set; then :
+if ${samba_cv_HAVE_CHECKSUM_IN_KRB5_CHECKSUM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29261,7 +29161,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for etype in EncryptedData" >&5
 $as_echo_n "checking for etype in EncryptedData... " >&6; }
-if test "${samba_cv_HAVE_ETYPE_IN_ENCRYPTEDDATA+set}" = set; then :
+if ${samba_cv_HAVE_ETYPE_IN_ENCRYPTEDDATA+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29294,7 +29194,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ticket pointer in krb5_ap_req" >&5
 $as_echo_n "checking for ticket pointer in krb5_ap_req... " >&6; }
-if test "${samba_cv_HAVE_TICKET_POINTER_IN_KRB5_AP_REQ+set}" = set; then :
+if ${samba_cv_HAVE_TICKET_POINTER_IN_KRB5_AP_REQ+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29327,7 +29227,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for e_data pointer in krb5_error" >&5
 $as_echo_n "checking for e_data pointer in krb5_error... " >&6; }
-if test "${samba_cv_HAVE_E_DATA_POINTER_IN_KRB5_ERROR+set}" = set; then :
+if ${samba_cv_HAVE_E_DATA_POINTER_IN_KRB5_ERROR+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29360,7 +29260,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_crypto type" >&5
 $as_echo_n "checking for krb5_crypto type... " >&6; }
-if test "${samba_cv_HAVE_KRB5_CRYPTO+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_CRYPTO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29393,7 +29293,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_encrypt_block type" >&5
 $as_echo_n "checking for krb5_encrypt_block type... " >&6; }
-if test "${samba_cv_HAVE_KRB5_ENCRYPT_BLOCK+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_ENCRYPT_BLOCK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29426,7 +29326,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for addrtype in krb5_address" >&5
 $as_echo_n "checking for addrtype in krb5_address... " >&6; }
-if test "${samba_cv_HAVE_ADDRTYPE_IN_KRB5_ADDRESS+set}" = set; then :
+if ${samba_cv_HAVE_ADDRTYPE_IN_KRB5_ADDRESS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29459,7 +29359,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for addr_type in krb5_address" >&5
 $as_echo_n "checking for addr_type in krb5_address... " >&6; }
-if test "${samba_cv_HAVE_ADDR_TYPE_IN_KRB5_ADDRESS+set}" = set; then :
+if ${samba_cv_HAVE_ADDR_TYPE_IN_KRB5_ADDRESS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29492,7 +29392,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for enc_part2 in krb5_ticket" >&5
 $as_echo_n "checking for enc_part2 in krb5_ticket... " >&6; }
-if test "${samba_cv_HAVE_KRB5_TKT_ENC_PART2+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_TKT_ENC_PART2+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -29524,7 +29424,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for keyblock in krb5_creds" >&5
 $as_echo_n "checking for keyblock in krb5_creds... " >&6; }
-if test "${samba_cv_HAVE_KRB5_KEYBLOCK_IN_CREDS+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_KEYBLOCK_IN_CREDS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29557,7 +29457,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for session in krb5_creds" >&5
 $as_echo_n "checking for session in krb5_creds... " >&6; }
-if test "${samba_cv_HAVE_KRB5_SESSION_IN_CREDS+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_SESSION_IN_CREDS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29590,7 +29490,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for keyvalue in krb5_keyblock" >&5
 $as_echo_n "checking for keyvalue in krb5_keyblock... " >&6; }
-if test "${samba_cv_HAVE_KRB5_KEYBLOCK_KEYVALUE+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_KEYBLOCK_KEYVALUE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29623,7 +29523,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ENCTYPE_ARCFOUR_HMAC_MD5" >&5
 $as_echo_n "checking for ENCTYPE_ARCFOUR_HMAC_MD5... " >&6; }
-if test "${samba_cv_HAVE_ENCTYPE_ARCFOUR_HMAC_MD5+set}" = set; then :
+if ${samba_cv_HAVE_ENCTYPE_ARCFOUR_HMAC_MD5+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29649,7 +29549,7 @@
 $as_echo "$samba_cv_HAVE_ENCTYPE_ARCFOUR_HMAC_MD5" >&6; }
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for KEYTYPE_ARCFOUR_56" >&5
 $as_echo_n "checking for KEYTYPE_ARCFOUR_56... " >&6; }
-if test "${samba_cv_HAVE_KEYTYPE_ARCFOUR_56+set}" = set; then :
+if ${samba_cv_HAVE_KEYTYPE_ARCFOUR_56+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29684,7 +29584,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for AP_OPTS_USE_SUBKEY" >&5
 $as_echo_n "checking for AP_OPTS_USE_SUBKEY... " >&6; }
-if test "${samba_cv_HAVE_AP_OPTS_USE_SUBKEY+set}" = set; then :
+if ${samba_cv_HAVE_AP_OPTS_USE_SUBKEY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29717,7 +29617,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for KV5M_KEYTAB" >&5
 $as_echo_n "checking for KV5M_KEYTAB... " >&6; }
-if test "${samba_cv_HAVE_KV5M_KEYTAB+set}" = set; then :
+if ${samba_cv_HAVE_KV5M_KEYTAB+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29750,7 +29650,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for KRB5_KU_OTHER_CKSUM" >&5
 $as_echo_n "checking for KRB5_KU_OTHER_CKSUM... " >&6; }
-if test "${samba_cv_HAVE_KRB5_KU_OTHER_CKSUM+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_KU_OTHER_CKSUM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29783,7 +29683,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for KRB5_KEYUSAGE_APP_DATA_CKSUM" >&5
 $as_echo_n "checking for KRB5_KEYUSAGE_APP_DATA_CKSUM... " >&6; }
-if test "${samba_cv_HAVE_KRB5_KEYUSAGE_APP_DATA_CKSUM+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_KEYUSAGE_APP_DATA_CKSUM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29816,7 +29716,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for the krb5_princ_component macro" >&5
 $as_echo_n "checking for the krb5_princ_component macro... " >&6; }
-if test "${samba_cv_HAVE_KRB5_PRINC_COMPONENT+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_PRINC_COMPONENT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29850,7 +29750,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for key in krb5_keytab_entry" >&5
 $as_echo_n "checking for key in krb5_keytab_entry... " >&6; }
-if test "${samba_cv_HAVE_KRB5_KEYTAB_ENTRY_KEY+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_KEYTAB_ENTRY_KEY+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29883,7 +29783,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for keyblock in krb5_keytab_entry" >&5
 $as_echo_n "checking for keyblock in krb5_keytab_entry... " >&6; }
-if test "${samba_cv_HAVE_KRB5_KEYTAB_ENTRY_KEYBLOCK+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_KEYTAB_ENTRY_KEYBLOCK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29916,7 +29816,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for magic in krb5_address" >&5
 $as_echo_n "checking for magic in krb5_address... " >&6; }
-if test "${samba_cv_HAVE_MAGIC_IN_KRB5_ADDRESS+set}" = set; then :
+if ${samba_cv_HAVE_MAGIC_IN_KRB5_ADDRESS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -29949,15 +29849,15 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for WRFILE: keytab support" >&5
 $as_echo_n "checking for WRFILE: keytab support... " >&6; }
-if test "${samba_cv_HAVE_WRFILE_KEYTAB+set}" = set; then :
+if ${samba_cv_HAVE_WRFILE_KEYTAB+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
     if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -29993,7 +29893,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_realm type" >&5
 $as_echo_n "checking for krb5_realm type... " >&6; }
-if test "${samba_cv_HAVE_KRB5_REALM_TYPE+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_REALM_TYPE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30026,7 +29926,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_princ_realm returns krb5_realm or krb5_data" >&5
 $as_echo_n "checking for krb5_princ_realm returns krb5_realm or krb5_data... " >&6; }
-if test "${samba_cv_KRB5_PRINC_REALM_RETURNS_REALM+set}" = set; then :
+if ${samba_cv_KRB5_PRINC_REALM_RETURNS_REALM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30062,7 +29962,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_addresses type" >&5
 $as_echo_n "checking for krb5_addresses type... " >&6; }
-if test "${samba_cv_HAVE_KRB5_ADDRESSES+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_ADDRESSES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30095,7 +29995,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether krb5_mk_error takes 3 arguments MIT or 9 Heimdal" >&5
 $as_echo_n "checking whether krb5_mk_error takes 3 arguments MIT or 9 Heimdal... " >&6; }
-if test "${samba_cv_HAVE_SHORT_KRB5_MK_ERROR_INTERFACE+set}" = set; then :
+if ${samba_cv_HAVE_SHORT_KRB5_MK_ERROR_INTERFACE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30130,7 +30030,7 @@
   if test x"$ac_cv_func_ext_krb5_enctype_to_string" = x"yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_error_code krb5_enctype_to_string(krb5_context context, krb5_enctype enctype, char **str)" >&5
 $as_echo_n "checking for krb5_error_code krb5_enctype_to_string(krb5_context context, krb5_enctype enctype, char **str)... " >&6; }
-if test "${smb_krb5_cv_enctype_to_string_takes_krb5_context_arg+set}" = set; then :
+if ${smb_krb5_cv_enctype_to_string_takes_krb5_context_arg+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30147,8 +30047,8 @@
 	if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -30195,7 +30095,7 @@
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_error_code krb5_enctype_to_string(krb5_enctype enctype, char *str, size_t len)" >&5
 $as_echo_n "checking for krb5_error_code krb5_enctype_to_string(krb5_enctype enctype, char *str, size_t len)... " >&6; }
-if test "${smb_krb5_cv_enctype_to_string_takes_size_t_arg+set}" = set; then :
+if ${smb_krb5_cv_enctype_to_string_takes_size_t_arg+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30212,8 +30112,8 @@
 	if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -30258,7 +30158,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_principal_get_realm" >&5
 $as_echo_n "checking for krb5_principal_get_realm... " >&6; }
-if test "${samba_cv_HAVE_KRB5_PRINCIPAL_GET_REALM+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_PRINCIPAL_GET_REALM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30292,7 +30192,7 @@
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for krb5_princ_realm" >&5
 $as_echo_n "checking for krb5_princ_realm... " >&6; }
-if test "${samba_cv_HAVE_KRB5_PRINC_REALM+set}" = set; then :
+if ${samba_cv_HAVE_KRB5_PRINC_REALM+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -30404,7 +30304,7 @@
     fi
   else
     if test x"$with_ads_support" = x"yes"; then
-	as_fn_error "krb5 libs don't have all features required for Active Directory support" "$LINENO" 5
+	as_fn_error $? "krb5 libs don't have all features required for Active Directory support" "$LINENO" 5
     else
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: krb5 libs don't have all features required for Active Directory support" >&5
 $as_echo "$as_me: WARNING: krb5 libs don't have all features required for Active Directory support" >&2;}
@@ -30453,7 +30353,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for nscd_flush_cache in -lnscd" >&5
 $as_echo_n "checking for nscd_flush_cache in -lnscd... " >&6; }
-if test "${ac_cv_lib_ext_nscd_nscd_flush_cache+set}" = set; then :
+if ${ac_cv_lib_ext_nscd_nscd_flush_cache+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -30548,7 +30448,7 @@
   for ac_header in uuid/uuid.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "uuid/uuid.h" "ac_cv_header_uuid_uuid_h" "$ac_includes_default"
-if test "x$ac_cv_header_uuid_uuid_h" = x""yes; then :
+if test "x$ac_cv_header_uuid_uuid_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_UUID_UUID_H 1
 _ACEOF
@@ -30560,7 +30460,7 @@
 
   if test x"$ac_cv_header_uuid_uuid_h" != x"yes"; then
 	if test x"$with_dnsupdate_support" = x"yes"; then
-	 as_fn_error "uuid.h is needed to enable DNS Updates support" "$LINENO" 5
+	 as_fn_error $? "uuid.h is needed to enable DNS Updates support" "$LINENO" 5
 	else
 	 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: uuid.h is needed to enable DNS Updates support" >&5
 $as_echo "$as_me: WARNING: uuid.h is needed to enable DNS Updates support" >&2;}
@@ -30581,7 +30481,7 @@
   for ac_func in uuid_generate
 do :
   ac_fn_c_check_func "$LINENO" "uuid_generate" "ac_cv_func_uuid_generate"
-if test "x$ac_cv_func_uuid_generate" = x""yes; then :
+if test "x$ac_cv_func_uuid_generate" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_UUID_GENERATE 1
 _ACEOF
@@ -30613,7 +30513,7 @@
 
 
 	    if test x"$with_dnsupdate_support" = x"yes"; then
-		as_fn_error "libuuid is needed to enable DNS Updates support" "$LINENO" 5
+		as_fn_error $? "libuuid is needed to enable DNS Updates support" "$LINENO" 5
 	    else
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libuuid is needed to enable DNS Updates support" >&5
 $as_echo "$as_me: WARNING: libuuid is needed to enable DNS Updates support" >&2;}
@@ -30626,7 +30526,7 @@
 	    # uuid_generate was not found, try adding libuuid
 	    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uuid_generate in -luuid" >&5
 $as_echo_n "checking for uuid_generate in -luuid... " >&6; }
-if test "${ac_cv_lib_uuid_uuid_generate+set}" = set; then :
+if ${ac_cv_lib_uuid_uuid_generate+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -30660,7 +30560,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_uuid_uuid_generate" >&5
 $as_echo "$ac_cv_lib_uuid_uuid_generate" >&6; }
-if test "x$ac_cv_lib_uuid_uuid_generate" = x""yes; then :
+if test "x$ac_cv_lib_uuid_uuid_generate" = xyes; then :
 
 		LIBS="-luuid $LIBS"
 
@@ -30686,7 +30586,7 @@
 
 
 	    if test x"$with_dnsupdate_support" = x"yes"; then
-		as_fn_error "libuuid is needed to enable DNS Updates support" "$LINENO" 5
+		as_fn_error $? "libuuid is needed to enable DNS Updates support" "$LINENO" 5
 	    else
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libuuid is needed to enable DNS Updates support" >&5
 $as_echo "$as_me: WARNING: libuuid is needed to enable DNS Updates support" >&2;}
@@ -30761,7 +30661,7 @@
 		UNINSTALL_CIFSMOUNT="uninstallcifsmount"
 		;;
 	*)
-		as_fn_error "not on a linux system!" "$LINENO" 5
+		as_fn_error $? "not on a linux system!" "$LINENO" 5
 		;;
 	esac
     ;;
@@ -30809,7 +30709,7 @@
 		UNINSTALL_CIFSUMOUNT="uninstallcifsumount"
 		;;
 	*)
-		as_fn_error "not on a linux system!" "$LINENO" 5
+		as_fn_error $? "not on a linux system!" "$LINENO" 5
 		;;
 	esac
 	;;
@@ -30830,7 +30730,7 @@
 for ac_header in keyutils.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "keyutils.h" "ac_cv_header_keyutils_h" "$ac_includes_default"
-if test "x$ac_cv_header_keyutils_h" = x""yes; then :
+if test "x$ac_cv_header_keyutils_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_KEYUTILS_H 1
 _ACEOF
@@ -30858,9 +30758,9 @@
 	case "$host_os" in
 	*linux*)
 		if test x"$use_ads" != x"yes"; then
-			as_fn_error "ADS support should be enabled for building cifs.upcall" "$LINENO" 5
+			as_fn_error $? "ADS support should be enabled for building cifs.upcall" "$LINENO" 5
 		elif test x"$HAVE_KEYUTILS_H" != "x1"; then
-			as_fn_error "keyutils package is required for cifs.upcall" "$LINENO" 5
+			as_fn_error $? "keyutils package is required for cifs.upcall" "$LINENO" 5
 		else
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
@@ -30873,7 +30773,7 @@
 		fi
 		;;
 	*)
-		as_fn_error "not on a linux system!" "$LINENO" 5
+		as_fn_error $? "not on a linux system!" "$LINENO" 5
 		;;
 	esac
     ;;
@@ -30944,8 +30844,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -30957,7 +30856,7 @@
 	if test x"$ac_cv_header_security_pam_appl_h" != x"yes" -a \
 		x"$ac_cv_header_pam_pam_appl_h" != x"yes"; then
 		if test x"${try_pam}" = x"yes";then
-			as_fn_error "--with-pam=yes but pam_appl.h not found" "$LINENO" 5
+			as_fn_error $? "--with-pam=yes but pam_appl.h not found" "$LINENO" 5
 		fi
 		use_pam=no
 		create_pam_modules=no
@@ -30972,7 +30871,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pam_get_data in -lpam" >&5
 $as_echo_n "checking for pam_get_data in -lpam... " >&6; }
-if test "${ac_cv_lib_ext_pam_pam_get_data+set}" = set; then :
+if ${ac_cv_lib_ext_pam_pam_get_data+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -31031,7 +30930,7 @@
 fi
 	if test x"$ac_cv_lib_ext_pam_pam_get_data" != x"yes"; then
 		if test x"${try_pam}" = x"yes";then
-			as_fn_error "--with-pam=yes but libpam not found" "$LINENO" 5
+			as_fn_error $? "--with-pam=yes but libpam not found" "$LINENO" 5
 		fi
 		use_pam=no
 		create_pam_modules=no
@@ -31049,8 +30948,7 @@
 		#endif
 
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -31062,7 +30960,7 @@
 	if test x"$ac_cv_header_security_pam_modules_h" = x"no" -a \
 		x"$ac_cv_header_pam_pam_modules_h" = x"no" ; then
 		if test x"${try_pam}" = x"yes";then
-			as_fn_error "--with-pam=yes but pam_modules.h not found" "$LINENO" 5
+			as_fn_error $? "--with-pam=yes but pam_modules.h not found" "$LINENO" 5
        fi
 		create_pam_modules=no
     fi
@@ -31087,8 +30985,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -31101,8 +30998,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -31117,7 +31013,7 @@
     LIBS="$PAM_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pam_vsyslog" >&5
 $as_echo_n "checking for pam_vsyslog... " >&6; }
-if test "${ac_cv_func_ext_pam_vsyslog+set}" = set; then :
+if ${ac_cv_func_ext_pam_vsyslog+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -31258,7 +31154,7 @@
     try_pam_smbpass=$withval
   ;;
   *)
-    as_fn_error "valid options are yes,no,auto" "$LINENO" 5
+    as_fn_error $? "valid options are yes,no,auto" "$LINENO" 5
   ;;
   esac
 
@@ -31272,12 +31168,12 @@
 	# Conditions under which pam_smbpass can't be built.
 	if test x"$BLDSHARED" != xtrue ; then
 		if test x"${try_pam_smbpass}" = xyes ; then
-			as_fn_error "No support for shared modules" "$LINENO" 5
+			as_fn_error $? "No support for shared modules" "$LINENO" 5
 		fi
 		use_pam_smbpass=no
 	elif test x"$create_pam_modules" != xyes ; then
 		if test x"${try_pam_smbpass}" = xyes ; then
-			as_fn_error "No support for PAM MODULES" "$LINENO" 5
+			as_fn_error $? "No support for PAM MODULES" "$LINENO" 5
 		fi
 		use_pam_smbpass=no
 	fi
@@ -31301,7 +31197,7 @@
 if test $with_pam_for_crypt = no; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a crypt that needs truncated salt" >&5
 $as_echo_n "checking for a crypt that needs truncated salt... " >&6; }
-if test "${samba_cv_HAVE_TRUNCATED_SALT+set}" = set; then :
+if ${samba_cv_HAVE_TRUNCATED_SALT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -31397,7 +31293,7 @@
 if test "${with_syslog_facility+set}" = set; then :
   withval=$with_syslog_facility;
   if test "$withval" = "no" ; then
-    as_fn_error "argument to --with-syslog-facility must be a string" "$LINENO" 5
+    as_fn_error $? "argument to --with-syslog-facility must be a string" "$LINENO" 5
   else
      if test "$withval" != "yes" ; then
         syslog_facility="$withval"
@@ -31557,7 +31453,7 @@
 
 # some broken header files need this
 ac_fn_c_check_header_mongrel "$LINENO" "asm/types.h" "ac_cv_header_asm_types_h" "$ac_includes_default"
-if test "x$ac_cv_header_asm_types_h" = x""yes; then :
+if test "x$ac_cv_header_asm_types_h" = xyes; then :
 
 
 $as_echo "#define HAVE_ASM_TYPES_H 1" >>confdefs.h
@@ -31575,7 +31471,7 @@
 for ac_header in sys/fs/vx_quota.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/fs/vx_quota.h" "ac_cv_header_sys_fs_vx_quota_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_fs_vx_quota_h" = x""yes; then :
+if test "x$ac_cv_header_sys_fs_vx_quota_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_FS_VX_QUOTA_H 1
 _ACEOF
@@ -31589,7 +31485,7 @@
 for ac_header in linux/dqblk_xfs.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "linux/dqblk_xfs.h" "ac_cv_header_linux_dqblk_xfs_h" "$ac_includes_default"
-if test "x$ac_cv_header_linux_dqblk_xfs_h" = x""yes; then :
+if test "x$ac_cv_header_linux_dqblk_xfs_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LINUX_DQBLK_XFS_H 1
 _ACEOF
@@ -31603,7 +31499,7 @@
 for ac_header in sys/quota.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/quota.h" "ac_cv_header_sys_quota_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_quota_h" = x""yes; then :
+if test "x$ac_cv_header_sys_quota_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_QUOTA_H 1
 _ACEOF
@@ -31617,7 +31513,7 @@
 # if we have xfs quota support <sys/quota.h> (IRIX) we should use it
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for XFS QUOTA in <sys/quota.h>" >&5
 $as_echo_n "checking for XFS QUOTA in <sys/quota.h>... " >&6; }
-if test "${samba_cv_HAVE_SYS_QUOTA_XFS+set}" = set; then :
+if ${samba_cv_HAVE_SYS_QUOTA_XFS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -31658,7 +31554,7 @@
 # if we have struct dqblk .dqb_fsoftlimit instead of .dqb_isoftlimit on IRIX
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if struct dqblk has .dqb_fsoftlimit" >&5
 $as_echo_n "checking if struct dqblk has .dqb_fsoftlimit... " >&6; }
-if test "${samba_cv_HAVE_DQB_FSOFTLIMIT+set}" = set; then :
+if ${samba_cv_HAVE_DQB_FSOFTLIMIT+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -31701,7 +31597,7 @@
 if test x"$samba_cv_SYSQUOTA_FOUND" != x"yes"; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for long quotactl(int cmd, char *special, qid_t id, caddr_t addr)" >&5
 $as_echo_n "checking for long quotactl(int cmd, char *special, qid_t id, caddr_t addr)... " >&6; }
-if test "${samba_cv_HAVE_QUOTACTL_4A+set}" = set; then :
+if ${samba_cv_HAVE_QUOTACTL_4A+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -31760,7 +31656,7 @@
 if test x"$samba_cv_SYSQUOTA_FOUND" != x"yes"; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for int quotactl(const char *path, int cmd, int id, char *addr)" >&5
 $as_echo_n "checking for int quotactl(const char *path, int cmd, int id, char *addr)... " >&6; }
-if test "${samba_cv_HAVE_QUOTACTL_4B+set}" = set; then :
+if ${samba_cv_HAVE_QUOTACTL_4B+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -31820,7 +31716,7 @@
 if test x"$samba_cv_SYSQUOTA_FOUND" != x"yes"; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CRAY int quotactl (char *spec, int request, char *arg)" >&5
 $as_echo_n "checking for CRAY int quotactl (char *spec, int request, char *arg)... " >&6; }
-if test "${samba_cv_HAVE_QUOTACTL_3+set}" = set; then :
+if ${samba_cv_HAVE_QUOTACTL_3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -31882,7 +31778,7 @@
 for ac_header in mntent.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "mntent.h" "ac_cv_header_mntent_h" "$ac_includes_default"
-if test "x$ac_cv_header_mntent_h" = x""yes; then :
+if test "x$ac_cv_header_mntent_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_MNTENT_H 1
 _ACEOF
@@ -31897,8 +31793,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -31912,7 +31807,7 @@
 for ac_header in devnm.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "devnm.h" "ac_cv_header_devnm_h" "$ac_includes_default"
-if test "x$ac_cv_header_devnm_h" = x""yes; then :
+if test "x$ac_cv_header_devnm_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DEVNM_H 1
 _ACEOF
@@ -31926,7 +31821,7 @@
 for ac_func in devnm
 do :
   ac_fn_c_check_func "$LINENO" "devnm" "ac_cv_func_devnm"
-if test "x$ac_cv_func_devnm" = x""yes; then :
+if test "x$ac_cv_func_devnm" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DEVNM 1
 _ACEOF
@@ -31953,7 +31848,7 @@
 if test x"$samba_cv_SYSQUOTA_FOUND" != x"no"; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the sys_quota interface works" >&5
 $as_echo_n "checking whether the sys_quota interface works... " >&6; }
-if test "${samba_cv_SYSQUOTA_WORKS+set}" = set; then :
+if ${samba_cv_SYSQUOTA_WORKS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32011,7 +31906,7 @@
 if test x"$samba_cv_SYSQUOTA_FOUND" != x"no" -a x"$samba_cv_found_xfs_header" = x"yes"; then
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the sys_quota interface works with XFS" >&5
 $as_echo_n "checking whether the sys_quota interface works with XFS... " >&6; }
-if test "${samba_cv_SYSQUOTA_WORKS_XFS+set}" = set; then :
+if ${samba_cv_SYSQUOTA_WORKS_XFS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32057,7 +31952,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the old quota support works" >&5
 $as_echo_n "checking whether the old quota support works... " >&6; }
-if test "${samba_cv_QUOTA_WORKS+set}" = set; then :
+if ${samba_cv_QUOTA_WORKS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32167,7 +32062,7 @@
   # SVR4
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking statvfs64 function (SVR4)" >&5
 $as_echo_n "checking statvfs64 function (SVR4)... " >&6; }
-if test "${fu_cv_sys_stat_statvfs64+set}" = set; then :
+if ${fu_cv_sys_stat_statvfs64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -32217,7 +32112,7 @@
   # SVR4
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking statvfs function (SVR4)" >&5
 $as_echo_n "checking statvfs function (SVR4)... " >&6; }
-if test "${fu_cv_sys_stat_statvfs+set}" = set; then :
+if ${fu_cv_sys_stat_statvfs+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -32255,7 +32150,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that statvfs.f_fsid is an integer" >&5
 $as_echo_n "checking that statvfs.f_fsid is an integer... " >&6; }
-if test "${samba_cv_fsid_int+set}" = set; then :
+if ${samba_cv_fsid_int+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32290,7 +32185,7 @@
 # systems use f_bsize.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that statvfs.f_frsize works" >&5
 $as_echo_n "checking that statvfs.f_frsize works... " >&6; }
-if test "${samba_cv_frsize+set}" = set; then :
+if ${samba_cv_frsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32324,7 +32219,7 @@
 # Some systems use f_flag in struct statvfs while others use f_flags
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that statvfs.statvfs_f_flag works" >&5
 $as_echo_n "checking that statvfs.statvfs_f_flag works... " >&6; }
-if test "${samba_cv_statvfs_f_flag+set}" = set; then :
+if ${samba_cv_statvfs_f_flag+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32357,7 +32252,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that statvfs.statvfs_f_flags works" >&5
 $as_echo_n "checking that statvfs.statvfs_f_flags works... " >&6; }
-if test "${samba_cv_statvfs_f_flags+set}" = set; then :
+if ${samba_cv_statvfs_f_flags+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32392,7 +32287,7 @@
   # DEC Alpha running OSF/1
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 3-argument statfs function (DEC OSF/1)" >&5
 $as_echo_n "checking for 3-argument statfs function (DEC OSF/1)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs3_osf1+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs3_osf1+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -32436,7 +32331,7 @@
 # AIX
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for two-argument statfs with statfs.bsize member (AIX, 4.3BSD)" >&5
 $as_echo_n "checking for two-argument statfs with statfs.bsize member (AIX, 4.3BSD)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs2_bsize+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs2_bsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -32486,7 +32381,7 @@
 # SVR3
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for four-argument statfs (AIX-3.2.5, SVR3)" >&5
 $as_echo_n "checking for four-argument statfs (AIX-3.2.5, SVR3)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs4+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs4+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -32527,7 +32422,7 @@
 # 4.4BSD and NetBSD
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for two-argument statfs with statfs.fsize member (4.4BSD and NetBSD)" >&5
 $as_echo_n "checking for two-argument statfs with statfs.fsize member (4.4BSD and NetBSD)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs2_fsize+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs2_fsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -32574,7 +32469,7 @@
   # Ultrix
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for two-argument statfs with struct fs_data (Ultrix)" >&5
 $as_echo_n "checking for two-argument statfs with struct fs_data (Ultrix)... " >&6; }
-  if test "${fu_cv_sys_stat_fs_data+set}" = set; then :
+  if ${fu_cv_sys_stat_fs_data+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -32701,8 +32596,7 @@
 #include <ctdb.h>
 
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -32715,7 +32609,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for CTDB_CONTROL_TRANS3_COMMIT declaration" >&5
 $as_echo_n "checking for CTDB_CONTROL_TRANS3_COMMIT declaration... " >&6; }
-if test "${ac_cv_have_CTDB_CONTROL_TRANS3_COMMIT_decl+set}" = set; then :
+if ${ac_cv_have_CTDB_CONTROL_TRANS3_COMMIT_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -32774,7 +32668,7 @@
 #include <ctdb_private.h>
 
 "
-if test "x$ac_cv_type_struct_ctdb_tcp_client" = x""yes; then :
+if test "x$ac_cv_type_struct_ctdb_tcp_client" = xyes; then :
 
 
 $as_echo "#define ctdb_control_tcp ctdb_tcp_client" >>confdefs.h
@@ -32795,7 +32689,7 @@
 #include <ctdb_private.h>
 
 "
-if test "x$ac_cv_type_struct_ctdb_control_tcp" = x""yes; then :
+if test "x$ac_cv_type_struct_ctdb_control_tcp" = xyes; then :
 
 
 $as_echo "#define HAVE_STRUCT_CTDB_CONTROL_TCP 1" >>confdefs.h
@@ -32820,7 +32714,7 @@
 #include <ctdb_private.h>
 
 "
-if test "x$ac_cv_type_struct_ctdb_control_tcp_addr" = x""yes; then :
+if test "x$ac_cv_type_struct_ctdb_control_tcp_addr" = xyes; then :
 
 
 $as_echo "#define HAVE_STRUCT_CTDB_CONTROL_TCP_ADDR 1" >>confdefs.h
@@ -32845,14 +32739,14 @@
 
 if test x"$ac_cv_header_ctdb_private_h" != x"yes"; then
 	if test "x$with_cluster_support" = "xyes"; then
-		as_fn_error "\"ctdb_private.h is required for cluster support\"" "$LINENO" 5
+		as_fn_error $? "\"ctdb_private.h is required for cluster support\"" "$LINENO" 5
 	fi
 	with_cluster_support=no
 fi
 
 if test x"$ctdb_broken" != x"no"; then
 	if test "x$with_cluster_support" = "xyes"; then
-		as_fn_error "\"cluster support: $ctdb_broken\"" "$LINENO" 5
+		as_fn_error $? "\"cluster support: $ctdb_broken\"" "$LINENO" 5
 	fi
 	with_cluster_support=no
 fi
@@ -32962,7 +32856,7 @@
 	*)
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for acl_get_file in -lacl" >&5
 $as_echo_n "checking for acl_get_file in -lacl... " >&6; }
-if test "${ac_cv_lib_acl_acl_get_file+set}" = set; then :
+if ${ac_cv_lib_acl_acl_get_file+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -32996,7 +32890,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_acl_acl_get_file" >&5
 $as_echo "$ac_cv_lib_acl_acl_get_file" >&6; }
-if test "x$ac_cv_lib_acl_acl_get_file" = x""yes; then :
+if test "x$ac_cv_lib_acl_acl_get_file" = xyes; then :
   ACL_LIBS="$ACL_LIBS -lacl"
 fi
 
@@ -33004,7 +32898,7 @@
 		*linux*)
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for getxattr in -lattr" >&5
 $as_echo_n "checking for getxattr in -lattr... " >&6; }
-if test "${ac_cv_lib_attr_getxattr+set}" = set; then :
+if ${ac_cv_lib_attr_getxattr+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -33038,7 +32932,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_attr_getxattr" >&5
 $as_echo "$ac_cv_lib_attr_getxattr" >&6; }
-if test "x$ac_cv_lib_attr_getxattr" = x""yes; then :
+if test "x$ac_cv_lib_attr_getxattr" = xyes; then :
   ACL_LIBS="$ACL_LIBS -lattr"
 fi
 
@@ -33046,7 +32940,7 @@
 		esac
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for POSIX ACL support" >&5
 $as_echo_n "checking for POSIX ACL support... " >&6; }
-if test "${samba_cv_HAVE_POSIX_ACLS+set}" = set; then :
+if ${samba_cv_HAVE_POSIX_ACLS+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33091,7 +32985,7 @@
 
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for acl_get_perm_np" >&5
 $as_echo_n "checking for acl_get_perm_np... " >&6; }
-if test "${samba_cv_HAVE_ACL_GET_PERM_NP+set}" = set; then :
+if ${samba_cv_HAVE_ACL_GET_PERM_NP+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33164,7 +33058,7 @@
 		AIO_LIBS=$LIBS
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for aio_read in -lrt" >&5
 $as_echo_n "checking for aio_read in -lrt... " >&6; }
-if test "${ac_cv_lib_rt_aio_read+set}" = set; then :
+if ${ac_cv_lib_rt_aio_read+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -33198,13 +33092,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_rt_aio_read" >&5
 $as_echo "$ac_cv_lib_rt_aio_read" >&6; }
-if test "x$ac_cv_lib_rt_aio_read" = x""yes; then :
+if test "x$ac_cv_lib_rt_aio_read" = xyes; then :
   AIO_LIBS="$LIBS -lrt"
 fi
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for aio_read in -laio" >&5
 $as_echo_n "checking for aio_read in -laio... " >&6; }
-if test "${ac_cv_lib_aio_aio_read+set}" = set; then :
+if ${ac_cv_lib_aio_aio_read+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -33238,13 +33132,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_aio_aio_read" >&5
 $as_echo "$ac_cv_lib_aio_aio_read" >&6; }
-if test "x$ac_cv_lib_aio_aio_read" = x""yes; then :
+if test "x$ac_cv_lib_aio_aio_read" = xyes; then :
   AIO_LIBS="$LIBS -laio"
 fi
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for asynchronous io support" >&5
 $as_echo_n "checking for asynchronous io support... " >&6; }
-if test "${samba_cv_HAVE_AIO+set}" = set; then :
+if ${samba_cv_HAVE_AIO+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33275,7 +33169,7 @@
 $as_echo "$samba_cv_HAVE_AIO" >&6; }
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for 64-bit asynchronous io support" >&5
 $as_echo_n "checking for 64-bit asynchronous io support... " >&6; }
-if test "${samba_cv_HAVE_AIO64+set}" = set; then :
+if ${samba_cv_HAVE_AIO64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33635,7 +33529,7 @@
 	*linux* | gnu* | k*bsd*-gnu | kopensolaris*-gnu)
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for linux sendfile64 support" >&5
 $as_echo_n "checking for linux sendfile64 support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILE64+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILE64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33668,7 +33562,7 @@
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for linux sendfile support" >&5
 $as_echo_n "checking for linux sendfile support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILE+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33702,7 +33596,7 @@
 # Try and cope with broken Linux sendfile....
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken linux sendfile support" >&5
 $as_echo_n "checking for broken linux sendfile support... " >&6; }
-if test "${samba_cv_HAVE_BROKEN_LINUX_SENDFILE+set}" = set; then :
+if ${samba_cv_HAVE_BROKEN_LINUX_SENDFILE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33773,7 +33667,7 @@
 	*freebsd* | *dragonfly* )
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for freebsd sendfile support" >&5
 $as_echo_n "checking for freebsd sendfile support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILE+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33834,7 +33728,7 @@
 	*hpux*)
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for hpux sendfile64 support" >&5
 $as_echo_n "checking for hpux sendfile64 support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILE64+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILE64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33889,7 +33783,7 @@
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for hpux sendfile support" >&5
 $as_echo_n "checking for hpux sendfile support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILE+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -33946,7 +33840,7 @@
 	*solaris*)
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for sendfilev in -lsendfile" >&5
 $as_echo_n "checking for sendfilev in -lsendfile... " >&6; }
-if test "${ac_cv_lib_sendfile_sendfilev+set}" = set; then :
+if ${ac_cv_lib_sendfile_sendfilev+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -33980,7 +33874,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_sendfile_sendfilev" >&5
 $as_echo "$ac_cv_lib_sendfile_sendfilev" >&6; }
-if test "x$ac_cv_lib_sendfile_sendfilev" = x""yes; then :
+if test "x$ac_cv_lib_sendfile_sendfilev" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBSENDFILE 1
 _ACEOF
@@ -33991,7 +33885,7 @@
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for solaris sendfilev64 support" >&5
 $as_echo_n "checking for solaris sendfilev64 support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILEV64+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILEV64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34054,7 +33948,7 @@
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for solaris sendfilev support" >&5
 $as_echo_n "checking for solaris sendfilev support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILEV+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILEV+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34118,7 +34012,7 @@
 	*aix*)
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for AIX send_file support" >&5
 $as_echo_n "checking for AIX send_file support... " >&6; }
-if test "${samba_cv_HAVE_SENDFILE+set}" = set; then :
+if ${samba_cv_HAVE_SENDFILE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34196,7 +34090,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Linux readahead" >&5
 $as_echo_n "checking for Linux readahead... " >&6; }
-if test "${samba_cv_HAVE_LINUX_READAHEAD+set}" = set; then :
+if ${samba_cv_HAVE_LINUX_READAHEAD+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34235,7 +34129,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for readahead declaration" >&5
 $as_echo_n "checking for readahead declaration... " >&6; }
-if test "${ac_cv_have_readahead_decl+set}" = set; then :
+if ${ac_cv_have_readahead_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34271,7 +34165,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for posix_fadvise" >&5
 $as_echo_n "checking for posix_fadvise... " >&6; }
-if test "${samba_cv_HAVE_POSIX_FADVISE+set}" = set; then :
+if ${samba_cv_HAVE_POSIX_FADVISE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34314,7 +34208,7 @@
 *linux*)
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for Linux splice" >&5
 $as_echo_n "checking for Linux splice... " >&6; }
-if test "${samba_cv_HAVE_LINUX_SPLICE+set}" = set; then :
+if ${samba_cv_HAVE_LINUX_SPLICE+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34358,7 +34252,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for splice declaration" >&5
 $as_echo_n "checking for splice declaration... " >&6; }
-if test "${ac_cv_have_splice_decl+set}" = set; then :
+if ${ac_cv_have_splice_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34394,7 +34288,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for a broken readlink syscall" >&5
 $as_echo_n "checking for a broken readlink syscall... " >&6; }
-if test "${samba_cv_HAVE_BROKEN_READLINK+set}" = set; then :
+if ${samba_cv_HAVE_BROKEN_READLINK+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34571,7 +34465,7 @@
 if test x"$HAVE_WBCLIENT" = x"yes"; then
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for wbcInterfaceDetails in -lwbclient" >&5
 $as_echo_n "checking for wbcInterfaceDetails in -lwbclient... " >&6; }
-if test "${ac_cv_lib_wbclient_wbcInterfaceDetails+set}" = set; then :
+if ${ac_cv_lib_wbclient_wbcInterfaceDetails+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -34605,10 +34499,10 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_wbclient_wbcInterfaceDetails" >&5
 $as_echo "$ac_cv_lib_wbclient_wbcInterfaceDetails" >&6; }
-if test "x$ac_cv_lib_wbclient_wbcInterfaceDetails" = x""yes; then :
+if test "x$ac_cv_lib_wbclient_wbcInterfaceDetails" = xyes; then :
   LIBWBCLIENT_LIBS="-lwbclient"
 else
-  as_fn_error "Could not find wbclient" "$LINENO" 5
+  as_fn_error $? "Could not find wbclient" "$LINENO" 5
 fi
 
 	LIBWBCLIENT_LIBS="$LIBWBCLIENT_LIBS $WBCLIENT_LDFLAGS"
@@ -34673,7 +34567,7 @@
 # Solaris 10 does have new member in nss_XbyY_key
 ac_fn_c_check_member "$LINENO" "union nss_XbyY_key" "ipnode.af_family" "ac_cv_member_union_nss_XbyY_key_ipnode_af_family" "#include <nss_dbdefs.h>
 "
-if test "x$ac_cv_member_union_nss_XbyY_key_ipnode_af_family" = x""yes; then :
+if test "x$ac_cv_member_union_nss_XbyY_key_ipnode_af_family" = xyes; then :
 
 $as_echo "#define HAVE_NSS_XBYY_KEY_IPNODE 1" >>confdefs.h
 
@@ -34685,7 +34579,7 @@
 
 ac_fn_c_check_member "$LINENO" "struct passwd" "pw_comment" "ac_cv_member_struct_passwd_pw_comment" "#include <pwd.h>
 "
-if test "x$ac_cv_member_struct_passwd_pw_comment" = x""yes; then :
+if test "x$ac_cv_member_struct_passwd_pw_comment" = xyes; then :
 
 $as_echo "#define HAVE_PASSWD_PW_COMMENT 1" >>confdefs.h
 
@@ -34694,7 +34588,7 @@
 
 ac_fn_c_check_member "$LINENO" "struct passwd" "pw_age" "ac_cv_member_struct_passwd_pw_age" "#include <pwd.h>
 "
-if test "x$ac_cv_member_struct_passwd_pw_age" = x""yes; then :
+if test "x$ac_cv_member_struct_passwd_pw_age" = xyes; then :
 
 $as_echo "#define HAVE_PASSWD_PW_AGE 1" >>confdefs.h
 
@@ -34705,7 +34599,7 @@
 # struct secmethod_table as AIX 5.2
 ac_fn_c_check_member "$LINENO" "struct secmethod_table" "method_attrlist" "ac_cv_member_struct_secmethod_table_method_attrlist" "#include <usersec.h>
 "
-if test "x$ac_cv_member_struct_secmethod_table_method_attrlist" = x""yes; then :
+if test "x$ac_cv_member_struct_secmethod_table_method_attrlist" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SECMETHOD_TABLE_METHOD_ATTRLIST 1
@@ -34716,7 +34610,7 @@
 
 ac_fn_c_check_member "$LINENO" "struct secmethod_table" "method_version" "ac_cv_member_struct_secmethod_table_method_version" "#include <usersec.h>
 "
-if test "x$ac_cv_member_struct_secmethod_table_method_version" = x""yes; then :
+if test "x$ac_cv_member_struct_secmethod_table_method_version" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_STRUCT_SECMETHOD_TABLE_METHOD_VERSION 1
@@ -34728,7 +34622,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SO_PEERCRED" >&5
 $as_echo_n "checking for SO_PEERCRED... " >&6; }
-if test "${samba_cv_HAVE_PEERCRED+set}" = set; then :
+if ${samba_cv_HAVE_PEERCRED+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -34783,7 +34677,7 @@
 if test x"$INCLUDED_POPT" != x"yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for poptGetContext in -lpopt" >&5
 $as_echo_n "checking for poptGetContext in -lpopt... " >&6; }
-if test "${ac_cv_lib_popt_poptGetContext+set}" = set; then :
+if ${ac_cv_lib_popt_poptGetContext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -34817,7 +34711,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_popt_poptGetContext" >&5
 $as_echo "$ac_cv_lib_popt_poptGetContext" >&6; }
-if test "x$ac_cv_lib_popt_poptGetContext" = x""yes; then :
+if test "x$ac_cv_lib_popt_poptGetContext" = xyes; then :
   INCLUDED_POPT=no
 else
   INCLUDED_POPT=yes
@@ -34859,7 +34753,7 @@
     for ac_header in dns_sd.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "dns_sd.h" "ac_cv_header_dns_sd_h" "$ac_includes_default"
-if test "x$ac_cv_header_dns_sd_h" = x""yes; then :
+if test "x$ac_cv_header_dns_sd_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DNS_SD_H 1
 _ACEOF
@@ -34877,7 +34771,7 @@
     for ac_func in DNSServiceRegister
 do :
   ac_fn_c_check_func "$LINENO" "DNSServiceRegister" "ac_cv_func_DNSServiceRegister"
-if test "x$ac_cv_func_DNSServiceRegister" = x""yes; then :
+if test "x$ac_cv_func_DNSServiceRegister" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DNSSERVICEREGISTER 1
 _ACEOF
@@ -34894,7 +34788,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for DNSServiceRegister in -ldns_sd" >&5
 $as_echo_n "checking for DNSServiceRegister in -ldns_sd... " >&6; }
-if test "${ac_cv_lib_ext_dns_sd_DNSServiceRegister+set}" = set; then :
+if ${ac_cv_lib_ext_dns_sd_DNSServiceRegister+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -34962,7 +34856,7 @@
 
     else
     	if test x"$enable_dnssd" = x"yes"; then
-	    as_fn_error "DNS service discovery support not available" "$LINENO" 5
+	    as_fn_error $? "DNS service discovery support not available" "$LINENO" 5
 	fi
     fi
 
@@ -34983,7 +34877,7 @@
     for ac_header in avahi-common/watch.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "avahi-common/watch.h" "ac_cv_header_avahi_common_watch_h" "$ac_includes_default"
-if test "x$ac_cv_header_avahi_common_watch_h" = x""yes; then :
+if test "x$ac_cv_header_avahi_common_watch_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_AVAHI_COMMON_WATCH_H 1
 _ACEOF
@@ -34999,7 +34893,7 @@
     for ac_header in avahi-client/client.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "avahi-client/client.h" "ac_cv_header_avahi_client_client_h" "$ac_includes_default"
-if test "x$ac_cv_header_avahi_client_client_h" = x""yes; then :
+if test "x$ac_cv_header_avahi_client_client_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_AVAHI_CLIENT_CLIENT_H 1
 _ACEOF
@@ -35015,7 +34909,7 @@
     save_LIBS="$LIBS"
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for avahi_client_new in -lavahi-client" >&5
 $as_echo_n "checking for avahi_client_new in -lavahi-client... " >&6; }
-if test "${ac_cv_lib_avahi_client_avahi_client_new+set}" = set; then :
+if ${ac_cv_lib_avahi_client_avahi_client_new+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35049,13 +34943,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avahi_client_avahi_client_new" >&5
 $as_echo "$ac_cv_lib_avahi_client_avahi_client_new" >&6; }
-if test "x$ac_cv_lib_avahi_client_avahi_client_new" = x""yes; then :
+if test "x$ac_cv_lib_avahi_client_avahi_client_new" = xyes; then :
   have_avahi_client_new=yes
 fi
 
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for avahi_strerror in -lavahi-common" >&5
 $as_echo_n "checking for avahi_strerror in -lavahi-common... " >&6; }
-if test "${ac_cv_lib_avahi_common_avahi_strerror+set}" = set; then :
+if ${ac_cv_lib_avahi_common_avahi_strerror+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35089,7 +34983,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avahi_common_avahi_strerror" >&5
 $as_echo "$ac_cv_lib_avahi_common_avahi_strerror" >&6; }
-if test "x$ac_cv_lib_avahi_common_avahi_strerror" = x""yes; then :
+if test "x$ac_cv_lib_avahi_common_avahi_strerror" = xyes; then :
   have_avahi_strerror=yes
 fi
 
@@ -35110,7 +35004,7 @@
 
     else
 	if test x"$enable_avahi" = x"yes"; then
-	    as_fn_error "avahi support not available" "$LINENO" 5
+	    as_fn_error $? "avahi support not available" "$LINENO" 5
 	fi
     fi
 fi
@@ -35127,7 +35021,7 @@
 if test "x$PTHREAD_LDFLAGS" = xerror; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_attr_init in -lpthread" >&5
 $as_echo_n "checking for pthread_attr_init in -lpthread... " >&6; }
-if test "${ac_cv_lib_pthread_pthread_attr_init+set}" = set; then :
+if ${ac_cv_lib_pthread_pthread_attr_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35161,7 +35055,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_attr_init" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_attr_init" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_attr_init" = x""yes; then :
+if test "x$ac_cv_lib_pthread_pthread_attr_init" = xyes; then :
 
 	     PTHREAD_CFLAGS="-D_REENTRANT -D_POSIX_PTHREAD_SEMANTICS"
 	     PTHREAD_LDFLAGS="-lpthread"
@@ -35172,7 +35066,7 @@
 if test "x$PTHREAD_LDFLAGS" = xerror; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_attr_init in -lpthreads" >&5
 $as_echo_n "checking for pthread_attr_init in -lpthreads... " >&6; }
-if test "${ac_cv_lib_pthreads_pthread_attr_init+set}" = set; then :
+if ${ac_cv_lib_pthreads_pthread_attr_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35206,7 +35100,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthreads_pthread_attr_init" >&5
 $as_echo "$ac_cv_lib_pthreads_pthread_attr_init" >&6; }
-if test "x$ac_cv_lib_pthreads_pthread_attr_init" = x""yes; then :
+if test "x$ac_cv_lib_pthreads_pthread_attr_init" = xyes; then :
 
 	     PTHREAD_CFLAGS="-D_THREAD_SAFE"
 	     PTHREAD_LDFLAGS="-lpthreads"
@@ -35217,7 +35111,7 @@
 if test "x$PTHREAD_LDFLAGS" = xerror; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_attr_init in -lc_r" >&5
 $as_echo_n "checking for pthread_attr_init in -lc_r... " >&6; }
-if test "${ac_cv_lib_c_r_pthread_attr_init+set}" = set; then :
+if ${ac_cv_lib_c_r_pthread_attr_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35251,7 +35145,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_c_r_pthread_attr_init" >&5
 $as_echo "$ac_cv_lib_c_r_pthread_attr_init" >&6; }
-if test "x$ac_cv_lib_c_r_pthread_attr_init" = x""yes; then :
+if test "x$ac_cv_lib_c_r_pthread_attr_init" = xyes; then :
 
 		PTHREAD_CFLAGS="-D_THREAD_SAFE -pthread"
 		PTHREAD_LDFLAGS="-pthread"
@@ -35261,7 +35155,7 @@
 
 if test "x$PTHREAD_LDFLAGS" = xerror; then
    ac_fn_c_check_func "$LINENO" "pthread_attr_init" "ac_cv_func_pthread_attr_init"
-if test "x$ac_cv_func_pthread_attr_init" = x""yes; then :
+if test "x$ac_cv_func_pthread_attr_init" = xyes; then :
 
 		 PTHREAD_CFLAGS="-D_REENTRANT"
 		 PTHREAD_LDFLAGS="-lpthread"
@@ -35274,7 +35168,7 @@
 if test "x$PTHREAD_LDFLAGS" = xerror; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_mutex_lock in -lpthread" >&5
 $as_echo_n "checking for pthread_mutex_lock in -lpthread... " >&6; }
-if test "${ac_cv_lib_pthread_pthread_mutex_lock+set}" = set; then :
+if ${ac_cv_lib_pthread_pthread_mutex_lock+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35308,7 +35202,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_mutex_lock" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_mutex_lock" >&6; }
-if test "x$ac_cv_lib_pthread_pthread_mutex_lock" = x""yes; then :
+if test "x$ac_cv_lib_pthread_pthread_mutex_lock" = xyes; then :
 
 		PTHREAD_CFLAGS="-D_REENTRANT"
 		PTHREAD_LDFLAGS="-lpthread"
@@ -35330,7 +35224,7 @@
 	for ac_header in pthread.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "pthread.h" "ac_cv_header_pthread_h" "$ac_includes_default"
-if test "x$ac_cv_header_pthread_h" = x""yes; then :
+if test "x$ac_cv_header_pthread_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_PTHREAD_H 1
 _ACEOF
@@ -35356,7 +35250,7 @@
 
 
 if test x"$enable_pthreadpool" = xyes -a x"$samba_cv_HAVE_PTHREAD" != x"yes"; then
-	as_fn_error "pthreadpool support cannot be enabled when pthread support was found" "$LINENO" 5
+	as_fn_error $? "pthreadpool support cannot be enabled when pthread support was found" "$LINENO" 5
 fi
 
 if test x"$enable_pthreadpool" = x"yes" -a x"$samba_cv_HAVE_PTHREAD" = x"yes"; then
@@ -35389,7 +35283,7 @@
 if test x"$INCLUDED_INIPARSER" != x"yes"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for iniparser_load in -liniparser" >&5
 $as_echo_n "checking for iniparser_load in -liniparser... " >&6; }
-if test "${ac_cv_lib_iniparser_iniparser_load+set}" = set; then :
+if ${ac_cv_lib_iniparser_iniparser_load+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -35423,7 +35317,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_iniparser_iniparser_load" >&5
 $as_echo "$ac_cv_lib_iniparser_iniparser_load" >&6; }
-if test "x$ac_cv_lib_iniparser_iniparser_load" = x""yes; then :
+if test "x$ac_cv_lib_iniparser_iniparser_load" = xyes; then :
   INCLUDED_INIPARSER=no
 else
   INCLUDED_INIPARSER=yes
@@ -35454,7 +35348,7 @@
 # Checks for the vfs_fileid module
 # Start
 ac_fn_c_check_func "$LINENO" "getmntent" "ac_cv_func_getmntent"
-if test "x$ac_cv_func_getmntent" = x""yes; then :
+if test "x$ac_cv_func_getmntent" = xyes; then :
 
 fi
 
@@ -35462,7 +35356,7 @@
 for ac_header in sys/statfs.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/statfs.h" "ac_cv_header_sys_statfs_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_statfs_h" = x""yes; then :
+if test "x$ac_cv_header_sys_statfs_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_STATFS_H 1
 _ACEOF
@@ -35474,7 +35368,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking vfs_fileid: checking for statfs() and struct statfs.f_fsid)" >&5
 $as_echo_n "checking vfs_fileid: checking for statfs() and struct statfs.f_fsid)... " >&6; }
-if test "${vfsfileid_cv_statfs+set}" = set; then :
+if ${vfsfileid_cv_statfs+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -39124,7 +39018,7 @@
 
 if test x"$enable_merged_build" = x"yes" -a \
 	x"$merged_build_possible" = x"no" ; then
-	as_fn_error "Merged build required but not possible" "$LINENO" 5
+	as_fn_error $? "Merged build required but not possible" "$LINENO" 5
 fi
 
 
@@ -39149,7 +39043,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON+set}" = set; then :
+if ${ac_cv_path_PYTHON+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON in
@@ -39193,7 +39087,7 @@
 set dummy python$PYTHON_VER; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON+set}" = set; then :
+if ${ac_cv_path_PYTHON+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON in
@@ -39245,7 +39139,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON_CONFIG+set}" = set; then :
+if ${ac_cv_path_PYTHON_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON_CONFIG in
@@ -39289,7 +39183,7 @@
 set dummy python$PYTHON_VER-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON_CONFIG+set}" = set; then :
+if ${ac_cv_path_PYTHON_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON_CONFIG in
@@ -39612,7 +39506,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON+set}" = set; then :
+if ${ac_cv_path_PYTHON+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON in
@@ -39656,7 +39550,7 @@
 set dummy python$PYTHON_VER; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON+set}" = set; then :
+if ${ac_cv_path_PYTHON+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON in
@@ -39708,7 +39602,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON_CONFIG+set}" = set; then :
+if ${ac_cv_path_PYTHON_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON_CONFIG in
@@ -39752,7 +39646,7 @@
 set dummy python$PYTHON_VER-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PYTHON_CONFIG+set}" = set; then :
+if ${ac_cv_path_PYTHON_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PYTHON_CONFIG in
@@ -40036,7 +39930,7 @@
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
 
-as_fn_error "Python not found. Please install Python 2.x and its development headers/libraries." "$LINENO" 5
+as_fn_error $? "Python not found. Please install Python 2.x and its development headers/libraries." "$LINENO" 5
 
 	fi
 
@@ -40143,8 +40037,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -40156,7 +40049,7 @@
     for ac_header in readline/history.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "readline/history.h" "ac_cv_header_readline_history_h" "$ac_includes_default"
-if test "x$ac_cv_header_readline_history_h" = x""yes; then :
+if test "x$ac_cv_header_readline_history_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_READLINE_HISTORY_H 1
 _ACEOF
@@ -40170,8 +40063,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -40180,7 +40072,7 @@
        as_ac_Lib=`$as_echo "ac_cv_lib_${termlib}''_tgetent" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -l${termlib}" >&5
 $as_echo_n "checking for tgetent in -l${termlib}... " >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Lib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -40215,15 +40107,14 @@
 eval ac_res=\$$as_ac_Lib
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Lib
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :
   TERMLIBS="-l${termlib}"; break
 fi
 
       done
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_callback_handler_install in -lreadline" >&5
 $as_echo_n "checking for rl_callback_handler_install in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_rl_callback_handler_install+set}" = set; then :
+if ${ac_cv_lib_readline_rl_callback_handler_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -40257,7 +40148,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_callback_handler_install" >&5
 $as_echo "$ac_cv_lib_readline_rl_callback_handler_install" >&6; }
-if test "x$ac_cv_lib_readline_rl_callback_handler_install" = x""yes; then :
+if test "x$ac_cv_lib_readline_rl_callback_handler_install" = xyes; then :
   TERMLIBS="-lreadline $TERMLIBS"
        EXTERNAL_READLINE=yes
        break
@@ -40291,8 +40182,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -40304,7 +40194,7 @@
     for ac_header in readline/history.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "readline/history.h" "ac_cv_header_readline_history_h" "$ac_includes_default"
-if test "x$ac_cv_header_readline_history_h" = x""yes; then :
+if test "x$ac_cv_header_readline_history_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_READLINE_HISTORY_H 1
 _ACEOF
@@ -40318,8 +40208,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -40328,7 +40217,7 @@
        as_ac_Lib=`$as_echo "ac_cv_lib_${termlib}''_tgetent" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tgetent in -l${termlib}" >&5
 $as_echo_n "checking for tgetent in -l${termlib}... " >&6; }
-if { as_var=$as_ac_Lib; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval \${$as_ac_Lib+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -40363,15 +40252,14 @@
 eval ac_res=\$$as_ac_Lib
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Lib
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Lib"\" = x"yes"; then :
   TERMLIBS="-l${termlib}"; break
 fi
 
       done
       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_callback_handler_install in -lreadline" >&5
 $as_echo_n "checking for rl_callback_handler_install in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_rl_callback_handler_install+set}" = set; then :
+if ${ac_cv_lib_readline_rl_callback_handler_install+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -40405,7 +40293,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_callback_handler_install" >&5
 $as_echo "$ac_cv_lib_readline_rl_callback_handler_install" >&6; }
-if test "x$ac_cv_lib_readline_rl_callback_handler_install" = x""yes; then :
+if test "x$ac_cv_lib_readline_rl_callback_handler_install" = xyes; then :
   TERMLDFLAGS="-L$with_readline/lib"
        TERMCPPFLAGS="-I$with_readline/include"
        LDFLAGS="-L$with_readline/lib $LDFLAGS"
@@ -40436,7 +40324,7 @@
 # special cases.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for rl_completion_matches in -lreadline" >&5
 $as_echo_n "checking for rl_completion_matches in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_rl_completion_matches+set}" = set; then :
+if ${ac_cv_lib_readline_rl_completion_matches+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -40470,7 +40358,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_rl_completion_matches" >&5
 $as_echo "$ac_cv_lib_readline_rl_completion_matches" >&6; }
-if test "x$ac_cv_lib_readline_rl_completion_matches" = x""yes; then :
+if test "x$ac_cv_lib_readline_rl_completion_matches" = xyes; then :
 
 $as_echo "#define HAVE_NEW_LIBREADLINE 1" >>confdefs.h
 
@@ -40483,7 +40371,7 @@
     #include <readline/readline.h>
 
 "
-if test "x$ac_cv_have_decl_rl_event_hook" = x""yes; then :
+if test "x$ac_cv_have_decl_rl_event_hook" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -40495,7 +40383,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for history_list in -lreadline" >&5
 $as_echo_n "checking for history_list in -lreadline... " >&6; }
-if test "${ac_cv_lib_readline_history_list+set}" = set; then :
+if ${ac_cv_lib_readline_history_list+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -40529,7 +40417,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_readline_history_list" >&5
 $as_echo "$ac_cv_lib_readline_history_list" >&6; }
-if test "x$ac_cv_lib_readline_history_list" = x""yes; then :
+if test "x$ac_cv_lib_readline_history_list" = xyes; then :
 
 $as_echo "#define HAVE_HISTORY_LIST 1" >>confdefs.h
 
@@ -40607,7 +40495,7 @@
 
 
 ac_fn_c_check_type "$LINENO" "u_char" "ac_cv_type_u_char" "$ac_includes_default"
-if test "x$ac_cv_type_u_char" = x""yes; then :
+if test "x$ac_cv_type_u_char" = xyes; then :
 
 else
 
@@ -40618,7 +40506,7 @@
 fi
 
 ac_fn_c_check_type "$LINENO" "u_int32_t" "ac_cv_type_u_int32_t" "$ac_includes_default"
-if test "x$ac_cv_type_u_int32_t" = x""yes; then :
+if test "x$ac_cv_type_u_int32_t" = xyes; then :
 
 else
 
@@ -40632,7 +40520,7 @@
 for ac_header in err.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "err.h" "ac_cv_header_err_h" "$ac_includes_default"
-if test "x$ac_cv_header_err_h" = x""yes; then :
+if test "x$ac_cv_header_err_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_ERR_H 1
 _ACEOF
@@ -40647,7 +40535,7 @@
 for ac_header in ifaddrs.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "ifaddrs.h" "ac_cv_header_ifaddrs_h" "$ac_includes_default"
-if test "x$ac_cv_header_ifaddrs_h" = x""yes; then :
+if test "x$ac_cv_header_ifaddrs_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_IFADDRS_H 1
 _ACEOF
@@ -40687,8 +40575,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -40739,8 +40626,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -40753,7 +40639,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bswap16" >&5
 $as_echo_n "checking for bswap16... " >&6; }
-if test "${ac_cv_love_func_bswap16+set}" = set; then :
+if ${ac_cv_love_func_bswap16+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -40786,7 +40672,7 @@
 	for ac_func in bswap16
 do :
   ac_fn_c_check_func "$LINENO" "bswap16" "ac_cv_func_bswap16"
-if test "x$ac_cv_func_bswap16" = x""yes; then :
+if test "x$ac_cv_func_bswap16" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_BSWAP16 1
 _ACEOF
@@ -40820,7 +40706,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bswap32" >&5
 $as_echo_n "checking for bswap32... " >&6; }
-if test "${ac_cv_love_func_bswap32+set}" = set; then :
+if ${ac_cv_love_func_bswap32+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -40853,7 +40739,7 @@
 	for ac_func in bswap32
 do :
   ac_fn_c_check_func "$LINENO" "bswap32" "ac_cv_func_bswap32"
-if test "x$ac_cv_func_bswap32" = x""yes; then :
+if test "x$ac_cv_func_bswap32" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_BSWAP32 1
 _ACEOF
@@ -40888,7 +40774,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for struct winsize" >&5
 $as_echo_n "checking for struct winsize... " >&6; }
-if test "${ac_cv_struct_winsize+set}" = set; then :
+if ${ac_cv_struct_winsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -40945,7 +40831,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
 $as_echo_n "checking return type of signal handlers... " >&6; }
-if test "${ac_cv_type_signal+set}" = set; then :
+if ${ac_cv_type_signal+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -41011,7 +40897,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for h_errno" >&5
 $as_echo_n "checking for h_errno... " >&6; }
-if test "${ac_cv_var_h_errno+set}" = set; then :
+if ${ac_cv_var_h_errno+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41080,7 +40966,7 @@
 #include <netdb.h>
 #endif
 "
-if test "x$ac_cv_have_decl_h_errno" = x""yes; then :
+if test "x$ac_cv_have_decl_h_errno" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -41109,8 +40995,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -41129,7 +41014,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for openpty in -lutil" >&5
 $as_echo_n "checking for openpty in -lutil... " >&6; }
-if test "${ac_cv_lib_ext_util_openpty+set}" = set; then :
+if ${ac_cv_lib_ext_util_openpty+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -41214,7 +41099,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gettext in -lintl" >&5
 $as_echo_n "checking for gettext in -lintl... " >&6; }
-if test "${ac_cv_lib_ext_intl_gettext+set}" = set; then :
+if ${ac_cv_lib_ext_intl_gettext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -41300,8 +41185,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -41325,7 +41209,7 @@
 #endif
 
 "
-if test "x$ac_cv_header_resolv_h" = x""yes; then :
+if test "x$ac_cv_header_resolv_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_RESOLV_H 1
 _ACEOF
@@ -41341,7 +41225,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_search" >&5
 $as_echo_n "checking for res_search... " >&6; }
-if test "${ac_cv_funclib_res_search+set}" = set; then :
+if ${ac_cv_funclib_res_search+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41400,7 +41284,7 @@
 	for ac_func in res_search
 do :
   ac_fn_c_check_func "$LINENO" "res_search" "ac_cv_func_res_search"
-if test "x$ac_cv_func_res_search" = x""yes; then :
+if test "x$ac_cv_func_res_search" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_RES_SEARCH 1
 _ACEOF
@@ -41459,7 +41343,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_nsearch" >&5
 $as_echo_n "checking for res_nsearch... " >&6; }
-if test "${ac_cv_funclib_res_nsearch+set}" = set; then :
+if ${ac_cv_funclib_res_nsearch+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41518,7 +41402,7 @@
 	for ac_func in res_nsearch
 do :
   ac_fn_c_check_func "$LINENO" "res_nsearch" "ac_cv_func_res_nsearch"
-if test "x$ac_cv_func_res_nsearch" = x""yes; then :
+if test "x$ac_cv_func_res_nsearch" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_RES_NSEARCH 1
 _ACEOF
@@ -41577,7 +41461,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for res_ndestroy" >&5
 $as_echo_n "checking for res_ndestroy... " >&6; }
-if test "${ac_cv_funclib_res_ndestroy+set}" = set; then :
+if ${ac_cv_funclib_res_ndestroy+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41636,7 +41520,7 @@
 	for ac_func in res_ndestroy
 do :
   ac_fn_c_check_func "$LINENO" "res_ndestroy" "ac_cv_func_res_ndestroy"
-if test "x$ac_cv_func_res_ndestroy" = x""yes; then :
+if test "x$ac_cv_func_res_ndestroy" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_RES_NDESTROY 1
 _ACEOF
@@ -41694,7 +41578,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dns_search" >&5
 $as_echo_n "checking for dns_search... " >&6; }
-if test "${ac_cv_funclib_dns_search+set}" = set; then :
+if ${ac_cv_funclib_dns_search+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41743,7 +41627,7 @@
 	for ac_func in dns_search
 do :
   ac_fn_c_check_func "$LINENO" "dns_search" "ac_cv_func_dns_search"
-if test "x$ac_cv_func_dns_search" = x""yes; then :
+if test "x$ac_cv_func_dns_search" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DNS_SEARCH 1
 _ACEOF
@@ -41799,7 +41683,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dn_expand" >&5
 $as_echo_n "checking for dn_expand... " >&6; }
-if test "${ac_cv_funclib_dn_expand+set}" = set; then :
+if ${ac_cv_funclib_dn_expand+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41858,7 +41742,7 @@
 	for ac_func in dn_expand
 do :
   ac_fn_c_check_func "$LINENO" "dn_expand" "ac_cv_func_dn_expand"
-if test "x$ac_cv_func_dn_expand" = x""yes; then :
+if test "x$ac_cv_func_dn_expand" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_DN_EXPAND 1
 _ACEOF
@@ -41914,7 +41798,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for _res" >&5
 $as_echo_n "checking for _res... " >&6; }
-if test "${ac_cv_var__res+set}" = set; then :
+if ${ac_cv_var__res+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -41997,7 +41881,7 @@
 #include <resolv.h>
 #endif
 "
-if test "x$ac_cv_have_decl__res" = x""yes; then :
+if test "x$ac_cv_have_decl__res" = xyes; then :
   ac_have_decl=1
 else
   ac_have_decl=0
@@ -42074,7 +41958,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_LEX+set}" = set; then :
+if ${ac_cv_prog_LEX+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$LEX"; then
@@ -42144,7 +42028,7 @@
   test $ac_status = 0; }
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking lex output file root" >&5
 $as_echo_n "checking lex output file root... " >&6; }
-if test "${ac_cv_prog_lex_root+set}" = set; then :
+if ${ac_cv_prog_lex_root+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -42153,7 +42037,7 @@
 elif test -f lexyy.c; then
   ac_cv_prog_lex_root=lexyy
 else
-  as_fn_error "cannot find output from $LEX; giving up" "$LINENO" 5
+  as_fn_error $? "cannot find output from $LEX; giving up" "$LINENO" 5
 fi
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_root" >&5
@@ -42163,7 +42047,7 @@
 if test -z "${LEXLIB+set}"; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking lex library" >&5
 $as_echo_n "checking lex library... " >&6; }
-if test "${ac_cv_lib_lex+set}" = set; then :
+if ${ac_cv_lib_lex+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -42193,7 +42077,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether yytext is a pointer" >&5
 $as_echo_n "checking whether yytext is a pointer... " >&6; }
-if test "${ac_cv_prog_lex_yytext_pointer+set}" = set; then :
+if ${ac_cv_prog_lex_yytext_pointer+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   # POSIX says lex can declare yytext either as a pointer or an array; the
@@ -42204,7 +42088,8 @@
 LIBS="$LEXLIB $ac_save_LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#define YYTEXT_POINTER 1
+
+  #define YYTEXT_POINTER 1
 `cat $LEX_OUTPUT_ROOT.c`
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
@@ -42246,7 +42131,7 @@
 set dummy $ac_prog; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_prog_YACC+set}" = set; then :
+if ${ac_cv_prog_YACC+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test -n "$YACC"; then
@@ -42433,7 +42318,7 @@
 for ac_header in execinfo.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "execinfo.h" "ac_cv_header_execinfo_h" "$ac_includes_default"
-if test "x$ac_cv_header_execinfo_h" = x""yes; then :
+if test "x$ac_cv_header_execinfo_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_EXECINFO_H 1
 _ACEOF
@@ -42444,7 +42329,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing backtrace" >&5
 $as_echo_n "checking for library containing backtrace... " >&6; }
-if test "${ac_cv_search_ext_backtrace+set}" = set; then :
+if ${ac_cv_search_ext_backtrace+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -42516,7 +42401,7 @@
     LIBS="$EXECINFO_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for backtrace" >&5
 $as_echo_n "checking for backtrace... " >&6; }
-if test "${ac_cv_func_ext_backtrace+set}" = set; then :
+if ${ac_cv_func_ext_backtrace+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -42668,8 +42553,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -42681,7 +42565,7 @@
 for ac_func in setsid
 do :
   ac_fn_c_check_func "$LINENO" "setsid" "ac_cv_func_setsid"
-if test "x$ac_cv_func_setsid" = x""yes; then :
+if test "x$ac_cv_func_setsid" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SETSID 1
 _ACEOF
@@ -42698,8 +42582,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -42716,7 +42599,7 @@
 #include <sys/param.h>
 #endif
 "
-if test "x$ac_cv_header_sys_mount_h" = x""yes; then :
+if test "x$ac_cv_header_sys_mount_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_MOUNT_H 1
 _ACEOF
@@ -42733,7 +42616,7 @@
   # SVR4
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking statvfs64 function (SVR4)" >&5
 $as_echo_n "checking statvfs64 function (SVR4)... " >&6; }
-if test "${fu_cv_sys_stat_statvfs64+set}" = set; then :
+if ${fu_cv_sys_stat_statvfs64+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -42783,7 +42666,7 @@
   # SVR4
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking statvfs function (SVR4)" >&5
 $as_echo_n "checking statvfs function (SVR4)... " >&6; }
-if test "${fu_cv_sys_stat_statvfs+set}" = set; then :
+if ${fu_cv_sys_stat_statvfs+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -42820,7 +42703,7 @@
 # systems use f_bsize.
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking that statvfs.f_frsize works" >&5
 $as_echo_n "checking that statvfs.f_frsize works... " >&6; }
-if test "${samba_cv_frsize+set}" = set; then :
+if ${samba_cv_frsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -42855,7 +42738,7 @@
   # DEC Alpha running OSF/1
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for 3-argument statfs function (DEC OSF/1)" >&5
 $as_echo_n "checking for 3-argument statfs function (DEC OSF/1)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs3_osf1+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs3_osf1+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -42899,7 +42782,7 @@
 # AIX
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for two-argument statfs with statfs.bsize member (AIX, 4.3BSD)" >&5
 $as_echo_n "checking for two-argument statfs with statfs.bsize member (AIX, 4.3BSD)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs2_bsize+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs2_bsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -42949,7 +42832,7 @@
 # SVR3
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for four-argument statfs (AIX-3.2.5, SVR3)" >&5
 $as_echo_n "checking for four-argument statfs (AIX-3.2.5, SVR3)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs4+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs4+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -42990,7 +42873,7 @@
 # 4.4BSD and NetBSD
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for two-argument statfs with statfs.fsize member (4.4BSD and NetBSD)" >&5
 $as_echo_n "checking for two-argument statfs with statfs.fsize member (4.4BSD and NetBSD)... " >&6; }
-  if test "${fu_cv_sys_stat_statfs2_fsize+set}" = set; then :
+  if ${fu_cv_sys_stat_statfs2_fsize+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -43037,7 +42920,7 @@
   # Ultrix
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for two-argument statfs with struct fs_data (Ultrix)" >&5
 $as_echo_n "checking for two-argument statfs with struct fs_data (Ultrix)... " >&6; }
-  if test "${fu_cv_sys_stat_fs_data+set}" = set; then :
+  if ${fu_cv_sys_stat_fs_data+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
@@ -43088,8 +42971,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -43100,7 +42982,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing flistxattr" >&5
 $as_echo_n "checking for library containing flistxattr... " >&6; }
-if test "${ac_cv_search_ext_flistxattr+set}" = set; then :
+if ${ac_cv_search_ext_flistxattr+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -43172,7 +43054,7 @@
     LIBS="$XATTR_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for flistxattr" >&5
 $as_echo_n "checking for flistxattr... " >&6; }
-if test "${ac_cv_func_ext_flistxattr+set}" = set; then :
+if ${ac_cv_func_ext_flistxattr+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -43245,7 +43127,7 @@
 if test x"$ac_cv_func_ext_flistxattr" = x"yes"; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether xattr interface takes additional options" >&5
 $as_echo_n "checking whether xattr interface takes additional options... " >&6; }
-if test "${smb_attr_cv_xattr_add_opt+set}" = set; then :
+if ${smb_attr_cv_xattr_add_opt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   old_LIBS=$LIBS
@@ -43303,7 +43185,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for irix specific capabilities" >&5
 $as_echo_n "checking for irix specific capabilities... " >&6; }
-if test "${samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES+set}" = set; then :
+if ${samba_cv_HAVE_IRIX_SPECIFIC_CAPABILITIES+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -43345,7 +43227,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if gettimeofday takes tz argument" >&5
 $as_echo_n "checking if gettimeofday takes tz argument... " >&6; }
-if test "${samba_cv_HAVE_GETTIMEOFDAY_TZ+set}" = set; then :
+if ${samba_cv_HAVE_GETTIMEOFDAY_TZ+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -43393,7 +43275,7 @@
 	for ac_header in popt.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "popt.h" "ac_cv_header_popt_h" "$ac_includes_default"
-if test "x$ac_cv_header_popt_h" = x""yes; then :
+if test "x$ac_cv_header_popt_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_POPT_H 1
 _ACEOF
@@ -43404,7 +43286,7 @@
 
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for poptGetContext in -lpopt" >&5
 $as_echo_n "checking for poptGetContext in -lpopt... " >&6; }
-if test "${ac_cv_lib_popt_poptGetContext+set}" = set; then :
+if ${ac_cv_lib_popt_poptGetContext+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -43438,7 +43320,7 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_popt_poptGetContext" >&5
 $as_echo "$ac_cv_lib_popt_poptGetContext" >&6; }
-if test "x$ac_cv_lib_popt_poptGetContext" = x""yes; then :
+if test "x$ac_cv_lib_popt_poptGetContext" = xyes; then :
    POPT_LIBS="-lpopt"
 fi
 
@@ -43466,7 +43348,7 @@
 		fi
 	done
         if test x"$poptdir" = "x"; then
-		as_fn_error "cannot find popt source in $poptpaths" "$LINENO" 5
+		as_fn_error $? "cannot find popt source in $poptpaths" "$LINENO" 5
 	fi
 	POPT_OBJ="popt.o findme.o poptconfig.o popthelp.o poptparse.o"
 
@@ -43474,8 +43356,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -43517,7 +43398,7 @@
 if test "${with_libiconv+set}" = set; then :
   withval=$with_libiconv;
   if test "$withval" = "no" ; then
-    as_fn_error "I won't take no for an answer" "$LINENO" 5
+    as_fn_error $? "I won't take no for an answer" "$LINENO" 5
   else
      if test "$withval" != "yes" ; then
 
@@ -43540,7 +43421,7 @@
 $as_echo_n "checking Whether giconv.h is present... " >&6; }
   if test "$cross_compiling" = yes; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: cross" >&5
-$as_echo "cross" >&6; }; as_fn_error "No iconv library found in $withval" "$LINENO" 5
+$as_echo "cross" >&6; }; as_fn_error $? "No iconv library found in $withval" "$LINENO" 5
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -43567,7 +43448,7 @@
 
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }; as_fn_error "No iconv library found in $withval" "$LINENO" 5
+$as_echo "no" >&6; }; as_fn_error $? "No iconv library found in $withval" "$LINENO" 5
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
@@ -43608,7 +43489,7 @@
 $as_echo_n "checking Whether giconv.h is present... " >&6; }
   if test "$cross_compiling" = yes; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: cross" >&5
-$as_echo "cross" >&6; }; as_fn_error "No iconv library found in $withval" "$LINENO" 5
+$as_echo "cross" >&6; }; as_fn_error $? "No iconv library found in $withval" "$LINENO" 5
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -43635,7 +43516,7 @@
 
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }; as_fn_error "No iconv library found in $withval" "$LINENO" 5
+$as_echo "no" >&6; }; as_fn_error $? "No iconv library found in $withval" "$LINENO" 5
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
@@ -43876,7 +43757,7 @@
 for ac_func in writev
 do :
   ac_fn_c_check_func "$LINENO" "writev" "ac_cv_func_writev"
-if test "x$ac_cv_func_writev" = x""yes; then :
+if test "x$ac_cv_func_writev" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_WRITEV 1
 _ACEOF
@@ -43887,7 +43768,7 @@
 for ac_func in readv
 do :
   ac_fn_c_check_func "$LINENO" "readv" "ac_cv_func_readv"
-if test "x$ac_cv_func_readv" = x""yes; then :
+if test "x$ac_cv_func_readv" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_READV 1
 _ACEOF
@@ -43971,7 +43852,7 @@
 for ac_header in zlib.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "zlib.h" "ac_cv_header_zlib_h" "$ac_includes_default"
-if test "x$ac_cv_header_zlib_h" = x""yes; then :
+if test "x$ac_cv_header_zlib_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_ZLIB_H 1
 _ACEOF
@@ -43990,7 +43871,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for zlibVersion in -lz" >&5
 $as_echo_n "checking for zlibVersion in -lz... " >&6; }
-if test "${ac_cv_lib_ext_z_zlibVersion+set}" = set; then :
+if ${ac_cv_lib_ext_z_zlibVersion+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -44050,7 +43931,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for zlib >= 1.2.3" >&5
 $as_echo_n "checking for zlib >= 1.2.3... " >&6; }
-if test "${samba_cv_zlib_1_2_3+set}" = set; then :
+if ${samba_cv_zlib_1_2_3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -44145,7 +44026,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKG_CONFIG in
@@ -44327,7 +44208,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKG_CONFIG in
@@ -44498,7 +44379,7 @@
 	fi
 done
 if test x"$tdbdir" = "x"; then
-   as_fn_error "cannot find tdb source in $tdbpaths" "$LINENO" 5
+   as_fn_error $? "cannot find tdb source in $tdbpaths" "$LINENO" 5
 fi
 TDB_OBJ="common/tdb.o common/dump.o common/transaction.o common/error.o common/traverse.o"
 TDB_OBJ="$TDB_OBJ common/freelist.o common/freelistcheck.o common/io.o common/lock.o common/open.o common/check.o"
@@ -44515,8 +44396,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -44528,8 +44408,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -44542,7 +44421,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pread declaration" >&5
 $as_echo_n "checking for pread declaration... " >&6; }
-if test "${ac_cv_have_pread_decl+set}" = set; then :
+if ${ac_cv_have_pread_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -44575,7 +44454,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pwrite declaration" >&5
 $as_echo_n "checking for pwrite declaration... " >&6; }
-if test "${ac_cv_have_pwrite_decl+set}" = set; then :
+if ${ac_cv_have_pwrite_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -44634,7 +44513,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKG_CONFIG in
@@ -44809,7 +44688,7 @@
 		fi
 	done
 	if test x"$teventdir" = "x"; then
-	   as_fn_error "cannot find libtevent source in $teventpaths" "$LINENO" 5
+	   as_fn_error $? "cannot find libtevent source in $teventpaths" "$LINENO" 5
 	fi
 fi
 
@@ -44830,7 +44709,7 @@
 for ac_header in sys/epoll.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sys/epoll.h" "ac_cv_header_sys_epoll_h" "$ac_includes_default"
-if test "x$ac_cv_header_sys_epoll_h" = x""yes; then :
+if test "x$ac_cv_header_sys_epoll_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SYS_EPOLL_H 1
 _ACEOF
@@ -44842,7 +44721,7 @@
 for ac_func in epoll_create
 do :
   ac_fn_c_check_func "$LINENO" "epoll_create" "ac_cv_func_epoll_create"
-if test "x$ac_cv_func_epoll_create" = x""yes; then :
+if test "x$ac_cv_func_epoll_create" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_EPOLL_CREATE 1
 _ACEOF
@@ -44911,7 +44790,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKG_CONFIG in
@@ -45126,7 +45005,7 @@
   for ac_header in sqlite3.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sqlite3.h" "ac_cv_header_sqlite3_h" "$ac_includes_default"
-if test "x$ac_cv_header_sqlite3_h" = x""yes; then :
+if test "x$ac_cv_header_sqlite3_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SQLITE3_H 1
 _ACEOF
@@ -45138,7 +45017,7 @@
 
   if test x"$ac_cv_header_sqlite3_h" != x"yes"; then
 	if test x"$with_sqlite3_support" = x"yes"; then
-	 as_fn_error "sqlite3.h is needed for SQLITE3 support" "$LINENO" 5
+	 as_fn_error $? "sqlite3.h is needed for SQLITE3 support" "$LINENO" 5
 	else
 	 { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: sqlite3.h is needed for SQLITE3 support" >&5
 $as_echo "$as_me: WARNING: sqlite3.h is needed for SQLITE3 support" >&2;}
@@ -45162,7 +45041,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sqlite3_open in -lsqlite3" >&5
 $as_echo_n "checking for sqlite3_open in -lsqlite3... " >&6; }
-if test "${ac_cv_lib_ext_sqlite3_sqlite3_open+set}" = set; then :
+if ${ac_cv_lib_ext_sqlite3_sqlite3_open+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -45241,7 +45120,7 @@
 
   else
     if test x"$with_sqlite3_support" = x"yes"; then
-	as_fn_error "libsqlite3 is needed for SQLITE3 support" "$LINENO" 5
+	as_fn_error $? "libsqlite3 is needed for SQLITE3 support" "$LINENO" 5
     else
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: libsqlite3 is needed for SQLITE3 support" >&5
 $as_echo "$as_me: WARNING: libsqlite3 is needed for SQLITE3 support" >&2;}
@@ -45329,7 +45208,7 @@
 set dummy pkg-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
 $as_echo_n "checking for $ac_word... " >&6; }
-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+if ${ac_cv_path_PKG_CONFIG+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   case $PKG_CONFIG in
@@ -45498,7 +45377,7 @@
 	for ac_header in gnutls/gnutls.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "gnutls/gnutls.h" "ac_cv_header_gnutls_gnutls_h" "$ac_includes_default"
-if test "x$ac_cv_header_gnutls_gnutls_h" = x""yes; then :
+if test "x$ac_cv_header_gnutls_gnutls_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GNUTLS_GNUTLS_H 1
 _ACEOF
@@ -45516,7 +45395,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gnutls_global_init in -lgnutls" >&5
 $as_echo_n "checking for gnutls_global_init in -lgnutls... " >&6; }
-if test "${ac_cv_lib_ext_gnutls_gnutls_global_init+set}" = set; then :
+if ${ac_cv_lib_ext_gnutls_gnutls_global_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -45578,7 +45457,7 @@
 	#include <gnutls/x509.h>
 
 "
-if test "x$ac_cv_have_decl_gnutls_x509_crt_set_version" = x""yes; then :
+if test "x$ac_cv_have_decl_gnutls_x509_crt_set_version" = xyes; then :
 
 $as_echo "#define HAVE_GNUTLS_X509_CRT_SET_VERSION 1" >>confdefs.h
 
@@ -45597,7 +45476,7 @@
 	#include <gnutls/x509.h>
 
 "
-if test "x$ac_cv_have_decl_gnutls_x509_crt_set_subject_key_id" = x""yes; then :
+if test "x$ac_cv_have_decl_gnutls_x509_crt_set_subject_key_id" = xyes; then :
 
 $as_echo "#define HAVE_GNUTLS_X509_CRT_SET_SUBJECT_KEY_ID 1" >>confdefs.h
 
@@ -45618,7 +45497,7 @@
 	#Some older versions have a different type name
 	ac_fn_c_check_type "$LINENO" "gnutls_datum" "ac_cv_type_gnutls_datum" "#include \"gnutls/gnutls.h\"
 "
-if test "x$ac_cv_type_gnutls_datum" = x""yes; then :
+if test "x$ac_cv_type_gnutls_datum" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_GNUTLS_DATUM 1
@@ -45629,7 +45508,7 @@
 
 	ac_fn_c_check_type "$LINENO" "gnutls_datum_t" "ac_cv_type_gnutls_datum_t" "#include \"gnutls/gnutls.h\"
 "
-if test "x$ac_cv_type_gnutls_datum_t" = x""yes; then :
+if test "x$ac_cv_type_gnutls_datum_t" = xyes; then :
 
 cat >>confdefs.h <<_ACEOF
 #define HAVE_GNUTLS_DATUM_T 1
@@ -45644,7 +45523,7 @@
 	for ac_header in gcrypt.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "gcrypt.h" "ac_cv_header_gcrypt_h" "$ac_includes_default"
-if test "x$ac_cv_header_gcrypt_h" = x""yes; then :
+if test "x$ac_cv_header_gcrypt_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_GCRYPT_H 1
 _ACEOF
@@ -45662,7 +45541,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gcry_control in -lgcrypt" >&5
 $as_echo_n "checking for gcry_control in -lgcrypt... " >&6; }
-if test "${ac_cv_lib_ext_gcrypt_gcry_control+set}" = set; then :
+if ${ac_cv_lib_ext_gcrypt_gcry_control+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -45761,7 +45640,7 @@
 	for ac_header in netapi.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "netapi.h" "ac_cv_header_netapi_h" "$ac_includes_default"
-if test "x$ac_cv_header_netapi_h" = x""yes; then :
+if test "x$ac_cv_header_netapi_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_NETAPI_H 1
 _ACEOF
@@ -45779,7 +45658,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libnetapi_init in -lnetapi" >&5
 $as_echo_n "checking for libnetapi_init in -lnetapi... " >&6; }
-if test "${ac_cv_lib_ext_netapi_libnetapi_init+set}" = set; then :
+if ${ac_cv_lib_ext_netapi_libnetapi_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -45845,7 +45724,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for NetUserModalsGet in -lnetapi" >&5
 $as_echo_n "checking for NetUserModalsGet in -lnetapi... " >&6; }
-if test "${ac_cv_lib_ext_netapi_NetUserModalsGet+set}" = set; then :
+if ${ac_cv_lib_ext_netapi_NetUserModalsGet+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -45911,7 +45790,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for NetUserGetGroups in -lnetapi" >&5
 $as_echo_n "checking for NetUserGetGroups in -lnetapi... " >&6; }
-if test "${ac_cv_lib_ext_netapi_NetUserGetGroups+set}" = set; then :
+if ${ac_cv_lib_ext_netapi_NetUserGetGroups+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -45977,7 +45856,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for NetUserGetInfo in -lnetapi" >&5
 $as_echo_n "checking for NetUserGetInfo in -lnetapi... " >&6; }
-if test "${ac_cv_lib_ext_netapi_NetUserGetInfo+set}" = set; then :
+if ${ac_cv_lib_ext_netapi_NetUserGetInfo+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46043,7 +45922,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for NetUserSetInfo in -lnetapi" >&5
 $as_echo_n "checking for NetUserSetInfo in -lnetapi... " >&6; }
-if test "${ac_cv_lib_ext_netapi_NetUserSetInfo+set}" = set; then :
+if ${ac_cv_lib_ext_netapi_NetUserSetInfo+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46120,7 +45999,7 @@
 
 	else
 		if test x$use_netapi != xauto; then
-			as_fn_error "--enable-netapi: libnetapi not found" "$LINENO" 5
+			as_fn_error $? "--enable-netapi: libnetapi not found" "$LINENO" 5
 		fi
 	fi
 
@@ -46171,7 +46050,7 @@
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 		if test x"$ac_cv_func_pread" != x"yes" -o x"$ac_cv_func_pwrite" != x"yes";then
-			as_fn_error "You cannot enable threads when you don't have pread/pwrite!" "$LINENO" 5
+			as_fn_error $? "You cannot enable threads when you don't have pread/pwrite!" "$LINENO" 5
 		fi
 
 	MAKE_SETTINGS="$MAKE_SETTINGS
@@ -46222,7 +46101,7 @@
 		for ac_header in setproctitle.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "setproctitle.h" "ac_cv_header_setproctitle_h" "$ac_includes_default"
-if test "x$ac_cv_header_setproctitle_h" = x""yes; then :
+if test "x$ac_cv_header_setproctitle_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SETPROCTITLE_H 1
 _ACEOF
@@ -46232,7 +46111,7 @@
 done
 
 		ac_fn_c_check_func "$LINENO" "setproctitle" "ac_cv_func_setproctitle"
-if test "x$ac_cv_func_setproctitle" = x""yes; then :
+if test "x$ac_cv_func_setproctitle" = xyes; then :
 
 else
 
@@ -46245,7 +46124,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for setproctitle in -lsetproctitle" >&5
 $as_echo_n "checking for setproctitle in -lsetproctitle... " >&6; }
-if test "${ac_cv_lib_ext_setproctitle_setproctitle+set}" = set; then :
+if ${ac_cv_lib_ext_setproctitle_setproctitle+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46353,7 +46232,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for tv_nsec nanosecond fields in struct stat" >&5
 $as_echo_n "checking for tv_nsec nanosecond fields in struct stat... " >&6; }
-if test "${ac_cv_have_stat_tv_nsec+set}" = set; then :
+if ${ac_cv_have_stat_tv_nsec+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -46395,7 +46274,7 @@
 for ac_header in blkid/blkid.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "blkid/blkid.h" "ac_cv_header_blkid_blkid_h" "$ac_includes_default"
-if test "x$ac_cv_header_blkid_blkid_h" = x""yes; then :
+if test "x$ac_cv_header_blkid_blkid_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_BLKID_BLKID_H 1
 _ACEOF
@@ -46406,7 +46285,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing blkid_get_cache" >&5
 $as_echo_n "checking for library containing blkid_get_cache... " >&6; }
-if test "${ac_cv_search_ext_blkid_get_cache+set}" = set; then :
+if ${ac_cv_search_ext_blkid_get_cache+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -46478,7 +46357,7 @@
     LIBS="$BLKID_LIBS $LIBS"
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for blkid_get_cache" >&5
 $as_echo_n "checking for blkid_get_cache... " >&6; }
-if test "${ac_cv_func_ext_blkid_get_cache+set}" = set; then :
+if ${ac_cv_func_ext_blkid_get_cache+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46581,7 +46460,7 @@
 for ac_func in setgroups
 do :
   ac_fn_c_check_func "$LINENO" "setgroups" "ac_cv_func_setgroups"
-if test "x$ac_cv_func_setgroups" = x""yes; then :
+if test "x$ac_cv_func_setgroups" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SETGROUPS 1
 _ACEOF
@@ -46596,7 +46475,7 @@
 for ac_header in security/pam_appl.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "security/pam_appl.h" "ac_cv_header_security_pam_appl_h" "$ac_includes_default"
-if test "x$ac_cv_header_security_pam_appl_h" = x""yes; then :
+if test "x$ac_cv_header_security_pam_appl_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SECURITY_PAM_APPL_H 1
 _ACEOF
@@ -46614,7 +46493,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pam_start in -lpam" >&5
 $as_echo_n "checking for pam_start in -lpam... " >&6; }
-if test "${ac_cv_lib_ext_pam_pam_start+set}" = set; then :
+if ${ac_cv_lib_ext_pam_pam_start+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46703,7 +46582,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for crypt in -lcrypt" >&5
 $as_echo_n "checking for crypt in -lcrypt... " >&6; }
-if test "${ac_cv_lib_ext_crypt_crypt+set}" = set; then :
+if ${ac_cv_lib_ext_crypt_crypt+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46781,8 +46660,7 @@
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
@@ -46794,7 +46672,7 @@
 for ac_header in sasl/sasl.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "sasl/sasl.h" "ac_cv_header_sasl_sasl_h" "$ac_includes_default"
-if test "x$ac_cv_header_sasl_sasl_h" = x""yes; then :
+if test "x$ac_cv_header_sasl_sasl_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_SASL_SASL_H 1
 _ACEOF
@@ -46812,7 +46690,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for sasl_client_init in -lsasl2" >&5
 $as_echo_n "checking for sasl_client_init in -lsasl2... " >&6; }
-if test "${ac_cv_lib_ext_sasl2_sasl_client_init+set}" = set; then :
+if ${ac_cv_lib_ext_sasl2_sasl_client_init+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -46974,8 +46852,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -46985,14 +46862,14 @@
 done
 
 ac_fn_c_check_func "$LINENO" "inotify_init" "ac_cv_func_inotify_init"
-if test "x$ac_cv_func_inotify_init" = x""yes; then :
+if test "x$ac_cv_func_inotify_init" = xyes; then :
 
 fi
 
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for __NR_inotify_init declaration" >&5
 $as_echo_n "checking for __NR_inotify_init declaration... " >&6; }
-if test "${ac_cv_have___NR_inotify_init_decl+set}" = set; then :
+if ${ac_cv_have___NR_inotify_init_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -47064,7 +46941,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for F_SETLEASE declaration" >&5
 $as_echo_n "checking for F_SETLEASE declaration... " >&6; }
-if test "${ac_cv_have_F_SETLEASE_decl+set}" = set; then :
+if ${ac_cv_have_F_SETLEASE_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -47097,7 +46974,7 @@
 
  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for SA_SIGINFO declaration" >&5
 $as_echo_n "checking for SA_SIGINFO declaration... " >&6; }
-if test "${ac_cv_have_SA_SIGINFO_decl+set}" = set; then :
+if ${ac_cv_have_SA_SIGINFO_decl+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -47151,8 +47028,7 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
@@ -47469,7 +47345,7 @@
 for ac_header in zlib.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "zlib.h" "ac_cv_header_zlib_h" "$ac_includes_default"
-if test "x$ac_cv_header_zlib_h" = x""yes; then :
+if test "x$ac_cv_header_zlib_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
 #define HAVE_ZLIB_H 1
 _ACEOF
@@ -47488,7 +47364,7 @@
 
         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for zlibVersion in -lz" >&5
 $as_echo_n "checking for zlibVersion in -lz... " >&6; }
-if test "${ac_cv_lib_ext_z_zlibVersion+set}" = set; then :
+if ${ac_cv_lib_ext_z_zlibVersion+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@@ -47548,7 +47424,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for zlib >= 1.2.3" >&5
 $as_echo_n "checking for zlib >= 1.2.3... " >&6; }
-if test "${samba_cv_zlib_1_2_3+set}" = set; then :
+if ${samba_cv_zlib_1_2_3+:} false; then :
   $as_echo_n "(cached) " >&6
 else
 
@@ -47753,7 +47629,7 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 else
-  as_fn_error "summary failure. Aborting config" "$LINENO" 5; exit 1;
+  as_fn_error $? "summary failure. Aborting config" "$LINENO" 5; exit 1;
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
   conftest.$ac_objext conftest.beam conftest.$ac_ext
@@ -47856,10 +47732,21 @@
      :end' >>confcache
 if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
   if test -w "$cache_file"; then
-    test "x$cache_file" != "x/dev/null" &&
+    if test "x$cache_file" != "x/dev/null"; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
 $as_echo "$as_me: updating cache $cache_file" >&6;}
-    cat confcache >$cache_file
+      if test ! -f "$cache_file" || test -h "$cache_file"; then
+	cat confcache >"$cache_file"
+      else
+        case $cache_file in #(
+        */* | ?:*)
+	  mv -f confcache "$cache_file"$$ &&
+	  mv -f "$cache_file"$$ "$cache_file" ;; #(
+        *)
+	  mv -f confcache "$cache_file" ;;
+	esac
+      fi
+    fi
   else
     { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
 $as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
@@ -47875,6 +47762,7 @@
 
 ac_libobjs=
 ac_ltlibobjs=
+U=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
@@ -47902,7 +47790,7 @@
 		fi
 
 
-: ${CONFIG_STATUS=./config.status}
+: "${CONFIG_STATUS=./config.status}"
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
@@ -48003,6 +47891,7 @@
 IFS=" ""	$as_nl"
 
 # Find who we are.  Look in the path if we contain no directory separator.
+as_myself=
 case $0 in #((
   *[\\/]* ) as_myself=$0 ;;
   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
@@ -48048,19 +47937,19 @@
 (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -48256,7 +48145,7 @@
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
@@ -48310,7 +48199,7 @@
 # values after options handling.
 ac_log="
 This file was extended by Samba $as_me 3, which was
-generated by GNU Autoconf 2.65.  Invocation command line was
+generated by GNU Autoconf 2.68.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
@@ -48376,10 +48265,10 @@
 ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
 Samba config.status 3
-configured by $0, generated by GNU Autoconf 2.65,
+configured by $0, generated by GNU Autoconf 2.68,
   with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
@@ -48396,11 +48285,16 @@
 while test $# != 0
 do
   case $1 in
-  --*=*)
+  --*=?*)
     ac_option=`expr "X$1" : 'X\([^=]*\)='`
     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
     ac_shift=:
     ;;
+  --*=)
+    ac_option=`expr "X$1" : 'X\([^=]*\)='`
+    ac_optarg=
+    ac_shift=:
+    ;;
   *)
     ac_option=$1
     ac_optarg=$2
@@ -48422,6 +48316,7 @@
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
     ac_need_defaults=false;;
@@ -48434,7 +48329,7 @@
     ac_need_defaults=false;;
   --he | --h)
     # Conflict between --help and --header
-    as_fn_error "ambiguous option: \`$1'
+    as_fn_error $? "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
     $as_echo "$ac_cs_usage"; exit ;;
@@ -48443,7 +48338,7 @@
     ac_cs_silent=: ;;
 
   # This is an error.
-  -*) as_fn_error "unrecognized option: \`$1'
+  -*) as_fn_error $? "unrecognized option: \`$1'
 Try \`$0 --help' for more information." ;;
 
   *) as_fn_append ac_config_targets " $1"
@@ -48539,7 +48434,7 @@
     "pkgconfig/smbsharemodes.pc") CONFIG_FILES="$CONFIG_FILES pkgconfig/smbsharemodes.pc" ;;
     "../examples/libsmbclient/Makefile.internal") CONFIG_FILES="$CONFIG_FILES ../examples/libsmbclient/Makefile.internal" ;;
 
-  *) as_fn_error "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
   esac
 done
 
@@ -48562,9 +48457,10 @@
 # after its creation but before its name has been assigned to `$tmp'.
 $debug ||
 {
-  tmp=
+  tmp= ac_tmp=
   trap 'exit_status=$?
-  { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
+  : "${ac_tmp:=$tmp}"
+  { test ! -d "$ac_tmp" || rm -fr "$ac_tmp"; } && exit $exit_status
 ' 0
   trap 'as_fn_exit 1' 1 2 13 15
 }
@@ -48572,12 +48468,13 @@
 
 {
   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
-  test -n "$tmp" && test -d "$tmp"
+  test -d "$tmp"
 }  ||
 {
   tmp=./conf$$-$RANDOM
   (umask 077 && mkdir "$tmp")
-} || as_fn_error "cannot create a temporary directory in ." "$LINENO" 5
+} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
+ac_tmp=$tmp
 
 # Set up the scripts for CONFIG_FILES section.
 # No need to generate them if there are no CONFIG_FILES.
@@ -48594,12 +48491,12 @@
 fi
 ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
 if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
-  ac_cs_awk_cr='\r'
+  ac_cs_awk_cr='\\r'
 else
   ac_cs_awk_cr=$ac_cr
 fi
 
-echo 'BEGIN {' >"$tmp/subs1.awk" &&
+echo 'BEGIN {' >"$ac_tmp/subs1.awk" &&
 _ACEOF
 
 
@@ -48608,18 +48505,18 @@
   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
   echo "_ACEOF"
 } >conf$$subs.sh ||
-  as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
-ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
+  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   . ./conf$$subs.sh ||
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
 
   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
   if test $ac_delim_n = $ac_delim_num; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
@@ -48627,7 +48524,7 @@
 rm -f conf$$subs.sh
 
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
-cat >>"\$tmp/subs1.awk" <<\\_ACAWK &&
+cat >>"\$ac_tmp/subs1.awk" <<\\_ACAWK &&
 _ACEOF
 sed -n '
 h
@@ -48675,7 +48572,7 @@
 rm -f conf$$subs.awk
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 _ACAWK
-cat >>"\$tmp/subs1.awk" <<_ACAWK &&
+cat >>"\$ac_tmp/subs1.awk" <<_ACAWK &&
   for (key in S) S_is_set[key] = 1
   FS = ""
 
@@ -48707,21 +48604,29 @@
   sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
 else
   cat
-fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
-  || as_fn_error "could not setup config files machinery" "$LINENO" 5
+fi < "$ac_tmp/subs1.awk" > "$ac_tmp/subs.awk" \
+  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
 _ACEOF
 
-# VPATH may cause trouble with some makes, so we remove $(srcdir),
-# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
+# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
 # trailing colons and then remove the whole line if VPATH becomes empty
 # (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
-s/:*\$(srcdir):*/:/
-s/:*\${srcdir}:*/:/
-s/:*@srcdir@:*/:/
-s/^\([^=]*=[	 ]*\):*/\1/
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
+h
+s///
+s/^/:/
+s/[	 ]*$/:/
+s/:\$(srcdir):/:/g
+s/:\${srcdir}:/:/g
+s/:@srcdir@:/:/g
+s/^:*//
 s/:*$//
+x
+s/\(=[	 ]*\).*/\1/
+G
+s/\n//
 s/^[^=]*=[	 ]*$//
 }'
 fi
@@ -48733,7 +48638,7 @@
 # No need to generate them if there are no CONFIG_HEADERS.
 # This happens for instance with `./config.status Makefile'.
 if test -n "$CONFIG_HEADERS"; then
-cat >"$tmp/defines.awk" <<\_ACAWK ||
+cat >"$ac_tmp/defines.awk" <<\_ACAWK ||
 BEGIN {
 _ACEOF
 
@@ -48745,11 +48650,11 @@
 # handling of long lines.
 ac_delim='%!_!# '
 for ac_last_try in false false :; do
-  ac_t=`sed -n "/$ac_delim/p" confdefs.h`
-  if test -z "$ac_t"; then
+  ac_tt=`sed -n "/$ac_delim/p" confdefs.h`
+  if test -z "$ac_tt"; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_HEADERS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
@@ -48834,7 +48739,7 @@
 _ACAWK
 _ACEOF
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
-  as_fn_error "could not setup config headers machinery" "$LINENO" 5
+  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
 fi # test -n "$CONFIG_HEADERS"
 
 
@@ -48847,7 +48752,7 @@
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) as_fn_error "invalid tag \`$ac_tag'" "$LINENO" 5;;
+  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
@@ -48866,7 +48771,7 @@
     for ac_f
     do
       case $ac_f in
-      -) ac_f="$tmp/stdin";;
+      -) ac_f="$ac_tmp/stdin";;
       *) # Look for the file first in the build tree, then in the source tree
 	 # (if the path is not absolute).  The absolute path cannot be DOS-style,
 	 # because $ac_f cannot contain `:'.
@@ -48875,7 +48780,7 @@
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   as_fn_error "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
@@ -48901,8 +48806,8 @@
     esac
 
     case $ac_tag in
-    *:-:* | *:-) cat >"$tmp/stdin" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5 ;;
+    *:-:* | *:-) cat >"$ac_tmp/stdin" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5 ;;
     esac
     ;;
   esac
@@ -49032,23 +48937,24 @@
 s&@INSTALL@&$ac_INSTALL&;t t
 $ac_datarootdir_hack
 "
-eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$ac_tmp/subs.awk" \
+  >$ac_tmp/out || as_fn_error $? "could not create $ac_file" "$LINENO" 5
 
 test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
-  { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
-  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
+  { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
+  { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
+      "$ac_tmp/out"`; test -z "$ac_out"; } &&
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&5
+which seems to be undefined.  Please make sure it is defined" >&5
 $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&2;}
+which seems to be undefined.  Please make sure it is defined" >&2;}
 
-  rm -f "$tmp/stdin"
+  rm -f "$ac_tmp/stdin"
   case $ac_file in
-  -) cat "$tmp/out" && rm -f "$tmp/out";;
-  *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
+  -) cat "$ac_tmp/out" && rm -f "$ac_tmp/out";;
+  *) rm -f "$ac_file" && mv "$ac_tmp/out" "$ac_file";;
   esac \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
  ;;
   :H)
   #
@@ -49057,21 +48963,21 @@
   if test x"$ac_file" != x-; then
     {
       $as_echo "/* $configure_input  */" \
-      && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
-    } >"$tmp/config.h" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5
-    if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
+    } >"$ac_tmp/config.h" \
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+    if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
 $as_echo "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
-      mv "$tmp/config.h" "$ac_file" \
-	|| as_fn_error "could not create $ac_file" "$LINENO" 5
+      mv "$ac_tmp/config.h" "$ac_file" \
+	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
     $as_echo "/* $configure_input  */" \
-      && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
-      || as_fn_error "could not create -" "$LINENO" 5
+      && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
+      || as_fn_error $? "could not create -" "$LINENO" 5
   fi
  ;;
 
@@ -49106,7 +49012,7 @@
 ac_clean_files=$ac_clean_files_save
 
 test $ac_write_fail = 0 ||
-  as_fn_error "write failure creating $CONFIG_STATUS" "$LINENO" 5
+  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
 
 
 # configure is writing to config.log, and then calls config.status.
@@ -49127,7 +49033,7 @@
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
   # would make configure fail if this is the last instruction.
-  $ac_cs_success || as_fn_exit $?
+  $ac_cs_success || as_fn_exit 1
 fi
 if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
