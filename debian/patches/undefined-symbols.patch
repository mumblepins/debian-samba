Description: Fix missing symbols
 Fix missing symbols in libsmbclient (and libnss_wins), and add
 -Wl,-z,defs to the libsmbclient link options to prevent future
 instances of undefined symbols.
 .
 This should be forwarded upstream once there's a configure test
 for it.
Author: Steve Langasek <vorlon@debian.org>
Bug-Debian: http://bugs.debian.org/281181
Forwarded: no

Index: samba-3.4.0~pre1/source3/Makefile.in
===================================================================
--- samba-3.4.0~pre1.orig/source3/Makefile.in	2009-05-09 20:36:33.735433063 +0200
+++ samba-3.4.0~pre1/source3/Makefile.in	2009-05-16 09:46:02.135574618 +0200
@@ -2122,7 +2122,7 @@
 
 $(LIBSMBCLIENT_SHARED_TARGET_SONAME): $(BINARY_PREREQS) $(LIBSMBCLIENT_OBJ) $(LIBSMBCLIENT_SYMS) @LIBTALLOC_TARGET@ @LIBTDB_TARGET@ @LIBWBCLIENT_TARGET@
 	@echo Linking shared library $@
-	@$(SHLD_DSO) $(LIBSMBCLIENT_OBJ) \
+	@$(SHLD_DSO) -Wl,-z,defs $(LIBSMBCLIENT_OBJ) \
 		$(LIBTALLOC_LIBS) $(LIBTDB_LIBS) $(LIBWBCLIENT_LIBS) $(LIBS) \
 		$(KRB5LIBS) $(LDAP_LIBS) $(NSCD_LIBS) \
 		@SONAMEFLAG@`basename $@`
